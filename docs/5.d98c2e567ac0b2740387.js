(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return s});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:a,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.f)(o.value,2),u=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.g)(Object(r.g)([],Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.f)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,s=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?a:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var l=Object(r.h)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.f)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"2Idn":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!("string"==typeof t||t instanceof String)){var e=r(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}},t.exports=e.default,t.exports.default=e.default},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"46XO":function(t){t.exports=JSON.parse('[{"name":"Bebidas","menu":[{"name":"Espresso doble","price":35,"image":"background-5","description":"espresso de maquina"},{"name":"Americano","price":28,"image":"background-5","description":"caf\xe9 de maquina, estilo americano"},{"name":"Espresso","price":28,"image":"background-5","description":"espresso de maquina"},{"name":"Jugo de Naranja","price":29,"image":"background-5","description":"Jugo de naranja natural"},{"name":"Malteadas","price":35,"image":"background-5","description":""},{"name":"Chocolate","price":30,"image":"background-5","description":""},{"name":"T\xe9","price":29,"image":"background-5","description":""},{"name":"Chocolate Blanco","price":30,"image":"background-5","description":""},{"name":"Agua de sabor","price":28,"image":"background-5","description":"Descripci\xf3n Pendiente"},{"name":"Cerveza Nacional","price":35,"image":"background-5","description":"Descripci\xf3n Pendiente"},{"name":"Refresco","price":25,"image":"background-5","description":"Descripci\xf3n Pendiente"}]}]')},"5AlR":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t},t.exports=e.default,t.exports.default=e.default},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),a=n("mrSG"),s=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.K)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.E)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.J)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.K)(i):i,n+=" "}return n},v=null,b=!0,y=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===v&&!0===f.get("logging_enabled")&&y(!0)),v){var n=m.apply(null,t);v(n)}},_=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,Object(a.g)([t],Object(a.f)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(a.g)([],Object(a.f)(t)));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(a.g)([],Object(a.f)(t)));throw d.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(a.g)([],Object(a.f)(t)));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},E="[MIN_NAME]",k="[MAX_NAME]",S=function(t,e){if(t===e)return 0;if(t===E||e===k)return-1;if(e===E||t===k)return 1;var n=R(t),r=R(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},x=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.K)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.K)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.K)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D=function(t){var e,n,r,i,a;Object(o.f)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),R=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),U=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",K="long_polling",z=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function W(t,e,n){var r;if(Object(o.f)("string"==typeof e,"typeof type must == string"),Object(o.f)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return j(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var H=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),J={},G={};function Y(t){var e=t.toString();return J[e]||(J[e]=new H),J[e]}var Q=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),X="start",$="close",Z=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_(t),this.stats_=Y(e),this.urlFn=function(t){return W(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Q(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.A)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a.f)(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===X)n.id=o,n.password=s;else{if(i!==$)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a.f)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.A)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.K)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.A)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.K)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.A)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.A)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_(this.connId),this.stats_=Y(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.A)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),W(t,B,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.A)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,a=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.E)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.K)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Z,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var s=this.transports_=[];try{for(var u=Object(a.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),st=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(a.g)([],Object(a.f)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.y)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(a.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function dt(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function yt(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _t(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=S(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(dt(t)!==dt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ct(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(dt(t)>dt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var It=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.I)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Et(t))}function Et(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,St,xt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(a.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),Pt=1e3,At=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=_("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Pt,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.A)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),xt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(a.d)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.K)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.H)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.r)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.D)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.K)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.K)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())};this.realtime_={close:l,sendRequest:function(t){Object(o.f)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){u?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,c=new at(a,t.repoInfo_,t.applicationId_,n,r,i,function(e){I(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},s))}).then(null,function(e){t.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&I(e),l())})}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.v)(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(a.h)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,Object(a.h)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.A)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.y)()?t["framework.cordova"]=1:Object(o.B)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.v)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(st),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),jt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(E,t),r=new Nt(E,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return S(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(k,kt)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,kt)},e.prototype.toString=function(){return".key"},e}(jt),Mt=new Dt,Rt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Rt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Rt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ft,t}();function Ut(t,e){return S(t.name,e.name)}function qt(t,e){return S(t,e)}var Bt,Kt,zt,Wt,Ht,Jt=function(t){return"number"==typeof t?"number:"+D(t):"string:"+t},Gt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===St||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===St||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Gt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Bt},set:function(t){Bt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return yt(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===dt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Jt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?D(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?S(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(k,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Kt(t);return new Nt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(jt)),Xt=Math.log(2),$t=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Zt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Lt(a,o.node,Lt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Lt(a,o.node,Lt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Lt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Lt.BLACK):(s(h,Lt.BLACK),s(h,Lt.RED))}return o}(new $t(t.length));return new Vt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(te&&Qt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":te},{".priority":Qt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.H)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(Nt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?Zt(i,e.getCompare()):te;var l=e.toString(),h=Object(a.a)({},this.indexSet_);h[l]=e;var f=Object(a.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.F)(this.indexes_,function(t,i){var a=Object(o.H)(r.indexSet_,i);if(Object(o.f)(a,"Missing index implementation for "+i),t===te){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Nt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Zt(s,a.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.F)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),ne=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Gt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ht||(Ht=new t(new Vt(qt),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ht},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ht:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ht:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(o.f)(".priority"!==ft(t)||1===dt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Qt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Jt(this.getPriority().val())+":"),this.forEachChild(Qt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===re?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Qt),r=e.getIterator(Qt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),re=new(function(t){function e(){return t.call(this,new Vt(qt),ne.EMPTY_NODE,ee.Default)||this}return Object(a.d)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ne.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ne));function ie(t,e){if(void 0===e&&(e=null),null===t)return ne.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,ie(e));if(t instanceof Array){var n=ne.EMPTY_NODE;return j(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=ie(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ie(e))}var r=[],i=!1;if(j(t,function(t,e){if("."!==t.substring(0,1)){var n=ie(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return ne.EMPTY_NODE;var a=Zt(r,Ut,function(t){return t.name},qt);if(i){var s=Zt(r,Qt.getCompare());return new ne(a,ie(e),new ee({".priority":s},{".priority":Qt}))}return new ne(a,ie(e),ee.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(E,ne.EMPTY_NODE)},MAX:{value:new Nt(k,re)}}),Dt.__EMPTY_NODE=ne.EMPTY_NODE,Yt.__childrenNodeConstructor=ne,St=re,zt=re,Kt=ie;var oe,ae,se=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!yt(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(a.d)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?S(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ie(t),r=ne.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=ne.EMPTY_NODE.updateChild(this.indexPath_,re);return new Nt(k,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(jt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?S(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=ie(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(jt)),ce="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",le=(oe=0,ae=[],function(t){var e,n=t===oe;oe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ce.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ce.charAt(ae[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),he=function(t){if("2147483647"===t)return"-";var e=R(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=ce.charAt(ce.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return E;var e=R(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ce.charAt(ce.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function de(t){return{type:"value",snapshotNode:t}}function pe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ge(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(ge(e,s)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(pe(e,n)):a.trackChildChange(me(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Qt,function(t,r){e.hasChild(t)||n.trackChildChange(ge(t,r))}),e.isLeafNode()||e.forEachChild(Qt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(pe(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ne.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ne.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ne.EMPTY_NODE);var i=this;return e.forEachChild(Qt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ye=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=ne.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ne.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ne.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ne.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,ne.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Nt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ge(e,f));var g=u.updateImmediateChild(e,ne.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(pe(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(ge(l.name,l.node)),i.trackChildChange(pe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ne.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:E},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Qt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function _e(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ce(t,e){var n=t.copy();return n.index_=e,n}function Ie(t){var e,n={};return t.isDefault()||(t.index_===Qt?e="$priority":t.index_===ue?e="$value":t.index_===Mt?e="$key":(Object(o.f)(t.index_ instanceof se,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.K)(e),t.startSet_&&(n.startAt=Object(o.K)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.K)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.K)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.K)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Te(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Qt&&(e.i=t.index_.toString()),e}var Ee=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=_("p:rest:"),i.listens_={},i}return Object(a.d)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ie(t._queryParams);this.restRequest_(s+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(o.H)(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ie(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.G)(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.E)(u.responseText)}catch(e){I("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&I("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()})},e}(st),ke=function(){function t(){this.rootNode_=ne.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Se(){return{value:null,children:new Map}}function xe(t,e,n){if(yt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,Se()),xe(t.children.get(r),e=pt(e),n)}}function Pe(t,e){if(yt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Qt,function(e,n){xe(t,new lt(e),n)}),Pe(t,e)}if(t.children.size>0){var r=ft(e);return e=pt(e),t.children.has(r)&&Pe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ae(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ae(r,new lt(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(a.a)({},t);return this.last_&&j(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Re,Le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(yt(this.path)){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.f)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Fe=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(yt(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.f)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(yt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Be=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Ke(t,e,n,r,i,a){var s=r.filter(function(t){return t.type===n});s.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.g)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),i=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),s.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function ze(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return ze(new qe(e,n,r),t.serverCache)}function He(t,e,n,r){return ze(t.eventCache,new qe(e,n,r))}function Je(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Re||(Re=new Vt(x)),e=Re),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return j(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(yt(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:bt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(yt(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(yt(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(yt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(yt(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(yt(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(yt(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(yt(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Qe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Xe(t,e,n){if(yt(e))return new Qe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=wt(i,e);return o=o.updateChild(a,n),new Qe(t.writeTree_.set(i,o))}var s=new Ye(n),u=t.writeTree_.setTree(e,s);return new Qe(u)}function $e(t,e,n){var r=t;return j(n,function(t,n){r=Xe(r,bt(e,t),n)}),r}function Ze(t,e){if(yt(e))return Qe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Qe(n)}function tn(t,e){return null!=en(t,e)}function en(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function nn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Qt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function rn(t,e){if(yt(e))return t;var n=en(t,e);return new Qe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function on(t){return t.writeTree_.isEmpty()}function an(t,e){return sn(ht(),t.writeTree_,e)}function sn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=sn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function un(t,e){return yn(e,t)}function cn(t,e){if(t.snap)return Ct(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ct(bt(t.path,n),e))return!0;return!1}function ln(t){return t.visible}function hn(t,e,n){for(var r=Qe.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)Ct(n,s)?r=Xe(r,u=wt(n,s),a.snap):Ct(s,n)&&(u=wt(s,n),r=Xe(r,ht(),a.snap.getChild(u)));else{if(!a.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(Ct(n,s))r=$e(r,u=wt(n,s),a.children);else if(Ct(s,n))if(yt(u=wt(s,n)))r=$e(r,ht(),a.children);else{var c=Object(o.H)(a.children,ft(u));if(c){var l=c.getChild(pt(u));r=Xe(r,ht(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=rn(t.visibleWrites,e);return!i&&on(o)?n:i||null!=n||tn(o,ht())?an(hn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ct(t.path,e)||Ct(e,t.path))},e),n||ne.EMPTY_NODE):null}var a=en(t.visibleWrites,e);if(null!=a)return a;var s=rn(t.visibleWrites,e);return on(s)?n:null!=n||tn(s,ht())?an(s,n||ne.EMPTY_NODE):null}function dn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function pn(t,e){return function(t,e,n){var r=ne.EMPTY_NODE,i=en(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Qt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=rn(t.visibleWrites,e);return n.forEachChild(Qt,function(t,e){var n=an(rn(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),nn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return nn(rn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function gn(t,e,n,r){return function(t,e,n,r,i){Object(o.f)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=bt(e,n);if(tn(t.visibleWrites,a))return null;var s=rn(t.visibleWrites,a);return on(s)?i.getChild(n):an(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e){return en(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=en(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(rn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return yn(bt(t.treePath,e),t.writeTree)}function yn(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ge(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,pe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),_n=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=rn(t.visibleWrites,e),c=en(u,ht());if(null!=c)s=c;else{if(null==n)return[];s=an(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,i,a){var s=e.eventCache;if(null!=mn(r,n))return e;var u=void 0,c=void 0;if(yt(n))if(Object(o.f)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ge(e),h=pn(r,l instanceof ne?l:ne.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=dn(r,Ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=ft(n);if(".priority"===d){Object(o.f)(1===dt(n),"Can't have a priority with additional path components");var p=s.getNode(),g=gn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):s.getNode()}else{var m=pt(n),v=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var b=gn(r,n,s.getNode(),c);v=null!=b?s.getNode().getImmediateChild(d).updateChild(m,b):s.getNode().getImmediateChild(d)}else v=vn(r,d,e.serverCache);u=null!=v?t.filter.updateChild(s.getNode(),d,v,m,i,a):s.getNode()}}return We(e,u,s.isFullyInitialized()||yt(n),t.filter.filtersNodes())}function In(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(yt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ft(n);if(!c.isCompleteForPath(n)&&dt(n)>1)return e;var d=pt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,_n,null)}var g=He(e,u,c.isFullyInitialized()||yt(n),l.filtersNodes());return Cn(t,g,n,i,new On(i,g,o),s)}function Tn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new On(i,e,o);if(yt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=We(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=pt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(yt(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===gt(f)&&g.getChild(vt(f)).isEmpty()?g:g.updateChild(f,r):ne.EMPTY_NODE}s=d.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function En(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Sn(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=yt(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new lt(n),u,i,o,a,s)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new lt(n),h,i,o,a,s)}}),c}var xn,Pn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new ye(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(ne.EMPTY_NODE,s.getNode(),null),l=new qe(u,a.isFullyInitialized(),i.filtersNodes()),h=new qe(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new Be(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function An(t,e){var n=Ge(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!yt(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function jn(t,e,n){var r=[];if(n){Object(o.f)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function Dn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(o.f)(Ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.f)(Je(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=t.viewCache_,u=function(t,e,n,r,i){var a,s,u=new wn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?a=Tn(t,e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!yt(c.path),a=In(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===De.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach(function(r,u){var c=bt(n,r);En(e,ft(c))&&(s=Tn(t,s,c,u,i,o,a))}),r.foreach(function(r,u){var c=bt(n,r);En(e,ft(c))||(s=Tn(t,s,c,u,i,o,a))}),s}(t,e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Sn(t,e,l.path,l.children,r,i,s,u))}else if(n.type===De.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,i,a){var s;if(null!=mn(r,n))return e;var u=new On(r,e,i),c=e.eventCache.getNode(),l=void 0;if(yt(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=dn(r,Ge(e));else{var f=e.serverCache.getNode();Object(o.f)(f instanceof ne,"serverChildren would be complete if leaf node"),h=pn(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=ft(n),p=vn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,pt(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,ne.EMPTY_NODE,pt(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=dn(r,Ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=mn(r,ht()),We(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,a){if(null!=mn(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(yt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return In(t,e,n,u.getNode().getChild(n),i,o,s,a);if(yt(n)){var c=new Ye(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new lt(t),e)}),Sn(t,e,n,c,i,o,s,a)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Sn(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return Cn(t,He(e,o.getNode(),o.isFullyInitialized()||yt(n),o.isFiltered()),n,r,_n,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Je(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(de(Je(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return i=t.processor_,a=u.viewCache,Object(o.f)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.f)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.f)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ke(t,i,"child_removed",e,r,n),Ke(t,i,"child_added",e,r,n),Ke(t,i,"child_moved",o,r,n),Ke(t,i,"child_changed",e,r,n),Ke(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Rn,Ln=function(){return function(){this.views=new Map}}();function Fn(t,e,n,r){var i,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.f)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,e,n,r)}var l=[];try{for(var h=Object(a.h)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Dn(c=f.value,e,n,r))}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var a=dn(n,i?r:null),s=!1;a?s=!0:r instanceof ne?(a=pn(n,r),s=!1):(a=ne.EMPTY_NODE,s=!1);var u=ze(new qe(a,s,!1),new qe(r,i,!1));return new Pn(e,u)}return o}function Un(t){var e,n,r=[];try{for(var i=Object(a.h)(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function qn(t,e){var n,r,i=null;try{for(var o=Object(a.h)(t.views.values()),s=o.next();!s.done;s=o.next())i=i||An(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Bn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Kn(t,e){return null!=Bn(t,e)}function zn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(a.h)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Hn=1,Jn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Qe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Gn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.f)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?tr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=t.allWrites.length-1;i&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&cn(u,r.path)?i=!1:Ct(r.path,u.path)&&(a=!0)),s--}return!!i&&(a?(function(t){t.visibleWrites=hn(t.allWrites,ln,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Ze(t.visibleWrites,r.path):j(r.children,function(e){t.visibleWrites=Ze(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ye(null);return null!=r.snap?i=i.set(ht(),!0):j(r.children,function(t){i=i.set(new lt(t),!0)}),tr(t,new Le(r.path,i,n))}return[]}function Qn(t,e,n){return tr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,s=t.syncPointTree_.get(i),u=[];if(s&&("default"===e._queryIdentifier||Kn(s,e))){var c=function(t,e,n,r){var i,s,u=e._queryIdentifier,c=[],l=[],h=zn(t);if("default"===u)try{for(var f=Object(a.h)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(a.f)(d.value,2),m=g[0];l=l.concat(jn(p=g[1],n,r)),Nn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(v){i={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(jn(p,n,r)),Nn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new(Object(o.f)(xn,"Reference.ts has not been loaded"),xn)(e._repo,e._path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(i,function(t,e){return zn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&zn(e))return[Wn(e)];var r=[];return e&&(r=Un(e)),j(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var m=p[g],v=m.query,b=rr(t,m);t.listenProvider_.startListening(cr(v),ir(t,v),b.hashFn,b.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(cr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(or(e));t.listenProvider_.stopListening(cr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=or(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function $n(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);i=i||qn(e,n),a=a||zn(e)});var s,u=t.syncPointTree_.get(r);u?(a=a||zn(u),i=i||qn(u,ht())):(u=new Ln,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=ne.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=qn(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Kn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=or(e);Object(o.f)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Hn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Qt,function(t,e){r.push(pe(t,e))}),n.isFullyInitialized()&&r.push(de(n.getNode())),Mn(t,r,n.getNode(),e)}(a,n)}(u,e,n,un(t.pendingWriteTree_,r),i,s);if(!c&&!a){var d=Bn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=ir(t,e),a=rr(t,n),s=t.listenProvider_.startListening(cr(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.f)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!yt(t)&&e&&zn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Un(e).map(function(t){return t.query}))),j(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(cr(h),ir(t,h))}return s}(t,e,d))}return f}function Zn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=qn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function tr(t,e){return er(e,t.syncPointTree_,null,un(t.pendingWriteTree_,ht()))}function er(t,e,n,r){if(yt(t.path))return nr(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=qn(i,ht()));var o=[],a=ft(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=bn(r,a);o=o.concat(er(s,u,c,l))}return i&&(o=o.concat(Fn(i,t,r,n))),o}function nr(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=qn(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var a=n?n.getImmediateChild(e):null,s=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(nr(u,i,a,s)))}),i&&(o=o.concat(Fn(i,t,r,n))),o}function rr(t,e){var n=e.query,r=ir(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ne.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=sr(r),o=i.path,a=i.queryId,s=wt(o,e);return ur(t,o,new Fe(Me(a),s))}return[]}(t,n._path,r):function(t,e){return tr(t,new Fe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function ir(t,e){var n=or(e);return t.queryToTagMap.get(n)}function or(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function sr(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.f)(r,"Missing sync point for query tag that we're tracking"),Fn(r,n,un(t.pendingWriteTree_,e),null)}function cr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.f)(Rn,"Reference.ts has not been loaded"),Rn)(t._repo,t._path):t}var lr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),hr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Zn(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?dr(t[".sv"],e,n):"object"==typeof t[".sv"]?pr(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},dr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},pr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},gr=function(t,e,n,r){return vr(e,new hr(n,t),r)},mr=function(t,e,n){return vr(t,new lr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=fr(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Yt(s,ie(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Qt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function yr(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=ft(n);null!==i;){var a=Object(o.H)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,a),i=ft(n=pt(n))}return r}function wr(t){return t.node.value}function _r(t,e){t.node.value=e,Er(t)}function Or(t){return t.node.childCount>0}function Cr(t,e){j(t.node.children,function(n,r){e(new br(n,t,r))})}function Ir(t,e,n,r){n&&!r&&e(t),Cr(t,function(t){Ir(t,e,!0,r)}),n&&r&&e(t)}function Tr(t){return new lt(null===t.parent?t.name:Tr(t.parent)+"/"+t.name)}function Er(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Or(t)}(n),i=Object(o.k)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Er(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Er(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,Sr=/[\[\].#$\u0000-\u001F\u007F]/,xr=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Ar=function(t){return"string"==typeof t&&0!==t.length&&!Sr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},jr=function(t,e,n,r){r&&void 0===e||Dr(Object(o.o)(t,"value"),e,n)},Dr=function(t,e,n){var r=n instanceof lt?new It(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Et(r));if("function"==typeof e)throw new Error(t+"contains a function "+Et(r)+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+Et(r));if("string"==typeof e&&e.length>xr/3&&Object(o.I)(e)>xr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Et(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,a=!1;if(j(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Et(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.I)(e),Tt(t)}(r,e),Dr(t,n,r),u=(s=r).parts_.pop(),s.byteLength_-=Object(o.I)(u),s.parts_.length>0&&(s.byteLength_-=1)}),i&&a)throw new Error(t+' contains ".value" child '+Et(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.o)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];j(e,function(t,e){var r=new lt(t);if(Dr(i,e,bt(n,r)),".priority"===gt(r)&&!Nr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(_t);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&Ct(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},Rr=function(t,e,n){if(!n||void 0!==e){if(T(e))throw new Error(Object(o.o)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error(Object(o.o)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Fr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error(Object(o.o)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error(Object(o.o)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ur=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},qr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Pr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ar(t)}(n))throw new Error(Object(o.o)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Br=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e)+"must be a boolean.")},Kr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){zr(t,n),Jr(t,function(t){return Ot(t,e)})}function Hr(t,e,n){zr(t,n),Jr(t,function(t){return Ct(t,e)||Ct(e,t)})}function Jr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Gr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Gr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();v&&w("event: "+n.toString()),L(r)}}}var Yr="repo_interrupt",Qr=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Se(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function $r(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Zr(t,e,n,r,i){t.dataUpdateCount++;var a=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=Object(o.F)(n,function(t){return ie(t)});s=function(t,e,n,r){var i=ar(t,r);if(i){var o=sr(i),a=o.path,s=o.queryId,u=wt(a,e),c=Ye.fromObject(n);return ur(t,a,new Ue(Me(s),u,c))}return[]}(t.serverSyncTree_,a,u,i)}else{var c=ie(n);s=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=sr(i),a=o.path,s=o.queryId,u=wt(a,e);return ur(t,a,new Ve(Me(s),u,n))}return[]}(t.serverSyncTree_,a,c,i)}else if(r){var l=Object(o.F)(n,function(t){return ie(t)});s=function(t,e,n){var r=Ye.fromObject(n);return tr(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=ie(n);s=Qn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=fi(t,a)),Hr(t.eventQueue_,f,s)}function ti(t,e){ei(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=$r(t),n=Se();Ae(t.onDisconnect_,ht(),function(r,i){var o=gr(r,i,t.serverSyncTree_,e);xe(n,r,o)});var r=[];Ae(n,ht(),function(e,n){r=r.concat(Qn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=Se(),Hr(t.eventQueue_,ht(),r)}(t)}function ei(t,e,n){var r=new lt("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);var o=Qn(t.infoSyncTree_,r,i);Hr(t.eventQueue_,r,o)}function ni(t){return t.nextWriteId_++}function ri(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=$r(t),a=ie(n,r),s=Zn(t.serverSyncTree_,e),u=mr(a,s,o),c=ni(t),l=Gn(t.serverSyncTree_,e,u,c,!0);zr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),function(n,r){var o="ok"===n;o||I("set at "+e+" failed: "+n);var a=Yn(t.serverSyncTree_,c,!o);Hr(t.eventQueue_,e,a),ci(0,i,n,r)});var h=vi(t,e);fi(t,h),Hr(t.eventQueue_,h,[])}function ii(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Pe(t.onDisconnect_,e),ci(0,n,r,i)})}function oi(t,e,n,r){var i=ie(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&xe(t.onDisconnect_,e,i),ci(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function si(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),w.apply(void 0,Object(a.g)([r],Object(a.f)(e)))}function ci(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function li(t,e,n){return Zn(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function hi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||mi(t,e),wr(e)){var n=pi(t,e);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=li(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.f)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,function(r){ui(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},s=0;s<n.length;s++)a(s);for(mi(t,yr(t.transactionQueueTree_,e)),hi(t,t.transactionQueueTree_),Hr(t.eventQueue_,e,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(I("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;fi(t,e)}},s)}(t,Tr(e),n)}else Or(e)&&Cr(e,function(e){hi(t,e)})}function fi(t,e){var n=di(t,e),r=Tr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],a=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=function(s){var u,c=e[s],l=wt(n,c.path),h=!1;if(Object(o.f)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=li(t,c.path,a);c.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){Dr("transaction failed: Data returned ",d,c.path);var p=ie(d);"object"==typeof d&&null!=d&&Object(o.k)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,m=$r(t),v=mr(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=v,c.currentWriteId=ni(t),a.splice(a.indexOf(g),1),i=(i=i.concat(Gn(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Hr(t.eventQueue_,n,i),i=[],h&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete&&r.push("nodata"===u?function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)}:function(){return e[s].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)s(u);for(mi(t,t.transactionQueueTree_),u=0;u<r.length;u++)L(r[u]);hi(t,t.transactionQueueTree_)}}(t,pi(t,n),r),r}function di(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=yr(r,n),n=ft(e=pt(e));return r}function pi(t,e){var n=[];return gi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function gi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Cr(e,function(e){gi(t,e,n)})}function mi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,_r(e,n.length>0?n:void 0)}Cr(e,function(e){mi(t,e)})}function vi(t,e){var n=Tr(di(t,e)),r=yr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Ir(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(o.f)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(o.f)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?_r(e,void 0):n.length=a+1,Hr(t.eventQueue_,Tr(e),i),s=0;s<r.length;s++)L(r[s])}}var yi=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},wi=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(a.h)(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},_i=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.K)(this.snapshot.exportVal())},t}(),Oi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.f)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ii=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return ii(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Ur("OnDisconnect.remove",this._path);var t=new o.a;return oi(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Ur("OnDisconnect.set",this._path),jr("OnDisconnect.set",t,this._path,!1);var e=new o.a;return oi(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Ur("OnDisconnect.setWithPriority",this._path),jr("OnDisconnect.setWithPriority",t,this._path,!1),Rr("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=ie(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&xe(t.onDisconnect_,e,o),ci(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Ur("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.v)(n))return w("onDisconnect().update() called with empty data.  Don't do anything."),void ci(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&j(n,function(n,r){var i=ie(r);xe(t.onDisconnect_,bt(e,n),i)}),ci(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ti=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return yt(this._path)?null:gt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Te(this._queryParams),e=A(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Te(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.p)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ot(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ei(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==E)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==k)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Qt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof se||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Si(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xi=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(a.d)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ti),Pi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new lt(e),r=ji(this.ref,e);return new t(this._node.getChild(n),r,Qt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,ji(n.ref,r),Qt))})},t.prototype.hasChild=function(t){var e=new lt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ai(t,e){return(t=Object(o.p)(t))._checkNotDeleted("ref"),void 0!==e?ji(t._root,e):t._root}function Ni(t,e){(t=Object(o.p)(t))._checkNotDeleted("refFromURL");var n=yi(e,t._repo.repoInfo_.nodeAdmin);qr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ai(t,n.path.toString())}function ji(t,e){var n;return null===ft((t=Object(o.p)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new xi(t._repo,bt(t._path,e))}function Di(t,e){t=Object(o.p)(t),Ur("push",t._path),jr("push",e,t._path,!0);var n,r=Xr(t._repo),i=le(r),a=ji(t,i),s=ji(t,i);return n=null!=e?Ri(s,e).then(function(){return s}):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Mi(t){return Ur("remove",t._path),Ri(t,null)}function Ri(t,e){t=Object(o.p)(t),Ur("set",t._path),jr("set",e,t._path,!1);var n=new o.a;return ri(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e){t=Object(o.p)(t),Ur("setPriority",t._path),Rr("setPriority",e,!1);var n=new o.a;return ri(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e,n){if(Ur("setWithPriority",t._path),jr("setWithPriority",e,t._path,!1),Rr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return ri(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var i=!0,a=$r(t),s={};if(j(n,function(n,r){i=!1,s[n]=gr(bt(e,n),ie(r),t.serverSyncTree_,a)}),i)w("update() called with empty data.  Don't do anything."),ci(0,r,"ok",void 0);else{var u=ni(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.f)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=$e(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ye.fromObject(n);return tr(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,u);zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||I("update at "+e+" failed: "+n);var a=Yn(t.serverSyncTree_,u,!o),s=a.length>0?fi(t,e):e;Hr(t.eventQueue_,s,a),ci(0,r,n,i)}),j(n,function(n){var r=vi(t,bt(e,n));fi(t,r)}),Hr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Ui=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new _i("value",this,new Pi(t.snapshotNode,new xi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),qi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=ji(new xi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new _i(t.type,this,new Pi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Bi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){a(e,n),ai(t._repo,t,c)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Ci(n,o||void 0),c="value"===e?new Ui(u):new qi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?$n(t.infoSyncTree_,e,n):$n(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function Ki(t,e,n,r){return Bi(t,"value",e,n,r)}function zi(t,e,n,r){return Bi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Bi(t,"child_changed",e,n,r)}function Hi(t,e,n,r){return Bi(t,"child_moved",e,n,r)}function Ji(t,e,n,r){return Bi(t,"child_removed",e,n,r)}function Gi(t,e,n){var r=null,i=n?new Ci(n):null;"value"===e?r=new Ui(i):e&&(r=new qi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.d)(e,t),e.prototype._apply=function(t){jr("endAt",this._value,t._path,!0);var e=Oe(t._queryParams,this._value,this._key);if(Si(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Xi(t,e){return Fr("endAt","key",e,!0),new Qi(t,e)}var $i=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.d)(e,t),e.prototype._apply=function(t){jr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Oe(e,n,r)):i=Oe(e,n,null==r?E:fe(r)),i.endBeforeSet_=!0,i);if(Si(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function Zi(t,e){return Fr("endBefore","key",e,!0),new $i(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.d)(e,t),e.prototype._apply=function(t){jr("startAt",this._value,t._path,!0);var e=_e(t._queryParams,this._value,this._key);if(Si(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function eo(t,e){return void 0===t&&(t=null),Fr("startAt","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.d)(e,t),e.prototype._apply=function(t){jr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=he(n)),i=_e(e,n,r)):i=_e(e,n,null==r?k:he(r)),i.startAfterSet_=!0,i);if(Si(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function ro(t,e){return Fr("startAfter","key",e,!0),new no(t,e)}var io=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function oo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new io(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(a.d)(e,t),e.prototype._apply=function(t){Ei(t,"orderByChild");var e=new lt(this._path);if(yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new se(e),r=Ce(t._queryParams,n);return ki(r),new Ti(t._repo,t._path,r,!0)},e}(Yi);function co(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new uo(t)}var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype._apply=function(t){Ei(t,"orderByKey");var e=Ce(t._queryParams,Mt);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function ho(){return new lo}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype._apply=function(t){Ei(t,"orderByPriority");var e=Ce(t._queryParams,Qt);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.d)(e,t),e.prototype._apply=function(t){Ei(t,"orderByValue");var e=Ce(t._queryParams,ue);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new go}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.d)(e,t),e.prototype._apply=function(t){if(jr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qi(this._value,this._key)._apply(new to(this._value,this._key)._apply(t))},e}(Yi);function bo(t,e){return Fr("equalTo","key",e,!0),new vo(t,e)}function yo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Object(o.p)(t);try{for(var u=Object(a.h)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}!function(t){Object(o.f)(!xn,"__referenceConstructor has already been defined"),xn=t}(xi),function(t){Object(o.f)(!Rn,"__referenceConstructor has already been defined"),Rn=t}(xi);var wo={},_o=!1;function Oo(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=yi(i,r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,s=(a=yi(i="http://"+u+"?ns="+s.namespace,r)).repoInfo):o=!a.repoInfo.secure;var c=r&&o?new U:new V(t.name,t.options,e);qr("Invalid Firebase Database URL",a),yt(a.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n){var r=wo[e.name];r||(wo[e.name]=r={});var i=r[t.toURLString()];return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Qr(t,_o,n),r[t.toURLString()]=i,i}(s,t,c);return new Co(l,t)}var Co=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Y(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ee(t.repoInfo_,function(e,n,r,i){Zr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ti(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.K)(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new At(t.repoInfo_,e,function(e,n,r,i){Zr(t,e,n,r,i)},function(e){ti(t,e)},function(e){!function(t,e){j(e,function(e,n){ei(t,e,n)})}(t,e)},t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(r=function(){return new je(t.stats_,t.server_)},i=t.repoInfo_.toString(),G[i]||(G[i]=r()),G[i]),t.infoData_=new ke,t.infoSyncTree_=new Jn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Qn(t.infoSyncTree_,e._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ei(t,"connected",!1),t.serverSyncTree_=new Jn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Hr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new xi(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),si(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function Io(t){(t=Object(o.p)(t))._checkNotDeleted("goOffline"),si(t._repo)}function To(t){var e;(t=Object(o.p)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}function Eo(t,e){y(t,e)}var ko={".sv":"timestamp"},So=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(o.p)(t),Ur("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new o.a,s=Ki(t,function(){});return function(e,n,r,i,s,u){ui(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?a.reject(e):(i=new Pi(r,new xi(t._repo,t._path),Qt),a.resolve(new So(n,i)))},status:null,order:p(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=li(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Dr("transaction failed: Data returned ",h,c.path),c.status=0;var f=yr(e.transactionQueueTree_,n),d=wr(f)||[];d.push(c),_r(f,d);var g=void 0;"object"==typeof h&&null!==h&&Object(o.k)(h,".priority")?(g=Object(o.H)(h,".priority"),Object(o.f)(Nr(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Zn(e.serverSyncTree_,n)||ne.EMPTY_NODE).getPriority().val();var m=$r(e),v=ie(h,g),b=mr(v,l,m);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=b,c.currentWriteId=ni(e);var y=Gn(e.serverSyncTree_,n,b,c.currentWriteId,c.applyLocally);Hr(e.eventQueue_,n,y),hi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,s,i),a.promise}var Po=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.L)("OnDisconnect.cancel",0,1,arguments.length),Object(o.M)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(o.L)("OnDisconnect.remove",0,1,arguments.length),Object(o.M)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(o.L)("OnDisconnect.set",1,2,arguments.length),Object(o.M)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(o.L)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.M)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(o.L)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.M)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.L)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.L)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.L)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.L)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.L)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.L)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.L)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.L)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.L)("DataSnapshot.forEach",1,1,arguments.length),Object(o.M)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(o.L)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.L)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.L)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),jo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;Object(o.L)("Query.on",2,4,arguments.length),Object(o.M)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new No(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Ki(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return Ji(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Hi(this._delegate,c,l),n;default:throw new Error(Object(o.o)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.L)("Query.off",0,3,arguments.length),Lr("Query.off",t,!0),Object(o.M)("Query.off","callback",e,!0),Object(o.N)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Gi(this._delegate,t,r)}else Gi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||qn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||qn(i,ht()):(i=new Ln,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new qe(r,!0,!1):null;return Je(Vn(i,e,un(t.pendingWriteTree_,e._path),o?a.getNode():ne.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=ie(n),i=Qn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(o.K)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(o.p)(t))._repo,t).then(function(e){return new Pi(e,new xi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,i){var a=this;Object(o.L)("Query.once",1,4,arguments.length),Object(o.M)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new No(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ji(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Hi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.o)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.L)("Query.limitToFirst",1,1,arguments.length),new t(this.database,yo(this._delegate,oo(e)))},t.prototype.limitToLast=function(e){return Object(o.L)("Query.limitToLast",1,1,arguments.length),new t(this.database,yo(this._delegate,so(e)))},t.prototype.orderByChild=function(e){return Object(o.L)("Query.orderByChild",1,1,arguments.length),new t(this.database,yo(this._delegate,co(e)))},t.prototype.orderByKey=function(){return Object(o.L)("Query.orderByKey",0,0,arguments.length),new t(this.database,yo(this._delegate,ho()))},t.prototype.orderByPriority=function(){return Object(o.L)("Query.orderByPriority",0,0,arguments.length),new t(this.database,yo(this._delegate,po()))},t.prototype.orderByValue=function(){return Object(o.L)("Query.orderByValue",0,0,arguments.length),new t(this.database,yo(this._delegate,mo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.startAt",0,2,arguments.length),new t(this.database,yo(this._delegate,eo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.startAfter",0,2,arguments.length),new t(this.database,yo(this._delegate,ro(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.endAt",0,2,arguments.length),new t(this.database,yo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.endBefore",0,2,arguments.length),new t(this.database,yo(this._delegate,Zi(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.L)("Query.equalTo",1,2,arguments.length),new t(this.database,yo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(o.L)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.L)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.L)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.M)(t,"cancel",r.cancel,!0),r.context=n,Object(o.N)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Do(this.database,new xi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Do=function(t){function e(e,n){var r=t.call(this,e,new Ti(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(a.d)(e,t),e.prototype.getKey=function(){return Object(o.L)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.L)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,ji(this._delegate,t))},e.prototype.getParent=function(){Object(o.L)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.L)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.L)("Reference.set",1,2,arguments.length),Object(o.M)("Reference.set","onComplete",e,!0);var n=Ri(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(o.L)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("Reference.update",this._delegate._path),Object(o.M)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){Object(o.L)("Reference.setWithPriority",2,3,arguments.length),Object(o.M)("Reference.setWithPriority","onComplete",n,!0);var r=Fi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(o.L)("Reference.remove",0,1,arguments.length),Object(o.M)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.L)("Reference.transaction",1,3,arguments.length),Object(o.M)("Reference.transaction","transactionUpdate",t,!1),Object(o.M)("Reference.transaction","onComplete",e,!0),Br("Reference.transaction","applyLocally",n,!0);var i=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new Ao(t.committed,new No(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){Object(o.L)("Reference.setPriority",1,2,arguments.length),Object(o.M)("Reference.setPriority","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(o.L)("Reference.push",0,2,arguments.length),Object(o.M)("Reference.push","onComplete",n,!0);var i=Di(this._delegate,t),a=i.then(function(t){return new e(r.database,t)});n&&a.then(function(){return n(null)},function(t){return n(t)});var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return Ur("Reference.onDisconnect",this._delegate._path),new Po(new Ii(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(jo),Mo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Object(o.p)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new U)}(t._repoInternal,e,n)}(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.L)("database.ref",0,1,arguments.length),t instanceof Do){var e=Ni(this._delegate,t.toString());return new Do(this,e)}return e=Ai(this._delegate,t),new Do(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.L)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new Do(this,n)},t.prototype.goOffline=function(){return Object(o.L)("database.goOffline",0,0,arguments.length),Io(this._delegate)},t.prototype.goOnline=function(){return Object(o.L)("database.goOnline",0,0,arguments.length),To(this._delegate)},t.ServerValue={TIMESTAMP:ko,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Ro=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),Z.forceAllow()},forceWebSockets:function(){Z.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);j(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:new Mo(Oo(e,u,n,s),e),namespace:o}}}),Lo=At;At.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},At.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:at,hijackHash:function(t){var e=At.prototype.put;return At.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){At.prototype.put=e}},ConnectionTarget:z,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){_o=t}(t)}}),Vo=Mo.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Mo(Oo(r,i,n),r)},"PUBLIC").setServiceProps({Reference:Do,Query:jo,Database:Mo,DataSnapshot:No,enableLogging:Eo,INTERNAL:Ro,ServerValue:Vo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.12"),Object(o.A)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"91Rb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,r;(0,i.default)(t),"object"===o(e)?(n=e.min||0,r=e.max):(n=arguments[1],r=arguments[2]);var a=encodeURI(t).split(/%..|./).length-1;return a>=n&&(void 0===r||a<=r)};var r,i=(r=n("2Idn"))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default,t.exports.default=e.default},DOXw:function(t){t.exports=JSON.parse('[{"name":"Entradas Frias","menu":[{"name":"Tostada de at\xfan","price":98,"image":"background-5","description":""},{"name":"Ceviche tatemado de pescado","price":128,"image":"background-5","description":""},{"name":"Aguachile verde o negro de camar\xf3n","price":135,"image":"background-5","description":""},{"name":"Carpaccio de Res","price":184,"image":"background-5","description":""},{"name":"Carpaccio de Res","price":195,"image":"background-5","description":""}]},{"name":"Entradas Calientes","menu":[{"name":"Empanada de queso","price":56,"image":"background-5","description":""},{"name":"Empanada de carne estilo argentino","price":59,"image":"background-5","description":""},{"name":"Taco de camar\xf3n rosarito","price":68,"image":"background-5","description":""},{"name":"Sopa de tortilla","price":79,"image":"sopa-de-tortilla","description":""},{"name":"Crema de Zanahoria rostizada","price":86,"image":"background-5","description":""},{"name":"Cazuela de hongos y Setas","price":96,"image":"background-5","description":""}]},{"name":"Ensaladas","menu":[{"name":"Ensalada de peras al vino tinto","price":88,"image":"background-5","description":""},{"name":"Ensalada de durazno rostizado","price":134,"image":"background-5","description":""}]},{"name":"Pasta","menu":[{"name":"Fetuccini cuatro quesos","price":118,"image":"background-5","description":""},{"name":"Pasta de pistache con camarones","price":184,"image":"background-5","description":""},{"name":"Lasagna de carne","price":249,"image":"background-5","description":""}]},{"name":"Fuertes","menu":[{"name":"Pechuga de pollo provenzal con verduras rostizadas","price":168,"image":"background-5","description":""},{"name":"Salm\xf3n a la parrilla con verduras rostizadas","price":248,"image":"background-5","description":""},{"name":"Pulpo a la parrilla","price":285,"image":"pulpo-a-la-parrilla","description":""},{"name":"Camarones a la parrilla estilo talla","price":340,"image":"background-5","description":""}]},{"name":"Nuestros Cortes","menu":[{"name":"Arrachera 250 grs","price":238,"image":"background-5","description":""},{"name":"Pica\xf1a 300 grs","price":277,"image":"background-5","description":""},{"name":"Rib Eye 400 grs","price":398,"image":"background-5","description":""}]},{"name":"Para Terminar","menu":[{"name":"Panna cotta con frutos rojos","price":72,"image":"background-5","description":""},{"name":"Crujiente de manzana al horno ba\xf1ado en dulce de leche","price":94,"image":"background-5","description":""},{"name":"Sensaci\xf3n de avellanas con helado","price":102,"image":"background-5","description":""},{"name":"Brownie de chocolate con cremoso de Baileys","price":108,"image":"background-5","description":""}]}]')},DdlK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,r;(0,i.default)(t),"object"===o(e)?(n=e.min||0,r=e.max):(n=arguments[1]||0,r=arguments[2]);var a=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],s=t.length-a.length;return s>=n&&(void 0===r||s<=r)};var r,i=(r=n("2Idn"))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default,t.exports.default=e.default},Lfcm:function(t){t.exports=JSON.parse('[{"name":"FRUTAS Y CEREALES","menu":[{"name":"Fruta de temporada","price":62,"image":"background-5","description":""},{"name":"Avena con manzana, nuez y frutos secos","price":96,"image":"background-5","description":""}]},{"name":"BOLLER\xcdA & M\xc1S","menu":[{"name":"Pan de la casa reci\xe9n horneado","price":16,"image":"background-5","description":""},{"name":"Pancakes con fruta de temporada","price":98,"image":"pancakes-con-fruta-de-temporada","description":""}]},{"name":"HUEVO & OMELETTE","menu":[{"name":"Huevos revueltos al gusto","price":98,"image":"background-5","description":"con jam\xf3n | con chorizo | a la mexicana"},{"name":"Omelette de huevo fresco acompa\xf1ado de ensalada","price":119,"image":"omelette-de-champi\xf1ones","description":""},{"name":"Huevos rancheros en salsa verde o roja de molcajete","price":119,"image":"huevos-rancheros","description":""}]},{"name":"CAPRICHOS MEXICANOS","menu":[{"name":"Chilaquiles con pollo asado o huevo","price":115,"image":"background-5","description":""},{"name":"Enchiladas con pollo asado o huevo con queso blanco","price":115,"image":"background-5","description":""},{"name":"Enchiladas suizas","price":119,"image":"background-5","description":""},{"name":"Enfrijoladas de huevo o pollo con chorizo y aguacate","price":121,"image":"background-5","description":""},{"name":"Tlacoyos mineros","price":118,"image":"background-5","description":""},{"name":"Nopales asados con queso panela","price":96,"image":"background-5","description":""}]},{"name":"NUESTROS JUGOS","menu":[{"name":"Naranja","price":28,"image":"background-5","description":""},{"name":"Toronja","price":34,"image":"background-5","description":""},{"name":"Fresa y Naranja","price":46,"image":"jugo-naranja-fresa","description":""},{"name":"Mango, Berry y Naranja","price":52,"image":"jugo-mango-blue-berrie","description":""},{"name":"Pi\xf1a, Apio, Nopal y Ch\xeda.","price":46,"image":"background-5","description":""}]},{"name":"LICUADOS","menu":[{"name":"Fresa, chocolate o vainilla","price":52,"image":"background-5","description":""},{"name":"Leche, Mango y Cardamomo","price":58,"image":"background-5","description":""},{"name":"Leche, mascarpone y brownie","price":68,"image":"background-5","description":""},{"name":"Leche de coco y frutos rojos","price":72,"image":"background-5","description":""}]},{"name":"CAF\xc9 Y T\xc9","menu":[{"name":"Espresso","price":25,"image":"background-5","description":""},{"name":"Americano","price":28,"image":"background-5","description":""},{"name":"Capuccino","price":34,"image":"background-5","description":""},{"name":"Latte","price":39,"image":"background-5","description":""},{"name":"Mocha","price":49,"image":"background-5","description":""},{"name":"Mocha Blanco","price":51,"image":"background-5","description":""},{"name":"Matcha","price":42,"image":"background-5","description":""},{"name":"Matcha Latte","price":48,"image":"background-5","description":""},{"name":"T\xe9 Herbal","price":32,"image":"background-5","description":""},{"name":"Tisana Frutal","price":42,"image":"background-5","description":""},{"name":"T\xe9 Chai","price":39,"image":"background-5","description":""}]},{"name":"SMOOTHIES","menu":[{"name":"Mango","price":45,"image":"background-5","description":""},{"name":"Fresa","price":45,"image":"background-5","description":""},{"name":"Maracuya","price":48,"image":"background-5","description":""},{"name":"Frutos Rojos","price":45,"image":"background-5","description":""}]},{"name":"EXTRAS","menu":[{"name":"CONVIERTE TU PLATILLO EN PAQUETE","price":85,"image":"background-5","description":"Incluye jugo o fruta caf\xe9 o t\xe9 1 pza de pan"}]}]')},PSD3:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t,e,n){return(u=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var h="SweetAlert2:",f=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},d=function(t){return Object.keys(t).map(function(e){return t[e]})},p=function(t){return Array.prototype.slice.call(t)},g=function(e){console.warn("".concat(h," ").concat("object"===t(e)?e.join(" "):e))},m=function(t){console.error("".concat(h," ").concat(t))},v=[],b=function(t,e){var n;n='"'.concat(t,'" is deprecated and will be removed in the next major release. Please use "').concat(e,'" instead.'),-1===v.indexOf(n)&&(v.push(n),g(n))},y=function(t){return"function"==typeof t?t():t},w=function(t){return t&&"function"==typeof t.toPromise},_=function(t){return w(t)?t.toPromise():Promise.resolve(t)},O=function(t){return t&&Promise.resolve(t)===t},C=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),I=function(e){return e instanceof Element||function(e){return"object"===t(e)&&e.jquery}(e)},T=function(t){var e={};for(var n in t)e[t[n]]="swal2-"+t[n];return e},E=T(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","header","content","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),k=T(["success","warning","info","question","error"]),S=function(){return document.body.querySelector(".".concat(E.container))},x=function(t){var e=S();return e?e.querySelector(t):null},P=function(t){return x(".".concat(t))},A=function(){return P(E.popup)},N=function(){return P(E.icon)},j=function(){return P(E.title)},D=function(){return P(E.content)},M=function(){return P(E["html-container"])},R=function(){return P(E.image)},L=function(){return P(E["progress-steps"])},F=function(){return P(E["validation-message"])},V=function(){return x(".".concat(E.actions," .").concat(E.confirm))},U=function(){return x(".".concat(E.actions," .").concat(E.deny))},q=function(){return x(".".concat(E.loader))},B=function(){return x(".".concat(E.actions," .").concat(E.cancel))},K=function(){return P(E.actions)},z=function(){return P(E.header)},W=function(){return P(E.footer)},H=function(){return P(E["timer-progress-bar"])},J=function(){return P(E.close)},G=function(){var t=p(A().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(function(t,e){return(t=parseInt(t.getAttribute("tabindex")))>(e=parseInt(e.getAttribute("tabindex")))?1:t<e?-1:0}),e=p(A().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(function(t){return"-1"!==t.getAttribute("tabindex")});return function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(t.concat(e)).filter(function(t){return dt(t)})},Y=function(){return!Q()&&!document.body.classList.contains(E["no-backdrop"])},Q=function(){return document.body.classList.contains(E["toast-shown"])},X={previousBodyPadding:null},$=function(t,e){if(t.textContent="",e){var n=(new DOMParser).parseFromString(e,"text/html");p(n.querySelector("head").childNodes).forEach(function(e){t.appendChild(e)}),p(n.querySelector("body").childNodes).forEach(function(e){t.appendChild(e)})}},Z=function(t,e){if(!e)return!1;for(var n=e.split(/\s+/),r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},tt=function(e,n,r){if(function(t,e){p(t.classList).forEach(function(n){-1===d(E).indexOf(n)&&-1===d(k).indexOf(n)&&-1===d(e.showClass).indexOf(n)&&t.classList.remove(n)})}(e,n),n.customClass&&n.customClass[r]){if("string"!=typeof n.customClass[r]&&!n.customClass[r].forEach)return g("Invalid type of customClass.".concat(r,'! Expected string or iterable object, got "').concat(t(n.customClass[r]),'"'));ot(e,n.customClass[r])}};function et(t,e){if(!e)return null;switch(e){case"select":case"textarea":case"file":return st(t,E[e]);case"checkbox":return t.querySelector(".".concat(E.checkbox," input"));case"radio":return t.querySelector(".".concat(E.radio," input:checked"))||t.querySelector(".".concat(E.radio," input:first-child"));case"range":return t.querySelector(".".concat(E.range," input"));default:return st(t,E.input)}}var nt,rt=function(t){if(t.focus(),"file"!==t.type){var e=t.value;t.value="",t.value=e}},it=function(t,e,n){t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(function(e){t.forEach?t.forEach(function(t){n?t.classList.add(e):t.classList.remove(e)}):n?t.classList.add(e):t.classList.remove(e)}))},ot=function(t,e){it(t,e,!0)},at=function(t,e){it(t,e,!1)},st=function(t,e){for(var n=0;n<t.childNodes.length;n++)if(Z(t.childNodes[n],e))return t.childNodes[n]},ut=function(t,e,n){n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)},ct=function(t){t.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},lt=function(t){t.style.display="none"},ht=function(t,e,n,r){var i=t.querySelector(e);i&&(i.style[n]=r)},ft=function(t,e,n){e?ct(t,n):lt(t)},dt=function(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))},pt=function(t){return!!(t.scrollHeight>t.clientHeight)},gt=function(t){var e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},mt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=H();dt(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(function(){n.style.transition="width ".concat(t/1e3,"s linear"),n.style.width="0%"},10))},vt=function(){return"undefined"==typeof window||"undefined"==typeof document},bt='\n <div aria-labelledby="'.concat(E.title,'" aria-describedby="').concat(E.content,'" class="').concat(E.popup,'" tabindex="-1">\n   <div class="').concat(E.header,'">\n     <ul class="').concat(E["progress-steps"],'"></ul>\n     <div class="').concat(E.icon,'"></div>\n     <img class="').concat(E.image,'" />\n     <h2 class="').concat(E.title,'" id="').concat(E.title,'"></h2>\n     <button type="button" class="').concat(E.close,'"></button>\n   </div>\n   <div class="').concat(E.content,'">\n     <div id="').concat(E.content,'" class="').concat(E["html-container"],'"></div>\n     <input class="').concat(E.input,'" />\n     <input type="file" class="').concat(E.file,'" />\n     <div class="').concat(E.range,'">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="').concat(E.select,'"></select>\n     <div class="').concat(E.radio,'"></div>\n     <label for="').concat(E.checkbox,'" class="').concat(E.checkbox,'">\n       <input type="checkbox" />\n       <span class="').concat(E.label,'"></span>\n     </label>\n     <textarea class="').concat(E.textarea,'"></textarea>\n     <div class="').concat(E["validation-message"],'" id="').concat(E["validation-message"],'"></div>\n   </div>\n   <div class="').concat(E.actions,'">\n     <div class="').concat(E.loader,'"></div>\n     <button type="button" class="').concat(E.confirm,'"></button>\n     <button type="button" class="').concat(E.deny,'"></button>\n     <button type="button" class="').concat(E.cancel,'"></button>\n   </div>\n   <div class="').concat(E.footer,'"></div>\n   <div class="').concat(E["timer-progress-bar-container"],'">\n     <div class="').concat(E["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),yt=function(t){sn.isVisible()&&nt!==t.target.value&&sn.resetValidationMessage(),nt=t.target.value},wt=function(e,n){e instanceof HTMLElement?n.appendChild(e):"object"===t(e)?_t(e,n):e&&$(n,e)},_t=function(t,e){t.jquery?Ot(e,t):$(e,t.toString())},Ot=function(t,e){if(t.textContent="",0 in e)for(var n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},Ct=function(){if(vt())return!1;var t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1}();function It(t,e,n){ft(t,n["show".concat(f(e),"Button")],"inline-block"),$(t,n["".concat(e,"ButtonText")]),t.setAttribute("aria-label",n["".concat(e,"ButtonAriaLabel")]),t.className=E[e],tt(t,n,"".concat(e,"Button")),ot(t,n["".concat(e,"ButtonClass")])}var Tt={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap},Et=["input","file","range","select","radio","checkbox","textarea"],kt=function(t,e){t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},St=function(t,e,n){if(n.inputLabel){t.id=E.input;var r=document.createElement("label"),i=E["input-label"];r.setAttribute("for",t.id),r.className=i,ot(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},xt=function(t){var e=E[t]?E[t]:E.input;return st(D(),e)},Pt={};Pt.text=Pt.email=Pt.password=Pt.number=Pt.tel=Pt.url=function(e,n){return"string"==typeof n.inputValue||"number"==typeof n.inputValue?e.value=n.inputValue:O(n.inputValue)||g('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(t(n.inputValue),'"')),St(e,e,n),kt(e,n),e.type=n.input,e},Pt.file=function(t,e){return St(t,t,e),kt(t,e),t},Pt.range=function(t,e){var n=t.querySelector("input"),r=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,r.value=e.inputValue,St(n,t,e),t},Pt.select=function(t,e){if(t.textContent="",e.inputPlaceholder){var n=document.createElement("option");$(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return St(t,t,e),t},Pt.radio=function(t){return t.textContent="",t},Pt.checkbox=function(t,e){var n=et(D(),"checkbox");n.value=1,n.id=E.checkbox,n.checked=Boolean(e.inputValue);var r=t.querySelector("span");return $(r,e.inputPlaceholder),t},Pt.textarea=function(t,e){t.value=e.inputValue,kt(t,e),St(t,t,e);var n=function(t){return parseInt(window.getComputedStyle(t).paddingLeft)+parseInt(window.getComputedStyle(t).paddingRight)};if("MutationObserver"in window){var r=parseInt(window.getComputedStyle(A()).width);new MutationObserver(function(){var e=t.offsetWidth+n(A())+n(D());A().style.width=e>r?"".concat(e,"px"):null}).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};var At=function(t,e){var n=M();tt(n,e,"htmlContainer"),e.html?(wt(e.html,n),ct(n,"block")):e.text?(n.textContent=e.text,ct(n,"block")):lt(n),function(t,e){var n=D(),r=Tt.innerParams.get(t),i=!r||e.input!==r.input;Et.forEach(function(t){var r=E[t],o=st(n,r);(function(t,e){var n=et(D(),t);if(n)for(var r in function(t){for(var e=0;e<t.attributes.length;e++){var n=t.attributes[e].name;-1===["type","value","style"].indexOf(n)&&t.removeAttribute(n)}}(n),e)"range"===t&&"placeholder"===r||n.setAttribute(r,e[r])})(t,e.inputAttributes),o.className=r,i&&lt(o)}),e.input&&(i&&function(t){if(!Pt[t.input])return m('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));var e=xt(t.input),n=Pt[t.input](e,t);ct(n),setTimeout(function(){rt(n)})}(e),function(t){var e=xt(t.input);t.customClass&&ot(e,t.customClass.input)}(e))}(t,e),tt(D(),e,"content")},Nt=function(t,e){for(var n in k)e.icon!==n&&at(t,k[n]);ot(t,k[e.icon]),Mt(t,e),jt(),tt(t,e,"icon")},jt=function(){for(var t=A(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),r=0;r<n.length;r++)n[r].style.backgroundColor=e},Dt=function(t,e){t.textContent="",$(t,e.iconHtml?Rt(e.iconHtml):"success"===e.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===e.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':Rt({question:"?",warning:"!",info:"i"}[e.icon]))},Mt=function(t,e){if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(var n=0,r=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];n<r.length;n++)ht(t,r[n],"backgroundColor",e.iconColor);ht(t,".swal2-success-ring","borderColor",e.iconColor)}},Rt=function(t){return'<div class="'.concat(E["icon-content"],'">').concat(t,"</div>")},Lt=[],Ft=function(){return S()&&S().getAttribute("data-queue-step")},Vt=function(t,e){var n=z();tt(n,e,"header"),function(t,e){var n=L();if(!e.progressSteps||0===e.progressSteps.length)return lt(n);ct(n),n.textContent="";var r=parseInt(void 0===e.currentProgressStep?Ft():e.currentProgressStep);r>=e.progressSteps.length&&g("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(function(t,i){var o=function(t){var e=document.createElement("li");return ot(e,E["progress-step"]),$(e,t),e}(t);if(n.appendChild(o),i===r&&ot(o,E["active-progress-step"]),i!==e.progressSteps.length-1){var a=function(t){var e=document.createElement("li");return ot(e,E["progress-step-line"]),t.progressStepsDistance&&(e.style.width=t.progressStepsDistance),e}(e);n.appendChild(a)}})}(0,e),function(t,e){var n=Tt.innerParams.get(t),r=N();n&&e.icon===n.icon?(Dt(r,e),Nt(r,e)):e.icon||e.iconHtml?e.icon&&-1===Object.keys(k).indexOf(e.icon)?(m('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"')),lt(r)):(ct(r),Dt(r,e),Nt(r,e),ot(r,e.showClass.icon)):lt(r)}(t,e),function(t,e){var n=R();if(!e.imageUrl)return lt(n);ct(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),ut(n,"width",e.imageWidth),ut(n,"height",e.imageHeight),n.className=E.image,tt(n,e,"image")}(0,e),function(t,e){var n=j();ft(n,e.title||e.titleText,"block"),e.title&&wt(e.title,n),e.titleText&&(n.innerText=e.titleText),tt(n,e,"title")}(0,e),function(t,e){var n=J();$(n,e.closeButtonHtml),tt(n,e,"closeButton"),ft(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)}(0,e)},Ut=function(t,e){(function(t,e){var n=S(),r=A();e.toast?(ut(n,"width",e.width),r.style.width="100%"):ut(r,"width",e.width),ut(r,"padding",e.padding),e.background&&(r.style.background=e.background),lt(F()),function(t,e){t.className="".concat(E.popup," ").concat(dt(t)?e.showClass.popup:""),e.toast?(ot([document.documentElement,document.body],E["toast-shown"]),ot(t,E.toast)):ot(t,E.modal),tt(t,e,"popup"),"string"==typeof e.customClass&&ot(t,e.customClass),e.icon&&ot(t,E["icon-".concat(e.icon)])}(r,e)})(0,e),function(t,e){var n=S();if(n){(function(t,e){"string"==typeof e?t.style.background=e:e||ot([document.documentElement,document.body],E["no-backdrop"])})(n,e.backdrop),!e.backdrop&&e.allowOutsideClick&&g('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(t,e){e in E?ot(t,E[e]):(g('The "position" parameter is not valid, defaulting to "center"'),ot(t,E.center))}(n,e.position),function(t,e){if(e&&"string"==typeof e){var n="grow-".concat(e);n in E&&ot(t,E[n])}}(n,e.grow),tt(n,e,"container");var r=document.body.getAttribute("data-swal2-queue-step");r&&(n.setAttribute("data-queue-step",r),document.body.removeAttribute("data-swal2-queue-step"))}}(0,e),Vt(t,e),At(t,e),function(t,e){var n=K(),r=q(),i=V(),o=U(),a=B();e.showConfirmButton||e.showDenyButton||e.showCancelButton||lt(n),tt(n,e,"actions"),It(i,"confirm",e),It(o,"deny",e),It(a,"cancel",e),function(t,e,n,r){if(!r.buttonsStyling)return at([t,e,n],E.styled);ot([t,e,n],E.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor)}(i,o,a,e),e.reverseButtons&&(n.insertBefore(a,r),n.insertBefore(o,r),n.insertBefore(i,r)),$(r,e.loaderHtml),tt(r,e,"loader")}(0,e),function(t,e){var n=W();ft(n,e.footer),e.footer&&wt(e.footer,n),tt(n,e,"footer")}(0,e),"function"==typeof e.didRender?e.didRender(A()):"function"==typeof e.onRender&&e.onRender(A())},qt=function(){return V()&&V().click()},Bt=function(t){var e=A();e||sn.fire(),e=A();var n=K(),r=q();!t&&dt(V())&&(t=V()),ct(n),t&&(lt(t),r.setAttribute("data-button-to-replace",t.className)),r.parentNode.insertBefore(r,t),ot([e,n],E.loading),ct(r),e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},Kt={},zt=function(){if(Kt.timeout)return function(){var t=H(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";var n=parseInt(window.getComputedStyle(t).width),r=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(r,"%")}(),Kt.timeout.stop()},Wt=function(){if(Kt.timeout){var t=Kt.timeout.start();return mt(t),t}},Ht=!1,Jt={},Gt=function(t){for(var e=t.target;e&&e!==document;e=e.parentNode)for(var n in Jt){var r=e.getAttribute(n);if(r)return void Jt[n].fire({template:r})}},Yt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,onBeforeOpen:void 0,onOpen:void 0,willOpen:void 0,didOpen:void 0,onRender:void 0,didRender:void 0,onClose:void 0,onAfterClose:void 0,willClose:void 0,didClose:void 0,onDestroy:void 0,didDestroy:void 0,scrollbarPadding:!0},Qt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","onAfterClose","onClose","onDestroy","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Xt={animation:'showClass" and "hideClass',onBeforeOpen:"willOpen",onOpen:"didOpen",onRender:"didRender",onClose:"willClose",onAfterClose:"didClose",onDestroy:"didDestroy"},$t=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Zt=function(t){return Object.prototype.hasOwnProperty.call(Yt,t)},te=function(t){return Xt[t]},ee=function(t){Zt(t)||g('Unknown parameter "'.concat(t,'"'))},ne=function(t){-1!==$t.indexOf(t)&&g('The parameter "'.concat(t,'" is incompatible with toasts'))},re=function(t){te(t)&&b(t,te(t))},ie=function(t){for(var e in t)ee(e),t.toast&&ne(e),re(e)},oe=Object.freeze({isValidParameter:Zt,isUpdatableParameter:function(t){return-1!==Qt.indexOf(t)},isDeprecatedParameter:te,argsToParams:function(e){var n={};return"object"!==t(e[0])||I(e[0])?["title","html","icon"].forEach(function(r,i){var o=e[i];"string"==typeof o||I(o)?n[r]=o:void 0!==o&&m("Unexpected type of ".concat(r,'! Expected "string" or "Element", got ').concat(t(o)))}):i(n,e[0]),n},isVisible:function(){return dt(A())},clickConfirm:qt,clickDeny:function(){return U()&&U().click()},clickCancel:function(){return B()&&B().click()},getContainer:S,getPopup:A,getTitle:j,getContent:D,getHtmlContainer:M,getImage:R,getIcon:N,getInputLabel:function(){return P(E["input-label"])},getCloseButton:J,getActions:K,getConfirmButton:V,getDenyButton:U,getCancelButton:B,getLoader:q,getHeader:z,getFooter:W,getTimerProgressBar:H,getFocusableElements:G,getValidationMessage:F,isLoading:function(){return A().hasAttribute("data-loading")},fire:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return u(t,n)},mixin:function(t){return function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(d,n);var u,h,f=(u=d,h=s(),function(){var t,e=o(u);if(h){var n=o(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function d(){return e(this,d),f.apply(this,arguments)}return r(d,[{key:"_main",value:function(e,n){return l(o(d.prototype),"_main",this).call(this,e,i({},t,n))}}]),d}(this)},queue:function(t){b("Swal.queue()","async/await");var e=this;Lt=t;var n=function(t,e){Lt=[],t(e)},r=[];return new Promise(function(t){!function i(o,a){o<Lt.length?(document.body.setAttribute("data-swal2-queue-step",o),e.fire(Lt[o]).then(function(e){void 0!==e.value?(r.push(e.value),i(o+1,a)):n(t,{dismiss:e.dismiss})})):n(t,{value:r})}(0)})},getQueueStep:Ft,insertQueueStep:function(t,e){return e&&e<Lt.length?Lt.splice(e,0,t):Lt.push(t)},deleteQueueStep:function(t){void 0!==Lt[t]&&Lt.splice(t,1)},showLoading:Bt,enableLoading:Bt,getTimerLeft:function(){return Kt.timeout&&Kt.timeout.getTimerLeft()},stopTimer:zt,resumeTimer:Wt,toggleTimer:function(){var t=Kt.timeout;return t&&(t.running?zt():Wt())},increaseTimer:function(t){if(Kt.timeout){var e=Kt.timeout.increase(t);return mt(e,!0),e}},isTimerRunning:function(){return Kt.timeout&&Kt.timeout.isRunning()},bindClickHandler:function(){Jt[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Ht||(document.body.addEventListener("click",Gt),Ht=!0)}});function ae(){if(Tt.innerParams.get(this)){var t=Tt.domCache.get(this);lt(t.loader);var e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?ct(e[0],"inline-block"):!dt(V())&&!dt(U())&&!dt(B())&&lt(t.actions),at([t.popup,t.actions],E.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}}var se=function(t){var e=t.target,n=S();return!(ue(t)||ce(t)||e!==n&&(pt(n)||"INPUT"===e.tagName||pt(D())&&D().contains(e)))},ue=function(t){return t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType},ce=function(t){return t.touches&&t.touches.length>1},le=function(){return!!window.MSInputMethodContext&&!!document.documentMode},he=function(){var t=S(),e=A();t.style.removeProperty("align-items"),e.offsetTop<0&&(t.style.alignItems="flex-start")},fe={swalPromiseResolve:new WeakMap};function de(t,e,n,r){Q()?ye(t,r):(function(t){return new Promise(function(e){if(!t)return e();var n=window.scrollX,r=window.scrollY;Kt.restoreFocusTimeout=setTimeout(function(){Kt.previousActiveElement&&Kt.previousActiveElement.focus?(Kt.previousActiveElement.focus(),Kt.previousActiveElement=null):document.body&&document.body.focus(),e()},100),void 0!==n&&void 0!==r&&window.scrollTo(n,r)})}(n).then(function(){return ye(t,r)}),Kt.keydownTarget.removeEventListener("keydown",Kt.keydownHandler,{capture:Kt.keydownListenerCapture}),Kt.keydownHandlerAdded=!1),e.parentNode&&!document.body.getAttribute("data-swal2-queue-step")&&e.parentNode.removeChild(e),Y()&&(null!==X.previousBodyPadding&&(document.body.style.paddingRight="".concat(X.previousBodyPadding,"px"),X.previousBodyPadding=null),function(){if(Z(document.body,E.iosfix)){var t=parseInt(document.body.style.top,10);at(document.body,E.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}}(),"undefined"!=typeof window&&le()&&window.removeEventListener("resize",he),p(document.body.children).forEach(function(t){t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})),at([document.documentElement,document.body],[E.shown,E["height-auto"],E["no-backdrop"],E["toast-shown"]])}function pe(t){var e=A();if(e){t=ge(t);var n=Tt.innerParams.get(this);if(n&&!Z(e,n.hideClass.popup)){var r=fe.swalPromiseResolve.get(this);at(e,n.showClass.popup),ot(e,n.hideClass.popup);var i=S();at(i,n.showClass.backdrop),ot(i,n.hideClass.backdrop),me(this,e,n),r(t)}}}var ge=function(t){return void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:i({isConfirmed:!1,isDenied:!1,isDismissed:!1},t)},me=function(t,e,n){var r=S(),i=Ct&&gt(e),o=n.onAfterClose,a=n.didClose;ve(e,n.willClose,n.onClose),i?be(t,e,r,n.returnFocus,a||o):de(t,r,n.returnFocus,a||o)},ve=function(t,e,n){null!==e&&"function"==typeof e?e(t):null!==n&&"function"==typeof n&&n(t)},be=function(t,e,n,r,i){Kt.swalCloseEventFinishedCallback=de.bind(null,t,n,r,i),e.addEventListener(Ct,function(t){t.target===e&&(Kt.swalCloseEventFinishedCallback(),delete Kt.swalCloseEventFinishedCallback)})},ye=function(t,e){setTimeout(function(){"function"==typeof e&&e(),t._destroy()})};function we(t,e,n){var r=Tt.domCache.get(t);e.forEach(function(t){r[t].disabled=n})}function _e(t,e){if(!t)return!1;if("radio"===t.type)for(var n=t.parentNode.parentNode.querySelectorAll("input"),r=0;r<n.length;r++)n[r].disabled=e;else t.disabled=e}var Oe=function(){function t(n,r){e(this,t),this.callback=n,this.remaining=r,this.running=!1,this.start()}return r(t,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}},{key:"increase",value:function(t){var e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),t}(),Ce={email:function(t,e){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address")},url:function(t,e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")}};function Ie(t){(function(t){t.inputValidator||Object.keys(Ce).forEach(function(e){t.input===e&&(t.inputValidator=Ce[e])})})(t),t.showLoaderOnConfirm&&!t.preConfirm&&g("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),t.animation=y(t.animation),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(g('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),function(t){var e,n,r,i,o,a,s,u,c,l,h=!!(e=S())&&(e.parentNode.removeChild(e),at([document.documentElement,document.body],[E["no-backdrop"],E["toast-shown"],E["has-column"]]),!0);if(vt())m("SweetAlert2 requires document to initialize");else{var f=document.createElement("div");f.className=E.container,h&&ot(f,E["no-transition"]),$(f,bt);var d="string"==typeof(l=t.target)?document.querySelector(l):l;d.appendChild(f),function(t){var e=A();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")}(t),function(t){"rtl"===window.getComputedStyle(t).direction&&ot(S(),E.rtl)}(d),n=D(),r=st(n,E.input),i=st(n,E.file),o=n.querySelector(".".concat(E.range," input")),a=n.querySelector(".".concat(E.range," output")),s=st(n,E.select),u=n.querySelector(".".concat(E.checkbox," input")),c=st(n,E.textarea),r.oninput=yt,i.onchange=yt,s.onchange=yt,u.onchange=yt,c.oninput=yt,o.oninput=function(t){yt(t),a.value=o.value},o.onchange=function(t){yt(t),o.nextSibling.value=o.value}}}(t)}var Te,Ee=["swal-title","swal-html","swal-footer"],ke=function(t,e){p(t.attributes).forEach(function(n){-1===e.indexOf(n.name)&&g(['Unrecognized attribute "'.concat(n.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(e.length?"Allowed attributes are: ".concat(e.join(", ")):"To set the value, use HTML within the element.")])})},Se=function(t,e){"function"==typeof e.didOpen?setTimeout(function(){return e.didOpen(t)}):"function"==typeof e.onOpen&&setTimeout(function(){return e.onOpen(t)})},xe=function t(e){var n=A();if(e.target===n){var r=S();n.removeEventListener(Ct,t),r.style.overflowY="auto"}},Pe=function(t,e){Ct&&gt(e)?(t.style.overflowY="hidden",e.addEventListener(Ct,xe)):t.style.overflowY="auto"},Ae=function(t,e,n){(function(){if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Z(document.body,E.iosfix)){var t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),ot(document.body,E.iosfix),function(){var t,e=S();e.ontouchstart=function(e){t=se(e)},e.ontouchmove=function(e){t&&(e.preventDefault(),e.stopPropagation())}}(),navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)||A().scrollHeight>window.innerHeight-44&&(S().style.paddingBottom="".concat(44,"px"))}})(),"undefined"!=typeof window&&le()&&(he(),window.addEventListener("resize",he)),e&&"hidden"!==n&&(null===X.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(X.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(X.previousBodyPadding+function(){var t=document.createElement("div");t.className=E["scrollbar-measure"],document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}(),"px"))),setTimeout(function(){t.scrollTop=0})},Ne=function(t,e,n){ot(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),ct(e),setTimeout(function(){ot(e,n.showClass.popup),e.style.removeProperty("opacity")},10),ot([document.documentElement,document.body],E.shown),n.heightAuto&&n.backdrop&&!n.toast&&ot([document.documentElement,document.body],E["height-auto"])},je={select:function(t,e,n){var r=st(t,E.select),i=function(t,e,r){var i=document.createElement("option");i.value=r,$(i,e),i.selected=Me(r,n.inputValue),t.appendChild(i)};e.forEach(function(t){var e=t[0],n=t[1];if(Array.isArray(n)){var o=document.createElement("optgroup");o.label=e,o.disabled=!1,r.appendChild(o),n.forEach(function(t){return i(o,t[1],t[0])})}else i(r,n,e)}),r.focus()},radio:function(t,e,n){var r=st(t,E.radio);e.forEach(function(t){var e=t[0],i=t[1],o=document.createElement("input"),a=document.createElement("label");o.type="radio",o.name=E.radio,o.value=e,Me(e,n.inputValue)&&(o.checked=!0);var s=document.createElement("span");$(s,i),s.className=E.label,a.appendChild(o),a.appendChild(s),r.appendChild(a)});var i=r.querySelectorAll("input");i.length&&i[0].focus()}},De=function e(n){var r=[];return"undefined"!=typeof Map&&n instanceof Map?n.forEach(function(n,i){var o=n;"object"===t(o)&&(o=e(o)),r.push([i,o])}):Object.keys(n).forEach(function(i){var o=n[i];"object"===t(o)&&(o=e(o)),r.push([i,o])}),r},Me=function(t,e){return e&&e.toString()===t.toString()},Re=function(t,e,n){var r=function(t,e){var n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return function(t){return t.checked?1:0}(n);case"radio":return function(t){return t.checked?t.value:null}(n);case"file":return function(t){return t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null}(n);default:return e.inputAutoTrim?n.value.trim():n.value}}(t,e);e.inputValidator?Le(t,e,r):t.getInput().checkValidity()?"deny"===n?Fe(t,e,r):Ue(t,e,r):(t.enableButtons(),t.showValidationMessage(e.validationMessage))},Le=function(t,e,n){t.disableInput(),Promise.resolve().then(function(){return _(e.inputValidator(n,e.validationMessage))}).then(function(r){t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):Ue(t,e,n)})},Fe=function(t,e,n){e.showLoaderOnDeny&&Bt(U()),e.preDeny?Promise.resolve().then(function(){return _(e.preDeny(n,e.validationMessage))}).then(function(e){!1===e?t.hideLoading():t.closePopup({isDenied:!0,value:void 0===e?n:e})}):t.closePopup({isDenied:!0,value:n})},Ve=function(t,e){t.closePopup({isConfirmed:!0,value:e})},Ue=function(t,e,n){e.showLoaderOnConfirm&&Bt(),e.preConfirm?(t.resetValidationMessage(),Promise.resolve().then(function(){return _(e.preConfirm(n,e.validationMessage))}).then(function(e){dt(F())||!1===e?t.hideLoading():Ve(t,void 0===e?n:e)})):Ve(t,n)},qe=function(t,e,n){var r=G();if(r.length)return(e+=n)===r.length?e=0:-1===e&&(e=r.length-1),r[e].focus();A().focus()},Be=["ArrowRight","ArrowDown","Right","Down"],Ke=["ArrowLeft","ArrowUp","Left","Up"],ze=["Escape","Esc"],We=function(t,e,n){if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(-1!==["textarea","file"].indexOf(n.input))return;qt(),e.preventDefault()}},He=function(t,e){for(var n=t.target,r=G(),i=-1,o=0;o<r.length;o++)if(n===r[o]){i=o;break}qe(0,i,t.shiftKey?-1:1),t.stopPropagation(),t.preventDefault()},Je=function(t){if(-1!==[V(),U(),B()].indexOf(document.activeElement)){var e=-1!==Be.indexOf(t)?"nextElementSibling":"previousElementSibling",n=document.activeElement[e];n&&n.focus()}},Ge=function(t,e,n){y(e.allowEscapeKey)&&(t.preventDefault(),n(C.esc))},Ye=!1,Qe=function(e,n){var r=function(e){var n="string"==typeof e.template?document.querySelector(e.template):e.template;if(!n)return{};var r=n.content||n;return function(t){var e=Ee.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);p(t.querySelectorAll("*")).forEach(function(n){if(n.parentNode===t){var r=n.tagName.toLowerCase();-1===e.indexOf(r)&&g("Unrecognized element <".concat(r,">"))}})}(r),i(function(e){var n={};return p(e.querySelectorAll("swal-param")).forEach(function(e){ke(e,["name","value"]);var r=e.getAttribute("name"),i=e.getAttribute("value");"boolean"==typeof Yt[r]&&"false"===i&&(i=!1),"object"===t(Yt[r])&&(i=JSON.parse(i)),n[r]=i}),n}(r),function(t){var e={};return p(t.querySelectorAll("swal-button")).forEach(function(t){ke(t,["type","color","aria-label"]);var n=t.getAttribute("type");e["".concat(n,"ButtonText")]=t.innerHTML,e["show".concat(f(n),"Button")]=!0,t.hasAttribute("color")&&(e["".concat(n,"ButtonColor")]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e["".concat(n,"ButtonAriaLabel")]=t.getAttribute("aria-label"))}),e}(r),function(t){var e={},n=t.querySelector("swal-image");return n&&(ke(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e}(r),function(t){var e={},n=t.querySelector("swal-icon");return n&&(ke(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e}(r),function(t){var e={},n=t.querySelector("swal-input");n&&(ke(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));var r=t.querySelectorAll("swal-input-option");return r.length&&(e.inputOptions={},p(r).forEach(function(t){ke(t,["value"]);var n=t.getAttribute("value");e.inputOptions[n]=t.innerHTML})),e}(r),function(t,e){var n={};for(var r in e){var i=e[r],o=t.querySelector(i);o&&(ke(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n}(r,Ee))}(e),o=i({},Yt,n,r,e);return o.showClass=i({},Yt.showClass,o.showClass),o.hideClass=i({},Yt.hideClass,o.hideClass),!1===e.animation&&(o.showClass={popup:"swal2-noanimation",backdrop:"swal2-noanimation"},o.hideClass={}),o},Xe=function(e,n,r){return new Promise(function(i){var o=function(t){e.closePopup({isDismissed:!0,dismiss:t})};fe.swalPromiseResolve.set(e,i),n.confirmButton.onclick=function(){return function(t,e){t.disableButtons(),e.input?Re(t,e,"confirm"):Ue(t,e,!0)}(e,r)},n.denyButton.onclick=function(){return function(t,e){t.disableButtons(),e.returnInputValueOnDeny?Re(t,e,"deny"):Fe(t,e,!1)}(e,r)},n.cancelButton.onclick=function(){return function(t,e){t.disableButtons(),e(C.cancel)}(e,o)},n.closeButton.onclick=function(){return o(C.close)},function(t,e,n){Tt.innerParams.get(t).toast?function(t,e,n){e.popup.onclick=function(){var e=Tt.innerParams.get(t);e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton||e.timer||e.input||n(C.close)}}(t,e,n):(function(t){t.popup.onmousedown=function(){t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(Ye=!0)}}}(e),function(t){t.container.onmousedown=function(){t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(Ye=!0)}}}(e),function(t,e,n){e.container.onclick=function(r){var i=Tt.innerParams.get(t);Ye?Ye=!1:r.target===e.container&&y(i.allowOutsideClick)&&n(C.backdrop)}}(t,e,n))}(e,n,o),function(t,e,n,r){e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=function(e){return function(t,e,n){var r=Tt.innerParams.get(t);r&&(r.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?We(t,e,r):"Tab"===e.key?He(e,r):-1!==[].concat(Be,Ke).indexOf(e.key)?Je(e.key):-1!==ze.indexOf(e.key)&&Ge(e,r,n))}(t,e,r)},e.keydownTarget=n.keydownListenerCapture?window:A(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)}(e,Kt,r,o),function(e,n){"select"===n.input||"radio"===n.input?function(e,n){var r=D(),i=function(t){return je[n.input](r,De(t),n)};w(n.inputOptions)||O(n.inputOptions)?(Bt(V()),_(n.inputOptions).then(function(t){e.hideLoading(),i(t)})):"object"===t(n.inputOptions)?i(n.inputOptions):m("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(t(n.inputOptions)))}(e,n):-1!==["text","email","number","tel","textarea"].indexOf(n.input)&&(w(n.inputValue)||O(n.inputValue))&&function(t,e){var n=t.getInput();lt(n),_(e.inputValue).then(function(r){n.value="number"===e.input?parseFloat(r)||0:"".concat(r),ct(n),n.focus(),t.hideLoading()}).catch(function(e){m("Error in inputValue promise: ".concat(e)),n.value="",ct(n),n.focus(),t.hideLoading()})}(e,n)}(e,r),function(t){var e=S(),n=A();"function"==typeof t.willOpen?t.willOpen(n):"function"==typeof t.onBeforeOpen&&t.onBeforeOpen(n);var r=window.getComputedStyle(document.body).overflowY;Ne(e,n,t),setTimeout(function(){Pe(e,n)},10),Y()&&(Ae(e,t.scrollbarPadding,r),p(document.body.children).forEach(function(t){t===S()||function(t,e){if("function"==typeof t.contains)return t.contains(e)}(t,S())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),Q()||Kt.previousActiveElement||(Kt.previousActiveElement=document.activeElement),Se(n,t),at(e,E["no-transition"])}(r),Ze(Kt,r,o),tn(n,r),setTimeout(function(){n.container.scrollTop=0})})},$e=function(t){var e={popup:A(),container:S(),content:D(),actions:K(),confirmButton:V(),denyButton:U(),cancelButton:B(),loader:q(),closeButton:J(),validationMessage:F(),progressSteps:L()};return Tt.domCache.set(t,e),e},Ze=function(t,e,n){var r=H();lt(r),e.timer&&(t.timeout=new Oe(function(){n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(ct(r),setTimeout(function(){t.timeout&&t.timeout.running&&mt(e.timer)})))},tn=function(t,e){if(!e.toast)return y(e.allowEnterKey)?void(en(t,e)||qe(0,-1,1)):nn()},en=function(t,e){return e.focusDeny&&dt(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&dt(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!dt(t.confirmButton)||(t.confirmButton.focus(),0))},nn=function(){document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()},rn=function(t){for(var e in t)t[e]=new WeakMap},on=Object.freeze({hideLoading:ae,disableLoading:ae,getInput:function(t){var e=Tt.innerParams.get(t||this),n=Tt.domCache.get(t||this);return n?et(n.content,e.input):null},close:pe,closePopup:pe,closeModal:pe,closeToast:pe,enableButtons:function(){we(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){we(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return _e(this.getInput(),!1)},disableInput:function(){return _e(this.getInput(),!0)},showValidationMessage:function(t){var e=Tt.domCache.get(this),n=Tt.innerParams.get(this);$(e.validationMessage,t),e.validationMessage.className=E["validation-message"],n.customClass&&n.customClass.validationMessage&&ot(e.validationMessage,n.customClass.validationMessage),ct(e.validationMessage);var r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedBy",E["validation-message"]),rt(r),ot(r,E.inputerror))},resetValidationMessage:function(){var t=Tt.domCache.get(this);t.validationMessage&&lt(t.validationMessage);var e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),at(e,E.inputerror))},getProgressSteps:function(){return Tt.domCache.get(this).progressSteps},_main:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ie(i({},e,t)),Kt.currentInstance&&Kt.currentInstance._destroy(),Kt.currentInstance=this;var n=Qe(t,e);Ie(n),Object.freeze(n),Kt.timeout&&(Kt.timeout.stop(),delete Kt.timeout),clearTimeout(Kt.restoreFocusTimeout);var r=$e(this);return Ut(this,n),Tt.innerParams.set(this,n),Xe(this,r,n)},update:function(t){var e=A(),n=Tt.innerParams.get(this);if(!e||Z(e,n.hideClass.popup))return g("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");var r={};Object.keys(t).forEach(function(e){sn.isUpdatableParameter(e)?r[e]=t[e]:g('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});var o=i({},n,r);Ut(this,o),Tt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:i({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){var t=Tt.domCache.get(this),e=Tt.innerParams.get(this);e&&(t.popup&&Kt.swalCloseEventFinishedCallback&&(Kt.swalCloseEventFinishedCallback(),delete Kt.swalCloseEventFinishedCallback),Kt.deferDisposalTimer&&(clearTimeout(Kt.deferDisposalTimer),delete Kt.deferDisposalTimer),function(t){"function"==typeof t.didDestroy?t.didDestroy():"function"==typeof t.onDestroy&&t.onDestroy()}(e),delete this.params,delete Kt.keydownHandler,delete Kt.keydownTarget,rn(Tt),rn(fe))}}),an=function(){function t(){if(e(this,t),"undefined"!=typeof window){"undefined"==typeof Promise&&m("This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)"),Te=this;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Object.freeze(this.constructor.argsToParams(r));Object.defineProperties(this,{params:{value:o,writable:!1,enumerable:!0,configurable:!0}});var a=this._main(this.params);Tt.promise.set(this,a)}}return r(t,[{key:"then",value:function(t){return Tt.promise.get(this).then(t)}},{key:"finally",value:function(t){return Tt.promise.get(this).finally(t)}}]),t}();i(an.prototype,on),i(an,oe),Object.keys(on).forEach(function(t){an[t]=function(){var e;if(Te)return(e=Te)[t].apply(e,arguments)}}),an.DismissReason=C,an.version="10.16.7";var sn=an;return sn.default=sn,sn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{flex-direction:column;align-items:stretch;width:auto;padding:1.25em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{flex-direction:row;padding:0}.swal2-popup.swal2-toast .swal2-title{flex-grow:1;justify-content:flex-start;margin:0 .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{justify-content:flex-start;margin:0 .625em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container{padding:.625em 0 0}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex:1;flex-basis:auto!important;align-self:stretch;width:auto;height:2.2em;height:auto;margin:0 .3125em;margin-top:.3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.125em .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;flex-direction:row;align-items:center;justify-content:center;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{align-items:flex-start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{align-items:flex-start;justify-content:flex-end}.swal2-container.swal2-center{align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{align-items:center;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{align-items:center;justify-content:flex-end}.swal2-container.swal2-bottom{align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{align-items:flex-end;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{align-items:flex-end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:flex!important;flex:1;align-self:stretch;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-grow-column{flex:1;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-no-transition{transition:none!important}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:flex;flex-direction:column;align-items:center;padding:0 1.8em}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#2778c4;color:#fff;font-size:1em}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#d14529;color:#fff;font-size:1em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#757575;color:#fff;font-size:1em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;align-items:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;transition:color .1s ease-out;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;justify-content:center;margin:0;padding:0 1.6em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto}.swal2-validation-message{align-items:center;justify-content:center;margin:0 -2.7em;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},dgmN:function(t,e,n){"use strict";n.r(e),n.d(e,"PagesModule",function(){return K_});var r=n("ofXK"),i=n("tk/3"),o=n("tyNb"),a=n("fXoL");class s{constructor(t){this.groups=[],this.each=!1,this.context=void 0,this.type=t.type,this.target=t.target,this.propertyName=t.propertyName,this.constraints=t.constraints,this.constraintCls=t.constraintCls,this.validationTypeOptions=t.validationTypeOptions,t.validationOptions&&(this.message=t.validationOptions.message,this.groups=t.validationOptions.groups,this.always=t.validationOptions.always,this.each=t.validationOptions.each,this.context=t.validationOptions.context)}}class u{transform(t){const e=[];return Object.keys(t.properties).forEach(n=>{t.properties[n].forEach(r=>{e.push(new s({type:r.type,target:t.name,propertyName:n,constraints:r.constraints,validationTypeOptions:r.options,validationOptions:{message:r.message,groups:r.groups,always:r.always,each:r.each}}))})}),e}}function c(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}class l{constructor(){this.validationMetadatas=[],this.constraintMetadatas=[]}get hasValidationMetaData(){return!!this.validationMetadatas.length}addValidationSchema(t){(new u).transform(t).forEach(t=>this.addValidationMetadata(t))}addValidationMetadata(t){this.validationMetadatas.push(t)}addConstraintMetadata(t){this.constraintMetadatas.push(t)}groupByPropertyName(t){const e={};return t.forEach(t=>{e[t.propertyName]||(e[t.propertyName]=[]),e[t.propertyName].push(t)}),e}getTargetValidationMetadatas(t,e,n,r,i){const o=t=>void 0!==t.always?t.always:(!t.groups||!t.groups.length)&&n,a=t=>!(!r||i&&i.length||!t.groups||!t.groups.length),s=this.validationMetadatas.filter(n=>(n.target===t||n.target===e)&&(!!o(n)||!a(n)&&(!(i&&i.length>0)||n.groups&&!!n.groups.find(t=>-1!==i.indexOf(t))))),u=this.validationMetadatas.filter(e=>"string"!=typeof e.target&&e.target!==t&&(!(e.target instanceof Function)||t.prototype instanceof e.target)&&(!!o(e)||!a(e)&&(!(i&&i.length>0)||e.groups&&!!e.groups.find(t=>-1!==i.indexOf(t))))).filter(t=>!s.find(e=>e.propertyName===t.propertyName&&e.type===t.type));return s.concat(u)}getTargetValidatorConstraints(t){return this.constraintMetadatas.filter(e=>e.target===t)}}function h(){const t=c();return t.classValidatorMetadataStorage||(t.classValidatorMetadataStorage=new l),t.classValidatorMetadataStorage}class f{toString(t=!1,e=!1,n=""){const r=t?"\x1b[1m":"",i=t?"\x1b[22m":"",o=t=>` - property ${r}${n}${t}${i} has failed the following constraints: ${r}${Object.keys(this.constraints).join(", ")}${i} \n`;if(e){const e=Number.isInteger(+this.property)?`[${this.property}]`:`${n?".":""}${this.property}`;return this.constraints?o(e):this.children?this.children.map(r=>r.toString(t,!0,`${n}${e}`)).join(""):""}return`An instance of ${r}${this.target?this.target.constructor.name:"an object"}${i} has failed the validation:\n`+(this.constraints?o(this.property):"")+(this.children?this.children.map(e=>e.toString(t,!0,this.property)).join(""):"")}}let d=(()=>{class t{static isValid(t){return"isValid"!==t&&"getMessage"!==t&&-1!==Object.keys(this).map(t=>this[t]).indexOf(t)}}return t.CUSTOM_VALIDATION="customValidation",t.NESTED_VALIDATION="nestedValidation",t.PROMISE_VALIDATION="promiseValidation",t.CONDITIONAL_VALIDATION="conditionalValidation",t.WHITELIST="whitelistValidation",t.IS_DEFINED="isDefined",t})();function p(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}class g{constructor(t,e){this.validator=t,this.validatorOptions=e,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=h()}execute(t,e,n){var r;this.metadataStorage.hasValidationMetaData||!0!==(null===(r=this.validatorOptions)||void 0===r?void 0:r.enableDebugMessages)||console.warn("No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.");const i=this.metadataStorage.getTargetValidationMetadatas(t.constructor,e,this.validatorOptions&&this.validatorOptions.always||!1,this.validatorOptions&&this.validatorOptions.strictGroups||!1,this.validatorOptions?this.validatorOptions.groups:void 0),o=this.metadataStorage.groupByPropertyName(i);if(this.validatorOptions&&this.validatorOptions.forbidUnknownValues&&!i.length){const e=new f;return this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.target&&!0!==this.validatorOptions.validationError.target||(e.target=t),e.value=void 0,e.property=void 0,e.children=[],e.constraints={unknownValue:"an unknown value was passed to the validate function"},void n.push(e)}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(t,o,n),Object.keys(o).forEach(e=>{const r=t[e],i=o[e].filter(t=>t.type===d.IS_DEFINED),a=o[e].filter(t=>t.type!==d.IS_DEFINED&&t.type!==d.WHITELIST);r instanceof Promise&&a.find(t=>t.type===d.PROMISE_VALIDATION)?this.awaitingPromises.push(r.then(r=>{this.performValidations(t,r,e,i,a,n)})):this.performValidations(t,r,e,i,a,n)})}whitelist(t,e,n){const r=[];Object.keys(t).forEach(t=>{e[t]&&0!==e[t].length||r.push(t)}),r.length>0&&r.forEach(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?e=>{const r=this.generateValidationError(t,t[e],e);r.constraints={[d.WHITELIST]:`property ${e} should not exist`},r.children=void 0,n.push(r)}:e=>delete t[e])}stripEmptyErrors(t){return t.filter(t=>{if(t.children&&(t.children=this.stripEmptyErrors(t.children)),0===Object.keys(t.constraints).length){if(0===t.children.length)return!1;delete t.constraints}return!0})}performValidations(t,e,n,r,i,o){const a=i.filter(t=>t.type===d.CUSTOM_VALIDATION),s=i.filter(t=>t.type===d.NESTED_VALIDATION),u=i.filter(t=>t.type===d.CONDITIONAL_VALIDATION),c=this.generateValidationError(t,e,n);o.push(c),this.conditionalValidations(t,e,u)&&(this.customValidations(t,e,r,c),this.mapContexts(t,e,r,c),void 0===e&&this.validatorOptions&&!0===this.validatorOptions.skipUndefinedProperties||null===e&&this.validatorOptions&&!0===this.validatorOptions.skipNullProperties||null==e&&this.validatorOptions&&!0===this.validatorOptions.skipMissingProperties||(this.customValidations(t,e,a,c),this.nestedValidations(e,s,c.children),this.mapContexts(t,e,i,c),this.mapContexts(t,e,a,c)))}generateValidationError(t,e,n){const r=new f;return this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.target&&!0!==this.validatorOptions.validationError.target||(r.target=t),this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.value&&!0!==this.validatorOptions.validationError.value||(r.value=e),r.property=n,r.children=[],r.constraints={},r}conditionalValidations(t,e,n){return n.map(n=>n.constraints[0](t,e)).reduce((t,e)=>t&&e,!0)}customValidations(t,e,n,r){n.forEach(n=>{this.metadataStorage.getTargetValidatorConstraints(n.constraintCls).forEach(i=>{if(i.async&&this.ignoreAsyncValidations)return;if(this.validatorOptions&&this.validatorOptions.stopAtFirstError&&Object.keys(r.constraints||{}).length>0)return;const o={targetName:t.constructor?t.constructor.name:void 0,property:n.propertyName,object:t,value:e,constraints:n.constraints};if(!n.each||!(e instanceof Array||e instanceof Set||e instanceof Map)){const a=i.instance.validate(e,o);if(p(a)){const o=a.then(o=>{if(!o){const[o,a]=this.createValidationError(t,e,n,i);r.constraints[o]=a,n.context&&(r.contexts||(r.contexts={}),r.contexts[o]=Object.assign(r.contexts[o]||{},n.context))}});this.awaitingPromises.push(o)}else if(!a){const[o,a]=this.createValidationError(t,e,n,i);r.constraints[o]=a}return}var a;const s=((a=e)instanceof Map?Array.from(a.values()):Array.isArray(a)?a:Array.from(a)).map(t=>i.instance.validate(t,o));if(s.some(t=>p(t))){const o=s.map(t=>p(t)?t:Promise.resolve(t)),a=Promise.all(o).then(o=>{if(!o.every(t=>t)){const[o,a]=this.createValidationError(t,e,n,i);r.constraints[o]=a,n.context&&(r.contexts||(r.contexts={}),r.contexts[o]=Object.assign(r.contexts[o]||{},n.context))}});this.awaitingPromises.push(a)}else if(!s.every(t=>t)){const[o,a]=this.createValidationError(t,e,n,i);r.constraints[o]=a}})})}nestedValidations(t,e,n){void 0!==t&&e.forEach(r=>{if(r.type===d.NESTED_VALIDATION||r.type===d.PROMISE_VALIDATION)if(t instanceof Array||t instanceof Set||t instanceof Map)(t instanceof Set?Array.from(t):t).forEach((r,i)=>{this.performValidations(t,r,i.toString(),[],e,n)});else if(t instanceof Object)this.execute(t,"string"==typeof r.target?r.target:r.target.name,n);else{const e=new f;e.value=t,e.property=r.propertyName,e.target=r.target;const[i,o]=this.createValidationError(r.target,t,r);e.constraints={[i]:o},n.push(e)}})}mapContexts(t,e,n,r){return n.forEach(t=>{if(t.context){let e;t.type===d.CUSTOM_VALIDATION&&(e=this.metadataStorage.getTargetValidatorConstraints(t.constraintCls)[0]);const n=this.getConstraintType(t,e);r.constraints[n]&&(r.contexts||(r.contexts={}),r.contexts[n]=Object.assign(r.contexts[n]||{},t.context))}})}createValidationError(t,e,n,r){const i=t.constructor?t.constructor.name:void 0,o=this.getConstraintType(n,r),a={targetName:i,property:n.propertyName,object:t,value:e,constraints:n.constraints};let s=n.message||"";return n.message||this.validatorOptions&&(!this.validatorOptions||this.validatorOptions.dismissDefaultMessages)||r&&r.instance.defaultMessage instanceof Function&&(s=r.instance.defaultMessage(a)),[o,class{static replaceMessageSpecialTokens(t,e){let n;return t instanceof Function?n=t(e):"string"==typeof t&&(n=t),n&&e.constraints instanceof Array&&e.constraints.forEach((t,e)=>{n=n.replace(new RegExp("\\$constraint"+(e+1),"g"),function(t){return Array.isArray(t)?t.join(", "):""+t}(t))}),n&&null!=e.value&&"string"==typeof e.value&&(n=n.replace(/\$value/g,e.value)),n&&(n=n.replace(/\$property/g,e.property)),n&&(n=n.replace(/\$target/g,e.targetName)),n}}.replaceMessageSpecialTokens(s,a)]}getConstraintType(t,e){return e&&e.name?e.name:t.type}}class m{validate(t,e,n){return this.coreValidate(t,e,n)}async validateOrReject(t,e,n){const r=await this.coreValidate(t,e,n);if(r.length)return Promise.reject(r)}validateSync(t,e,n){const r="string"==typeof t?e:t,i="string"==typeof t?t:void 0,o=new g(this,"string"==typeof t?n:e);o.ignoreAsyncValidations=!0;const a=[];return o.execute(r,i,a),o.stripEmptyErrors(a)}coreValidate(t,e,n){const r="string"==typeof t?e:t,i="string"==typeof t?t:void 0,o=new g(this,"string"==typeof t?n:e),a=[];return o.execute(r,i,a),Promise.all(o.awaitingPromises).then(()=>o.stripEmptyErrors(a))}}const v=new class{constructor(){this.instances=[]}get(t){let e=this.instances.find(e=>e.type===t);return e||(e={type:t,object:new t},this.instances.push(e)),e.object}};function b(t){return v.get(t)}function y(t,e,n){return"string"==typeof t?b(m).validate(t,e,n):b(m).validate(t,e)}var w=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(Bn){o(Bn)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Qa(i(a.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:y).apply(null,arguments)}function O(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function E(t,e,n){this.code=x+t,this.message=e||P[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new E(e.substring(x.length),t.message,t.serverResponse):null}I(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var S,x="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function j(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function R(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}S=N("__EID__")?"__EID__":void 0,I(D,Error),D.prototype.name="CustomError",I(M,D),M.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L(function(){return new B},function(t){t.reset()});function q(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},J=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=K(t,e)}function Y(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function X(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,at=/\x00/g,st=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===Ct&&e||"",this.b=Ot}function wt(t){return t instanceof yt&&t.constructor===yt&&t.b===Ot?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,Ot={},Ct={};function It(){if(void 0===_t){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(n){a.console&&a.console.error(n.message)}_t=t}else _t=t}return _t}function Tt(t,e){this.a=e===Pt?t:""}function Et(t){return t instanceof Tt&&t.constructor===Tt?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=wt(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Tt(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(St,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?wt(t):encodeURIComponent(String(t))}))}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function At(t,e){this.a=e===Ft?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var jt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){if(t instanceof At)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new At(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&jt.test(e[1])?new At(t,Ft):null}return t}function Lt(t){return t instanceof At?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new At(t,Ft))}var Ft={},Vt=new At("about:invalid#zClosurez",Ft);function Ut(t,e,n){this.a=n===qt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof At?t:Lt(t),e=e||a,n=n instanceof yt?wt(n):n||"",e.open(Nt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=l;var Ht,Jt,Gt=ft("Opera"),Yt=ft("Trident")||ft("MSIE"),Qt=ft("Edge"),Xt=Qt||Yt,$t=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Jt=Z,$t?/rv:([^\);]+)(\)|;)/.exec(Jt):Qt?/Edge\/([\d\.]+)/.exec(Jt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt):Zt?/WebKit\/(\S+)/.exec(Jt):Gt?/(?:Version)[ \/]?(\S+)/.exec(Jt):void 0);if(ne&&(ee=ne?ne[1]:""),Yt){var re=te();if(null!=re&&re>parseFloat(ee)){Ht=String(re);break t}}Ht=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Ht)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ct(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ct(0==a[2].length,0==s[2].length)||ct(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ae=a.document&&Yt&&(te()||parseInt(Ht,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Jt){}var se=!Yt||9<=Number(ae);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){dt(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}z(a?$(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(ye)}}else he=function(){var t=ye;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ve||(he(),ve=!0),be.add(t,e)}var ve=!1,be=new V;function ye(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(U,t)}ve=!1}function we(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,function(t){De(n,Oe,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Fd){}De(n,Ce,t)})}catch(r){De(this,Ce,r)}}var _e=0,Oe=2,Ce=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new L(function(){return new Ie},function(t){t.reset()});function Ee(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof we)return t;var e=new we(l);return De(e,Oe,t),e}function Se(t){return new we(function(e,n){n(t)})}function xe(t,e,n){Me(t,e,n,null)||me(O(e,t))}function Pe(t){return new we(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],O(i,o,!0),O(i,o,!1));else e(r)})}function Ae(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_e&&1==r?Ae(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Ce,e)))}t.c=null}else De(t,Ce,e)}function Ne(t,e){t.b||t.a!=Oe&&t.a!=Ce||Re(t),t.f?t.f.next=e:t.b=e,t.f=e}function je(t,e,n,r){var i=Ee(null,null,null);return i.a=new we(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(a){o(a)}}:o}),i.a.c=t,Ne(t,i),i.a}function De(t,e,n){t.a==_e&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Re(t),e!=Ce||n instanceof qe||function(t,e){t.g=!0,me(function(){t.g&&Ue.call(null,e)})}(t,n)))}function Me(t,e,n,r){if(t instanceof we)return Ne(t,Ee(e||l,n||null,r)),!0;if(j(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Re(t){t.h||(t.h=!0,me(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(Fd){Ue.call(null,Fd)}F(Te,e)}function Ve(t,e,n){e==Oe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return je(this,d(t)?t:null,d(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ee(t,t,e)).c=!0,Ne(this,t),this},t.o=function(t,e){return je(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new qe(t);me(function(){Ae(this,e)},this)}},t.$c=function(t){this.a=_e,De(this,Oe,t)},t.ad=function(t){this.a=_e,De(this,Ce,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ue=ge;function qe(t){D.call(this,t)}function Be(){0!=Ke&&(ze[g(this)]=this),this.xa=this.xa,this.pa=this.pa}I(qe,D),qe.prototype.name="cancel";var Ke=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ke)){var e=g(t);if(0!=Ke&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},Je=!Yt||9<=Number(ae),Ge=Yt&&!oe("9"),Ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,Qe);var $e=He({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function an(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=an(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=wn(n),t&&t[Ze]?On(t,e,n,p(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=bn(t);if(s||(t[sn]=s=new rn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=vn,e=Je?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=wn(n),t&&t[Ze]?Cn(t,e,n,p(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=wn(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=an(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=an(e,n,r,i)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(on(n,t),0==n.b&&(n.src=null,e[sn]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&dn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Je){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Xe(e,this))}function bn(t){return(t=t[sn])instanceof rn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){Be.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function On(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&on(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function En(t){var e=null;return new we(function(n,r){-1==(e=Tn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function kn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(_n,Be),_n.prototype[Ze]=!0,_n.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;vt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=In(a,r,!0,t)&&i}if(i=In(a=t.b=n,r,!0,t)&&i,i=In(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(a=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=xn.prototype).W=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Pn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return An(this.b,t)?this.b[t]:e},t.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof jn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,Mn(this,t.g),this.f=t.f,Rn(this,nr(t.b)),this.h=t.h):t&&(n=String(t).match(Nn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Mn(this,n[4]),this.f=qn(n[5]||"",!0),Rn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Dn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Rn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Xn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),er(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Kn(e,Gn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Vn(t){return t instanceof jn?new jn(t):new jn(t,void 0)}function Un(t,e,n,r){var i=new jn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}jn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Kn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Kn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kn(n,"/"==n.charAt(0)?Jn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Kn(n,Yn)),t.join("")},jn.prototype.resolve=function(t){var e=new jn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Mn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Rn(e,nr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Hn=/[#\?:]/g,Jn=/[#\?]/g,Gn=/[#\?@]/g,Yn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $n(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?er(n,i,o):n.add(i,o)}return n}function Zn(t,e){Xn(t),e=rr(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function tr(t,e){return Xn(t),e=rr(t,e),An(t.a.b,e)}function er(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(rr(t,e),$(n)),t.b+=n.length)}function nr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ir(t){var e=[];return ar(new or,t,e),e.join("")}function or(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),cr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":cr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Xn(this),this.c=null,t=rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Xn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Xn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Xn(this);var e=[];if("string"==typeof t)tr(this,t)&&(e=X(e,this.a.get(rr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Xn(this),this.c=null,tr(this,t=rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ur=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(t,e){e.push('"',t.replace(ur,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function lr(){var t=Pr();return Yt&&!!ae&&11==ae||/Edge\/\d+/.test(t)}function hr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function fr(t,e){e=e||a.window;var n="about:blank";t&&(n=Nt(Rt(t)||Vt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function pr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||a.window;try{t.close()}catch(e){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),kr(Pr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:Rt(void 0!==n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof At?e:Lt(e),a.href=Nt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Bt("",r,n,a),t=Nt(e),a&&(Xt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Ut(t=(r=It())?r.createHTML(t):t,null,qt),r=a.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Bt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function yr(){var t=null;return new we(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw fn(window,"load",t),e})}function wr(t){return t=t||Pr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Or(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Cr(){return w.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":w.a.INTERNAL.hasOwnProperty("node")?"Node":Or()?"Worker":"Browser"}function Ir(){var t=Cr();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Er="Chrome";function kr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Tr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function xr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Cr())?r=kr(i=Pr()):"Worker"===r&&(r=kr(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!a.indexedDB}catch(n){return Or()&&!!a.indexedDB}return!1}function jr(){return(Dr()||"chrome-extension:"===Mr()||wr())&&!Ir()&&Nr()&&!Or()}function Dr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return a.location&&a.location.protocol||null}function Rr(t){return!pr(t=t||Pr())&&kr(t)!=Tr}function Lr(t){return void 0===t?null:ir(t)}function Fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Vr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function qr(t){return"Safari"!=kr(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Br(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Kr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Cr(),this.b=pr(t)||"ReactNative"===e}function zr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}Kr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Jr,Gr={};function Yr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Jr=2==Qr.abcd}catch(Jt){Jr=!1}function Xr(t,e,n){Jr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Xr(t,n,e[n])}function Zr(t){var e={};return $r(e,t),e}function ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Xr(e,n,ti(t[n]));return e}function ei(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[oi]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",t[oi]),Xr(this,"displayName",t[ri]||null);var n=null;t[ii]&&(n=new Date(t[ii]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",e)}function ni(t){try{var e=new si(t)}catch(n){e=null}return e}ei.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",ai="phoneInfo";function si(t){ei.call(this,t),Xr(this,"phoneNumber",t[ai])}function ui(t){var e={},n=t[fi],r=t[pi],i=t[gi];if(t=ni(t[di]),!i||i!=li&&i!=hi&&!n||i==hi&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==hi?(e[vi]=n||null,e[yi]=n||null,e[mi]=r):(e[vi]=r||null,e[yi]=r||null,e[mi]=n||null),e[bi]=t||null,Xr(this,_i,i),Xr(this,wi,ti(e))}I(si,ei),si.prototype.w=function(){var t=si.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",hi="VERIFY_AND_CHANGE_EMAIL",fi="email",di="mfaInfo",pi="newEmail",gi="requestType",mi="email",vi="fromEmail",bi="multiFactorInfo",yi="previousEmail",wi="data",_i="operation";function Oi(t){var e=Fn(t=Vn(t),Ci)||null,n=Fn(t,Ii)||null,r=Fn(t,ki)||null;if(r=r&&xi[r]||null,!e||!n||!r)throw new E("argument-error",Ci+", "+Ii+"and "+ki+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,Ei)||null,tenantId:Fn(t,Si)||null})}var Ci="apiKey",Ii="oobCode",Ti="continueUrl",Ei="languageCode",ki="mode",Si="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:li,verifyAndChangeEmail:hi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Oi(t)}catch(e){return null}}function Ai(t){var e=t[Ri];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Vi];var r=n[Li];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new E("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ji])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",ji+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",ji="dynamicLinkDomain",Di="handleCodeInApp",Mi="iOS",Ri="url",Li="installApp",Fi="minimumVersion",Vi="packageName",Ui="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Bi=null;function Ki(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Ki(t)}catch(e){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(u){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Ji},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Ji},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Ji},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Yi(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=eo,e["google.com"]=ro,e["github.com"]=no,e["twitter.com"]=io;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new to(t);if(void 0!==t[Xi])return new Zi(t)}catch(r){}return null}var Xi="idToken",$i="providerId";function Zi(t){var e=t[$i];if(!e&&t[Xi]){var n=zi(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Xr(this,"providerId",e),Xr(this,"isNewUser",n)}function to(t){Zi.call(this,t),Xr(this,"profile",ti((t=Vr(t.rawUserInfo||"{}"))||{}))}function eo(t){if(to.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(to.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function ro(t){if(to.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(to.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",t.screenName||null)}function oo(t){var e=Vn(t),n=Fn(e,"link"),r=Fn(Vn(n),"link");return e=Fn(e,"deep_link_id"),Fn(Vn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:uo}I(to,Zi),I(eo,to),I(no,to),I(ro,to),I(io,to);var so="enroll",uo="signin";function co(){}function lo(t,e){return t.then(function(t){if(t[Xa]){var n=zi(t[Xa]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==x+"user-not-found"?new E("user-mismatch"):t})}function ho(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Xr(this,"providerId",t),Xr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function po(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(e){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Xr(this,"idToken",e.idToken),e.accessToken&&Xr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Xr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Xr(this,"accessToken",e.oauthToken),Xr(this,"secret",e.oauthTokenSecret)}Xr(this,"providerId",t),Xr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(n){}}return null}function bo(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Yi(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function wo(t){bo.call(this,t,Ji),this.a=[]}function _o(){wo.call(this,"facebook.com")}function Oo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Co(){wo.call(this,"github.com")}function Io(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Co).credential({accessToken:e})}function To(){wo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Hi)}function So(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Ao(){$r(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=jo(e)))throw new E("argument-error","Invalid email link!");return new xo(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function jo(t){return(t=Pi(t=oo(t)))&&t.operation===li?t:null}function Do(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new E("internal-error");this.a=t,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Do(e)}return null}function Ro(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Lo(t){try{this.a=t||w.a.auth()}catch(e){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Do({eb:t,cb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return Oo(n);case"github.com":return Io(n);case"twitter.com":return So(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ho(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Uo(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Ko(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return ke(this.a?this.a:this.b)},ao.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},ho.prototype.ka=function(t){return bs(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ys(t,n)},ho.prototype.c=function(t,e){return lo(ws(t,fo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return bs(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ys(t,n)},go.prototype.c=function(t,e){return lo(ws(t,mo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=gt(t),this},I(yo,bo),I(wo,bo),wo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},wo.prototype.Qb=function(){return $(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},I(_o,wo),Xr(_o,"PROVIDER_ID","facebook.com"),Xr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(Co,wo),Xr(Co,"PROVIDER_ID","github.com"),Xr(Co,"GITHUB_SIGN_IN_METHOD","github.com"),I(To,wo),Xr(To,"PROVIDER_ID","google.com"),Xr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),I(ko,bo),Xr(ko,"PROVIDER_ID","twitter.com"),Xr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Ss,{email:this.a,oobCode:this.f}):eu(t,Qs,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?eu(t,xs,{idToken:e,email:this.a,oobCode:this.f}):eu(t,Bs,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return lo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(Ao,{PROVIDER_ID:"password"}),$r(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ka=function(t){return t.fb(Ro(this))},Do.prototype.b=function(t,e){var n=Ro(this);return n.idToken=e,eu(t,$s,n)},Do.prototype.c=function(t,e){var n=Ro(this);return n.operation="REAUTH",lo(t=eu(t,Zs,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.fb=function(t,e){var n=this.a.a;return ke(e.verify()).then(function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return eu(t,zs,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==uo?i.Ha().then(function(e){return function(t,e){return eu(t,Ws,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return eu(t,Us,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},$r(Lo,{PROVIDER_ID:"phone"}),$r(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Wo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Jo(t,e,n){E.call(this,t,n),(t=e||{}).Jb&&Xr(this,"email",t.Jb),t.ea&&Xr(this,"phoneNumber",t.ea),t.credential&&Xr(this,"credential",t.credential),t.Zb&&Xr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(x)&&(e=e.substring(x.length));var n={credential:Vo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Yo(){}function Qo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Fd){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}I(Ho,E),I(Jo,E),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,I(Qo,Yo),Qo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Qo,I($o,Yo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(R("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(d(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},la=null;function ha(t){var e;if(la||(la=new na(""),ca[""]=la,la.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function da(t){this.f=t}function pa(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(da,Yo),da.prototype.a=function(){return new pa(this.f)},da.prototype.b=function(t){return function(){return t}}({}),I(pa,_n);var ga=0;function ma(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function va(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ba(t)}function ba(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ya(t){_n.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=wa,this.u=this.S=!1}(t=pa.prototype).open=function(t,e){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ba(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,va(this)),this.readyState=ga},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ba(this)),this.a&&(this.readyState=3,ba(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ma(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?va(this):ba(this),3==this.readyState&&ma(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,va(this))},t.sc=function(t){this.a&&(this.response=t,va(this))},t.Ua=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&va(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(ya,_n);var wa="";ya.prototype.b=ha("goog.net.XhrIo");var _a=/^https?$/i,Oa=["POST","PUT"];function Ca(t){return"content-type"==t.toLowerCase()}function Ia(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ta(t),ka(t)}function Ta(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ea(t){if(t.c&&void 0!==o)if(t.C[1]&&4==xa(t)&&2==Pa(t))fa(t.b,Aa(t,"Local request error detected and ignored"));else if(t.i&&4==xa(t))Tn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==xa(t)){fa(t.b,Aa(t,"Request complete")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Nn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!_a.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xa(t)?t.a.statusText:""}catch(l){fa(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Pa(t)+"]",Ta(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Sa(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Fd){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+Fd.message,void 0)}}}function Sa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function xa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<xa(t)?t.a.status:-1}catch(e){return-1}}function Aa(t,e){return e+" ["+t.R+" "+t.l+" "+Pa(t)+"]"}function Na(t){var e=Ka;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ja(t,e,n){t.a=!0,t.c=n,t.f=!e,La(t)}function Da(t){if(t.a){if(!t.v)throw new Fa(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&La(t)}function Ra(t){return J(t.g,function(t){return d(t[1])})}function La(t){if(t.h&&t.a&&Ra(t)){var e=t.h,n=qa[e];n&&(a.clearTimeout(n.a),delete qa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(j(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ra(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Na?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Ua(e),qa[e.a]=e,t.h=e.a)}function Fa(){D.call(this)}function Va(){D.call(this)}function Ua(t){this.a=a.setTimeout(_(this.c,this),0),this.b=t}(t=ya.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Aa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Aa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),ya.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ea(this):this.Jc())},t.Jc=function(){Ea(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case wa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fa(this.b,"Can not get response: "+e.message),null}},Na.prototype.cancel=function(t){if(this.a)this.c instanceof Na&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Va(this),Da(this),ja(this,!1,t))}},Na.prototype.m=function(t,e){this.i=!1,ja(this,t,e)},Na.prototype.then=function(t,e,n){var r,i,o=new we(function(t,e){r=t,i=e});return Ma(this,r,function(t){t instanceof Va?o.cancel():i(t)}),o.then(t,e,n)},Na.prototype.$goog_Thenable=!0,I(Fa,D),Fa.prototype.message="Deferred has already fired",Fa.prototype.name="AlreadyCalledError",I(Va,D),Va.prototype.message="Deferred was canceled",Va.prototype.name="CanceledError",Ua.prototype.c=function(){throw delete qa[this.a],this.b};var qa={};function Ba(t){var e={},n=e.document||document,r=Et(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Na(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){za(i,!0);var t=new Ja(Ha,"Timeout reached for loading script "+r);Da(s),ja(s,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(za(i,e.xd||!1,l),Da(s),ja(s,!0,null))},i.onerror=function(){za(i,!0,l);var t=new Ja(Wa,"Error while loading script "+r);Da(s),ja(s,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Et(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ka(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&za(t,!0,this.Ma)}}function za(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Wa=0,Ha=1;function Ja(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ga(t){this.f=t}function Ya(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||$a,this.g=gt(t.secureTokenHeaders||Za),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ts,this.a=gt(t.firebaseHeaders||es),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Cr(),!(n=a.XMLHttpRequest||n&&w.a.INTERNAL.node&&w.a.INTERNAL.node.XMLHttpRequest)&&!Or())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=Or()?new da(self):Ir()?new Ga(n):new $o,this.b=null}I(Ja,D),I(Ga,Yo),Ga.prototype.a=function(){return new this.f},Ga.prototype.b=function(){return{}};var Qa,Xa="idToken",$a=new Kr(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},ts=new Kr(3e4,6e4),es={"Content-Type":"application/json"};function ns(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function rs(t,e){e&&(t.l=is("https://securetoken.googleapis.com/v1/token",e),t.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=is("https://identitytoolkit.googleapis.com/v2/",e))}function is(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,Mn(t,e.g),t.toString()}function os(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function as(t,e,n,r,i,o,s){(function(){var t=Pr();return!((t=kr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ae&&!(9<ae))})()||Or()?t=_(t.u,t):(Qa||(Qa=new we(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[us]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ba(kt(ss,{onload:us})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=_(t.s,t)),t(e,n,r,i,o,s)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(t,e,n,r,i,o){if(Or()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ya(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}On(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Cn(s,"ready",function(){u&&clearTimeout(u),We(this)}),Cn(s,"timeout",function(){u&&clearTimeout(u),We(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:zo),t.a.onreadystatechange=_(t.Vb,t);try{fa(t.b,Aa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return fa(t.b,Aa(t,"Error opening Xhr: "+s.message)),void Ia(t,s)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)z(t,e,void 0);else for(var n=Sn(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Ca,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!G(Oa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Sa(t),0<t.g&&(t.u=function(t){return Yt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Aa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),fa(t.b,Aa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){fa(t.b,Aa(t,"Send error: "+s.message)),Ia(t,s)}}(s,t,n,r,i)};var ss=new yt(Ct,"https://apis.google.com/js/client.js?onload=%{onload}"),us="__fcb"+Math.floor(1e6*Math.random()).toString();function cs(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new E("invalid-email")}function ls(t){"email"in t&&cs(t)}function hs(t){if(!t[Xa]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,gt(t));throw new E("internal-error")}}function fs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Ya.prototype.s=function(t,e,n,r,i){var o=this;Qa.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ya.prototype.zb=function(){return eu(this,Ks,{})},Ya.prototype.Bb=function(t,e){return eu(this,qs,{idToken:t,email:e})},Ya.prototype.Cb=function(t,e){return eu(this,Bs,{idToken:t,password:e})};var ds={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ps(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function gs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&tr(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function vs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;hs(t)}function bs(t,e){return e.returnIdpCredential=!0,eu(t,Hs,e)}function ys(t,e){return e.returnIdpCredential=!0,eu(t,Gs,e)}function ws(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Js,e)}function _s(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Ya.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(ds,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),eu(this,qs,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,Rs,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,js,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Ds,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,Ms,t)},t.fb=function(t){return eu(this,Xs,t)},t.nb=function(t,e){return eu(this,Vs,{oobCode:t,newPassword:e})},t.Ra=function(t){return eu(this,Cs,{oobCode:t})},t.jb=function(t){return eu(this,Os,{oobCode:t})};var Os={endpoint:"setAccountInfo",A:_s,Z:"email",B:!0},Cs={endpoint:"resetPassword",A:_s,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},Is={endpoint:"signupNewUser",A:function(t){if(cs(t),!t.password)throw new E("weak-password")},G:hs,V:!0,B:!0},Ts={endpoint:"createAuthUri",B:!0},Es={endpoint:"deleteAccount",N:["idToken"]},ks={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},Ss={endpoint:"emailLinkSignin",N:["email","oobCode"],A:cs,G:hs,V:!0,B:!0},xs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:cs,G:hs,V:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ps,G:hs,B:!0,Na:!0},As={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ps,G:hs,B:!0,Na:!0},Ns={endpoint:"getAccountInfo"},js={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");cs(t)},Z:"email",B:!0},Ds={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Rs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");cs(t)},Z:"email",B:!0},Ls={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Fs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Vs={endpoint:"resetPassword",A:_s,Z:"email",B:!0},Us={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},qs={endpoint:"setAccountInfo",N:["idToken"],A:ls,V:!0},Bs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ls(t),!t.password)throw new E("weak-password")},G:hs,V:!0},Ks={endpoint:"signupNewUser",G:hs,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Hs={endpoint:"verifyAssertion",A:gs,Ya:ms,G:vs,V:!0,B:!0},Js={endpoint:"verifyAssertion",A:gs,Ya:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);hs(t)},V:!0,B:!0},Gs={endpoint:"verifyAssertion",A:function(t){if(gs(t),!t.idToken)throw new E("internal-error")},Ya:ms,G:vs,V:!0},Ys={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:hs,V:!0,B:!0},Qs={endpoint:"verifyPassword",A:function(t){if(cs(t),!t.password)throw new E("wrong-password")},G:hs,V:!0,B:!0},Xs={endpoint:"verifyPhoneNumber",A:fs,G:hs,B:!0},$s={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");fs(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);hs(t)}},Zs={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:fs,G:hs,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Xa]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Se(new E("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ke(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Vn(e+n);Ln(s,"key",t.c),a&&Ln(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(s,c,i[c]);return new we(function(e,n){as(t,s.toString(),function(t){t?t.error?n(ru(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:ir(Fr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]})}function nu(t){return ru({error:{errors:[{message:t}],code:400,message:t}})}function ru(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Lr(t)),new E("internal-error",e)}function iu(t){this.b=t,this.a=null,this.rb=function(t){return(uu||(uu=new we(function(t,e){function n(){Br(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Br(),e(Error("Network Error"))},timeout:au.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},ke(Ba(r=kt(ou,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw uu=null,t}))).then(function(){return new we(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ou=new yt(Ct,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new Kr(3e4,6e4),su=new Kr(5e3,15e3),uu=null;function cu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function hu(t){try{return w.a.app(t).auth().Ga()}catch(e){return[]}}function fu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=hr();return function(t){return eu(t,Ls,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(hr())})}function pu(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=hu(t.b),i=new cu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new iu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)})}(t)})),t.m}function gu(t){return t.l||(t.C=t.c?xr(t.c,hu(t.b)):null,t.l=new Ya(t.g,N(t.i),t.C),t.f&&rs(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new lu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function vu(t){if(this.a=t||w.a.INTERNAL.reactNative&&w.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=_(this.c,this)}cu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},lu.prototype.yb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=w.a.app(this.c).auth().la()}catch(s){n=null}for(var r in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Fr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Ln(t,"customParameters",Lr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Zn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Zn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Zn(t.b,"eid"),(a=hu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=fu.prototype).Ob=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return pu(t).then(function(){return function(t,e){return t.rb.then(function(){return new we(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&gr(t),e(i),a=!0)})}).o(function(){}).then(function(){if(!a)return function(t){return new we(function(e){return function n(){En(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return En(n).then(function(){e(r)})})},t.Xb=function(){var t=Pr();return!Rr(t)&&!qr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Se(new E("popup-blocked"));if(a&&!Rr())return this.ma().o(function(e){gr(t),i(e)}),r(),ke();this.a||(this.a=du(gu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw gr(t),i(e),e});return r(),e}).then(function(){Uo(n),a||fr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=du(gu(this)));var i=this;return this.a.then(function(){Uo(e),fr(mu(i.s,i.g,i.b,t,e,hr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return pu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Q(this.h,function(e){return e==t})},(t=vu.prototype).get=function(t){return ke(this.a.getItem(t)).then(function(t){return t&&Vr(t)})},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,wu=[];function _u(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ou(t){this.a=t}function Cu(t){this.c=t,this.b=!1,this.a=[]}function Iu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Se(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Tu(t,c),e}).o(function(e){throw Tu(t,c),e})}function Tu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,function(t){return t==e})}}function Eu(){if(!Pu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Or()&&self?(this.v=function(){var t=Or()?self:null;if(z(wu,function(n){n.b==t&&(e=n)}),!e){var e=new bu(t);wu.push(e)}return e}(),_u(this.v,"keyChanged",function(e,n){return Mu(t).then(function(e){return 0<e.length&&z(t.a,function(t){t(e)}),{keyProcessed:G(e,n.key)}})}),_u(this.v,"ping",function(){return ke(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?ke().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):ke(null)}().then(function(e){(t.h=e)&&(t.g=new Cu(new Ou(e)),Iu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function ku(t){return new we(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return ku(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Su(t){return t.i||(t.i=ku(t)),t.i}function xu(t,e){var n=0;return new we(function r(i,o){Su(t).then(e).then(i).o(function(e){if(!(3<++n))return Su(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Pu(){try{return!!a.indexedDB}catch(Jt){return!1}}function Au(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new we(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Du(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Iu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):ke()}function Mu(t){return Su(t).then(function(t){var e=Au(Nu(t,!1));return e.getAll?ju(e.getAll()):new we(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r})}function Ru(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Lu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then(function(){if(Pu()){var t=Ur(),r="__sak"+t;return yu||(yu=new Eu),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){z(e.a,function(e){e(t)})}),t})}function Fu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==Cr();if(!(t=Uu()||t&&w.a.INTERNAL.node&&w.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Cr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Uu()||w.a.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function qu(){this.type="nullStorage"}function Bu(){if(!function(){var t="Node"==Cr();if(!(t=Ku()||t&&w.a.INTERNAL.node&&w.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Cr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Ku()||w.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Ju,t.Node=Gu,t.ReactNative=Yu,t.Worker=Qu,this.a=t[Cr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,function(e){i.push(ke().then(function(){return e(t.origin,t.data.data)}))}),Pe(i).then(function(r){var i=[];z(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),z(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},Ou.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Cu.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(t=Eu.prototype).set=function(t,e){var n=this,r=!1;return xu(this,function(e){return ju((e=Au(Nu(e,!0))).get(t))}).then(function(i){return xu(n,function(o){if(o=Au(Nu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,ju(o.add(a))})}).then(function(){return n.c[t]=e,Du(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return xu(this,function(e){return ju(Au(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return xu(this,function(r){return n=!0,e.b++,ju(Au(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Du(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Ru(t),function e(){t.f=setTimeout(function(){t.l=Mu(t).then(function(e){0<e.length&&z(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t}),0==this.a.length&&Ru(this)},(t=Lu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t})},(t=Fu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return ke().then(function(){return Vr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&fn(a.window,"storage",t)},(t=qu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return ke().then(function(){return Vr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Wu,Hu,Ju={F:Vu,bb:Bu},Gu={F:Vu,bb:Bu},Yu={F:vu,bb:qu},Qu={F:Vu,bb:qu},Xu={rd:"local",NONE:"none",td:"session"};function $u(){var t=!(qr(Pr())||!_r()),e=Rr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!lr()&&Hr()||!a.indexedDB?new t.a.F:new Lu(Or()?new Fu:new t.a.F)}catch(r){this.g=new Fu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Fu}this.v=new Fu,this.f=_(this.Yb,this),this.b={}}function Zu(){return Hu||(Hu=new $u),Hu}function tc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ec(t,e){return"firebase:"+t.name+(e?":"+e:"")}function nc(t,e,n){return n=ec(e,n),"local"==e.F&&(t.b[n]=null),tc(t,e.F).U(n)}function rc(t){t.c&&(clearInterval(t.c),t.c=null)}function ic(t){this.a=t,this.b=Zu()}(t=$u.prototype).get=function(t,e){return tc(this,t.F).get(ec(t,e))},t.set=function(t,e,n){var r=ec(t,n),i=this,o=tc(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=ec(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(tc(this,"local").ca(this.f),this.h||(lr()||!Hr())&&a.indexedDB||!this.l||function(t){rc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ec(t,e),this.a[t]&&(Q(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(tc(this,"local").ia(this.f),rc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?tc(this,"local").ia(this.f):rc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Yt&&ae&&10==ae&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&z(this.a[t],function(t){t()})};var oc,ac={name:"authEvent",F:"local"};function sc(){this.a=Zu()}function uc(t,e){this.b=cc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===oc&&(oc=a.Int32Array?new Int32Array(mc):mc),this.reset()}I(uc,function(){this.b=-1});for(var cc=64,lc=cc-1,hc=[],fc=0;fc<lc;fc++)hc[fc]=0;var dc=X(128,hc);function pc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|oc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(pc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(pc(t),i=0)}}t.c=i,t.g+=n}uc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):$(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){uc.call(this,8,bc)}I(vc,uc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new ic(this.h),this.f=null,this.b=[],this.a=this.c=null}function wc(t){return new E("invalid-cordova-configuration",t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Oc(t){return t.f||(t.f=t.ma().then(function(){return new we(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=oo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Vr(Fn(o=Vn(i),"firebaseError")||null))?k(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)})}var n=new qo("unknown",null,null,null,new E("no-auth-event")),r=!1,i=En(500).then(function(){return Cc(t).then(function(){r||_c(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Wo||(Wo=new Ko),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Cc(t){var e=null;return function(t){return t.b.get(ac,t.a).then(function(t){return Bo(t)})}(t.g).then(function(n){return e=n,nc((n=t.g).b,ac,n.a)}).then(function(){return e})}function Ic(t){this.a=t,this.b=Zu()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?yr().then(function(){return new we(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Se(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw wc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw wc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw wc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw wc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")})},t.Ob=function(t,e){return e(new E("operation-not-supported-in-this-environment")),ke()},t.Mb=function(){return Se(new E("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Se(new E("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=ke().then(function(){return Uo(e),Oc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new qo(e,r,null,o,new E("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),l={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Pr().toLowerCase().match(/android/))return Se(new E("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new vc;gc(e,t),t=[];var n=8*e.g;gc(e,dc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(pc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=mu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ac,s.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new E("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new E("invalid-cordova-configuration");e=Pr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new we(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){zr()&&c()},o.addEventListener("resume",c=function(){s||(s=En(2e3).then(function(){e(new E("redirect-cancelled-by-user"))}))},!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Cc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),Oc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new E("no-auth-event")),t(e))})},t.Sa=function(t){Q(this.b,function(e){return e==t})};var Tc={name:"pendingRedirect",F:"session"};function Ec(t){return nc(t.b,Tc,t.a)}function kc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Bc,this.C=new Jc,this.g=new Ic(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Sc(this.D,this.v,this.m,S,this.J)}function Sc(t,e,n,r,i){var o=w.a.SDK_VERSION||null;return wr()?new yc(t,e,n,o,r,i):new fu(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Pc(t){t.a.Xb()&&xc(t).o(function(e){var n=new qo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Rc(e)&&t.s(n)}),t.a.Tb()||Kc(t.b)}function Ac(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Tc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ec(t.g).then(function(){xc(t).o(function(e){var n=new qo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Rc(e)&&t.s(n)})}):Pc(t)}).o(function(){Pc(t)})}function Nc(t,e){Q(t.h,function(t){return t==e})}kc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Sc(this.D,this.v,this.m,null,this.J),this.i={}},kc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Kc(this.b),e};var jc=new Kr(2e3,1e4),Dc=new Kr(3e4,6e4);function Mc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,a)}function Rc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Lc(t,e,n,r,i){var o;return function(t){return t.b.set(Tc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Rc(e))throw new E("operation-not-supported-in-this-environment");return o=e,Ec(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new we(function(){}):Ec(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Fc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},jc.get())}kc.prototype.qa=function(){return this.b.qa()};var Vc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function qc(t,e,n,r){var i=Uc(e,n,r);return Vc[i]||(Vc[i]=new kc(t,e,n,r)),Vc[i]}function Bc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Kc(t){t.g||(t.g=!0,Hc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Hc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Jc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Yc(t,e){this.a=e,Xr(this,"verificationId",t)}function Qc(t,e,n,r){return new Lo(t).fb(e,n).then(function(t){return new Yc(t,r)})}function Xc(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function $c(t,e,n){var r=e&&e[tl];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;z(e[Zc]||[],function(t){(t=ni(t))&&i.b.push(t)}),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Bc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Hc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then(function(e){Hc(t,s,e,null)}).o(function(e){Hc(t,s,null,e)})}(this,t,e):Se(new E("invalid-auth-event")):(Hc(this,!1,null,null),ke())}else Se(new E("invalid-auth-event"))},Bc.prototype.qa=function(){var t=this;return new we(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=En(Dc.get()).then(function(){t.b||(t.g=!0,Hc(t,!0,null,e))})}(t))})},Jc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Se(new E("invalid-auth-event"))}else Se(new E("invalid-auth-event"))},Yc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var Zc="mfaInfo",tl="mfaPendingCredential";function el(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new $c(t,e,n),Xr(this,"resolver",this.b)}function nl(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new el(e,t.serverResponse,n,t.message)}catch(r){}return null}function rl(){}function il(t){Xr(this,"factorId",t.fa),this.a=t}function ol(t){if(il.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function al(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[oi]=t.uid),t.displayName&&(r[ri]=t.displayName),t.enrollmentTime&&(r[ii]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),ul(this,n)}function ul(t,e){t.b=e,Xr(t,"enrolledFactors",e)}function cl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ll(t,e){t.stop(),t.b=En(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return zr()||!t?ke():new we(function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ll(t,!0)}).o(function(e){t.i(e)&&ll(t,!1)})}function hl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function fl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function dl(t,e){t.b=zi(e[Xa]||""),t.a=e.refreshToken,fl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function pl(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function gl(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ml(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=w.a.SDK_VERSION?xr(w.a.SDK_VERSION):null;this.a=new Ya(this.l,N(S),r),t.emulatorConfig&&rs(this.a,t.emulatorConfig),this.b=new hl(this.a),Il(this,e[Xa]),dl(this.b,e),Xr(this,"refreshToken",this.b.a),kl(this,n||{}),_n.call(this),this.R=!1,this.s&&jr()&&(this.i=qc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new cl(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){rs(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){yl(i,t.f)},this.ba=null,this.O=new sl(this,n),Xr(this,"multiFactor",this.O)}function vl(t,e){t.ja&&fn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function bl(t,e){t.X&&fn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function yl(t,e){t.$=e,os(t.a,w.a.SDK_VERSION?xr(w.a.SDK_VERSION,t.$):null)}function wl(t,e){t.ba&&fn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function _l(t){try{return w.a.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ol(t){t.D||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function Cl(t){fn(t,"tokenChanged",t.aa),t.u.stop()}function Il(t,e){t.za=e,Xr(t,"_lat",e)}function Tl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Pe(e).then(function(){return t})}function El(t){t.i&&!t.R&&(t.R=!0,Ac(t.i,t))}function kl(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new pl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sl(){}function xl(t){return ke().then(function(){if(t.D)throw new E("app-deleted")})}function Pl(t){return H(t.providerData,function(t){return t.providerId})}function Al(t,e){e&&(Nl(t,e.providerId),t.providerData.push(e))}function Nl(t,e){Q(t.providerData,function(t){return t.providerId==e})}function jl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Xr(t,e,n)}function Dl(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Xr(t,"metadata",e.metadata?function(t){return new pl(t.a,t.b)}(e.metadata):new pl),z(e.providerData,function(e){Al(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Xr(t,"refreshToken",t.b.a),ul(t.O,e.O.b))}function Ml(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,Ns,{idToken:e}).then(_(t.Kc,t))}(t,e).then(function(){return n||jl(t,"isAnonymous",!1),e})})}function Rl(t,e){e[Xa]&&t.za!=e[Xa]&&(dl(t.b,e),t.dispatchEvent(new al("tokenChanged")),Il(t,e[Xa]),jl(t,"refreshToken",t.b.a))}function Ll(t,e){return Ml(t).then(function(){if(G(Pl(t),e))return Tl(t).then(function(){throw new E("provider-already-linked")})})}function Fl(t,e,n){return Zr({user:t,credential:Vo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Vl(t,e){return Rl(t,e),t.reload().then(function(){return t})}function Ul(t,e,n,r,i){if(!jr())return Se(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return Se(t.h);var o=Yi(n.providerId),a=Ur(t.uid+":::"),s=null;(!Rr()||_r())&&t.s&&n.isOAuthProvider&&(s=mu(t.s,t.l,t.m,e,n,null,a,w.a.SDK_VERSION||null,null,null,t.tenantId));var u=mr(s,o&&o.ua,o&&o.ta);return r=r().then(function(){if(Bl(t),!i)return t.I().then(function(){})}).then(function(){return Mc(t.i,u,e,n,a,!!s,t.tenantId)}).then(function(){return new we(function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Fc(t.i,t,e,u,a)})}).then(function(t){return u&&gr(u),t?Zr(t):null}).o(function(t){throw u&&gr(u),t}),Kl(t,r,i)}function ql(t,e,n,r,i){if(!jr())return Se(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return Se(t.h);var o=null,a=Ur(t.uid+":::");return r=r().then(function(){if(Bl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=a,Tl(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Hl,t.w(),e.a)),e}).then(function(){return Lc(t.i,e,n,a,t.tenantId)}).o(function(e){if(o=e,t.ha)return Jl(t.ha);throw o}).then(function(){if(o)throw o}),Kl(t,r,i)}function Bl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Kl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Se(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new al("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Y(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=nl(e.w(),_l(t),_(t.jc,t))),n||e})}function zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Xa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new ml(e,n,t);return t.providerData&&z(t.providerData,function(t){t&&Al(i,Zr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wl(t){this.a=t,this.b=Zu()}$c.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Zc],delete n[tl],vt(n,t),e.g(n)})},I(el,E),rl.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Ro(t.a)}),eu(e,Ps,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ro(t.a)}),eu(e,As,n)})}(this,t,e)},I(il,rl),I(ol,il),I(al,Qe),(t=sl.prototype).yc=function(t){ul(this,function(t){var e=[];return z(t.mfaInfo||[],function(t){(t=ni(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new ao(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Rl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return eu(r,tu,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=W(e.b,function(t){return t.uid!=n});return ul(e,r),Rl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,function(t){return t.w()})}}},cl.prototype.start=function(){this.a=this.c,ll(this,!0)},cl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},hl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new we(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?as(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(ru(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))},"POST",$n(e).toString(),t.g,t.m.get()):r(new E("internal-error"))})}(t.f,e).then(function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,fl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},pl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(ml,_n),ml.prototype.wa=function(t){this.ya=t,ns(this.a,t)},ml.prototype.la=function(){return this.ya},ml.prototype.Ga=function(){return $(this.$)},ml.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Xr(ml.prototype,"providerId","firebase"),(t=ml.prototype).reload=function(){var t=this;return Kl(this,xl(this).then(function(){return Ml(t).then(function(){return Tl(t)}).then(Sl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Xc(t)})},t.I=function(t){var e=this;return Kl(this,xl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.za&&(Il(e,t.accessToken),e.dispatchEvent(new al("tokenChanged"))),jl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");kl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,function(t){return new gl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Al(this,e[n]);jl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new al("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Kl(this,t.c(this.a,this.uid).then(function(t){return Rl(e,t),n=Fl(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Kl(this,Ll(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Fl(e,t,"link"),Vl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Kl(this,Ll(this,"phone").then(function(){return Qc(_l(n),t,e,_(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Kl(this,ke().then(function(){return Qc(_l(n),t,e,_(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Kl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Rl(e,t),e.reload()}))},t.ed=function(t){var e=this;return Kl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Rl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Kl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Rl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return xl(this);var e=this;return Kl(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Rl(e,t),jl(e,"displayName",t.displayName||null),jl(e,"photoURL",t.photoUrl||null),z(e.providerData,function(t){"password"===t.providerId&&(Xr(t,"displayName",e.displayName),Xr(t,"photoURL",e.photoURL))}),Tl(e)}).then(Sl))},t.cd=function(t){var e=this;return Kl(this,Ml(this).then(function(n){return G(Pl(e),t)?function(t,e,n){return eu(t,ks,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return z(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),z(Pl(e),function(t){n[t]||Nl(e,t)}),n[Lo.PROVIDER_ID]||Xr(e,"phoneNumber",null),Tl(e)}):Tl(e).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var t=this;return Kl(this,this.I().then(function(e){return eu(t.a,Es,{idToken:e})}).then(function(){t.dispatchEvent(new al("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");vl(t,null),bl(t,null),wl(t,null),t.J=[],t.D=!0,Cl(t),Xr(t,"refreshToken",null),t.i&&Nc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return Ul(this,"linkViaPopup",t,function(){return Ll(e,t.providerId).then(function(){return Tl(e)})},!1)},t.Nc=function(t){return Ul(this,"reauthViaPopup",t,function(){return ke()},!0)},t.Fc=function(t){var e=this;return ql(this,"linkViaRedirect",t,function(){return Ll(e,t.providerId)},!1)},t.Oc=function(t){return ql(this,"reauthViaRedirect",t,function(){return ke()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,this.I().then(function(n){return ys(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Fl(i,t,"link"),Vl(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,ke().then(function(){return lo(ws(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Fl(i,t,"reauthenticate"),Rl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Kl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:qi(new Ai(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return Kl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:qi(new Ai(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Kl(this,t=lo(ke(t),n.uid).then(function(t){return e=Fl(n,t,"reauthenticate"),Rl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),z(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),vt(t,this.O.w()),t};var Hl={name:"redirectUser",F:"session"};function Jl(t){return nc(t.b,Hl,t.a)}function Gl(t){this.a=t,this.b=Zu(),this.c=null,this.f=function(t){var e=Xl("local"),n=Xl("session"),r=Xl("none");return function(t,e,n){var r=ec(e,n),i=tc(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Vr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?Xl(t):e})})})}).then(function(e){return t.c=e,Yl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Xl("local"),this.a,_(this.g,this))}function Yl(t,e){var n,r=[];for(n in Xu)Xu[n]!==e&&r.push(nc(t.b,Xl(Xu[n]),t.a));return r.push(nc(t.b,Ql,t.a)),function(t){return new we(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)xe(t[s],O(o,s),a);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Xl("local");eh(this,function(){return ke().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Yl(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function Xl(t){return{name:"authUser",F:t}}function $l(t,e){return eh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Zl(t){return eh(t,function(){return nc(t.b,t.c,t.a)})}function th(t,e,n){return eh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zl(t||{})})})}function eh(t,e){return t.f=t.f.then(e,e),t.f}function nh(t){if(this.l=!1,Xr(this,"settings",new Gc),Xr(this,"app",t),!lh(this).options||!lh(this).options.apiKey)throw new E("invalid-api-key");t=w.a.SDK_VERSION?xr(w.a.SDK_VERSION):null,this.a=new Ya(lh(this).options&&lh(this).options.apiKey,N(S),t),this.R=[],this.s=[],this.O=[],this.hb=w.a.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=w.a.INTERNAL.createSubscribe(_(this.Ac,this)),uh(this,null),this.i=new Gl(lh(this).options.apiKey+":"+lh(this).name),this.D=new Wl(lh(this).options.apiKey+":"+lh(this).name),this.$=ph(this,function(t){var e=lh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Hl,t.a).then(function(t){return t&&e&&(t.authDomain=e),zl(t||{})})}(t.D,lh(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Jl(t.D)});return ph(t,e)}(t).then(function(){return th(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return $l(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Zl(t.i)})):null}).then(function(e){uh(t,e||null)});return ph(t,n)}(this)),this.h=ph(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Xl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=lh(t).options.authDomain,n=lh(t).options.apiKey;e&&jr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=qc(e,n,lh(t).name,t.P),Ac(t.b,t),hh(t)&&El(hh(t)),t.m){El(t.m);var r=t.m;r.wa(t.la()),vl(r,t),yl(r=t.m,t.J),wl(r,t),rs((r=t.m).a,t.P),bl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=Zr({protocol:t.c,host:t.a,port:t.g,options:Zr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function rh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ih(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function oh(t){Qe.call(this,"frameworkChanged"),this.f=t}function ah(t){return t.Oa||Se(new E("auth-domain-config-required"))}function sh(t){if(!jr())return Se(new E("operation-not-supported-in-this-environment"));var e=ah(t).then(function(){return t.b.qa()}).then(function(t){return t?Zr(t):null});return ph(t,e)}function uh(t,e){hh(t)&&(function(t,e){Q(t.S,function(t){return t==e})}(hh(t),t.Ba),fn(hh(t),"tokenChanged",t.ya),fn(hh(t),"userDeleted",t.za),fn(hh(t),"userInvalidated",t.Aa),Cl(hh(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&Ol(e)),Xr(t,"currentUser",e),e&&(e.wa(t.la()),vl(e,t),yl(e,t.J),wl(e,t),rs(e.a,t.P),bl(e,t))}function ch(t,e){var n=null,r=null;return ph(t,e.then(function(e){return n=Vo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=lh(t).options.apiKey,n.authDomain=lh(t).options.authDomain,n.appName=lh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new ml(t,e);return n&&(i.ha=n),r&&yl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return hh(t)&&e.uid==hh(t).uid?(Dl(hh(t),e),t.da(e)):(uh(t,e),El(e),t.da(e))}).then(function(){dh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=nl(e.w(),t,_(t.kc,t))),n||e}).then(function(){return Zr({user:hh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function lh(t){return t.app}function hh(t){return t.currentUser}function fh(t){return hh(t)&&hh(t)._lat||null}function dh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](fh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](fh(t))}}function ph(t,e){return t.R.push(e),e.oa(function(){Y(t.R,e)}),e}function gh(){}function mh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Xu)if(Xu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pu()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),eh(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Yl(n,t)}).then(function(){if(n.c=Xl(t),e)return n.b.set(n.c,e,n.a)}):ke()})},I(nh,_n),I(rh,Qe),I(ih,Qe),I(oh,Qe),(t=nh.prototype).xb=function(t){return ph(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ns(this.a,this.aa),this.dispatchEvent(new rh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,rs(this.a,this.P),this.dispatchEvent(new ih(this.P))}},t.Gc=function(t){this.J.push(t),os(this.a,w.a.SDK_VERSION?xr(w.a.SDK_VERSION,this.J):null),this.dispatchEvent(new oh(this.J))},t.Ga=function(){return $(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:lh(this).options.apiKey,authDomain:lh(this).options.authDomain,appName:lh(this).name,currentUser:hh(this)&&hh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ch(i,bs(i.a,o))})},t.Xc=function(t){if(!jr())return Se(new E("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=Ur(),i=null;(!Rr()||_r())&&lh(this).options.authDomain&&t.isOAuthProvider&&(i=mu(lh(this).options.authDomain,lh(this).options.apiKey,lh(this).name,"signInViaPopup",t,null,r,w.a.SDK_VERSION||null,null,null,this.T(),this.P));var o=mr(i,n&&n.ua,n&&n.ta);return ph(this,n=ah(this).then(function(n){return Mc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new we(function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Fc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&gr(o),t?Zr(t):null}).o(function(t){throw o&&gr(o),t}))},t.Yc=function(t){if(!jr())return Se(new E("operation-not-supported-in-this-environment"));var e=this;return ph(this,ah(this).then(function(){return function(t){return eh(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Lc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return sh(this).then(function(e){return t.b&&zc(t.b.b),e}).o(function(e){throw t.b&&zc(t.b.b),e})},t.dd=function(t){if(!t)return Se(new E("null-user"));if(this.S!=t.tenantId)return Se(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=lh(this).options.apiKey,n.authDomain=lh(this).options.authDomain,n.appName=lh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Xa]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new ml(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&yl(e,r),Dl(e,t),e}(t,n,e.D,e.Ga());return ph(this,this.h.then(function(){if(lh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return hh(e)&&t.uid==hh(e).uid?(Dl(hh(e),t),e.da(t)):(uh(e,r),El(r),e.da(r))}).then(function(){dh(e)}))},t.Ab=function(){var t=this;return ph(this,this.h.then(function(){return t.b&&zc(t.b.b),hh(t)?(uh(t,null),Zl(t.i).then(function(){dh(t)})):ke()}))},t.Zc=function(){var t=this;return th(this.i,lh(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=hh(t)&&e){n=hh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Dl(hh(t),e),hh(t).I();(hh(t)||e)&&(uh(t,e),e&&(El(e),e.ha=t.D),t.b&&Ac(t.b,t),dh(t))}})},t.da=function(t){return $l(this.i,t)},t.mc=function(){dh(this),this.da(hh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return ch(e,ke(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(hh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),ph(t,t.h.then(function(){!t.l&&G(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(fh(t)))}))}(this,function(){t.next(hh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return ph(this,this.h.then(function(){return hh(e)?hh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return ch(e,eu(e.a,Ys,{token:t}))}).then(function(t){var n=t.user;return jl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ch(n,eu(n.a,Qs,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ch(n,eu(n.a,Is,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return ch(e,t.ka(e.a))})},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=hh(t);if(e&&e.isAnonymous){var n=Zr({providerId:null,isNewUser:!1});return Zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ch(t,t.a.zb()).then(function(e){var n=e.user;return jl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return hh(this)&&hh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&hh(this)&&Ol(hh(this))},t.Pc=function(t){var e=this;z(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&hh(this)&&Cl(hh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ph(this,this.h.then(function(){e.l||G(e.s,t)&&t(fh(e))}))},t.removeAuthTokenListener=function(t){Q(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Xl("local"),t.a,this.ja),this.b&&(Nc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return ph(this,function(t,e){return eu(t,Ts,{identifier:e,continueUri:Dr()?hr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!jo(t)},t.wb=function(t,e){var n=this;return ph(this,ke().then(function(){var t=new Ai(e);if(!t.c)throw new E("argument-error",Di+" must be true when sending sign in link to email");return qi(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return ph(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return ph(this,this.a.Ra(t).then(function(t){return new ui(t)}))},t.jb=function(t){return ph(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return ph(this,ke().then(function(){return void 0===e||pt(e)?{}:qi(new Ai(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return ph(this,Qc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return ph(this,ke().then(function(){var r=e||hr(),i=No(t,r);if(!(r=jo(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.$a(i)}))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var vh=null;function bh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function wh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function _h(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Oh(){}function Ch(){}mh.prototype.render=function(t,e){return this.a[this.b.toString()]=new wh(t,e),this.b++},mh.prototype.reset=function(t){var e=bh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},mh.prototype.getResponse=function(t){return(t=bh(this,t))?t.getResponse():null},mh.prototype.execute=function(t){(t=bh(this,t))&&t.execute()},wh.prototype.getResponse=function(){return _h(this),this.b},wh.prototype.execute=function(){_h(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},wh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Xr(Oh,"FACTOR_ID","phone"),Ch.prototype.g=function(){return vh||(vh=new mh),ke(vh)},Ch.prototype.c=function(){};var Ih=null;function Th(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Eh=new yt(Ct,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kh=new Kr(3e4,6e4);Th.prototype.g=function(t){var e=this;return new we(function(n,r){var i=setTimeout(function(){r(new E("network-request-failed"))},kh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete a[e.a]},ke(Ba(kt(Eh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Th.prototype.c=function(){this.b--};var Sh=null;function xh(t,e,n,r,i,o,s){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Ih||(Ih=new Ch),s=Ih):(Sh||(Sh=new Th),s=Sh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nh])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!a.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ph];this.a[Ph]=function(t){if(Dh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var l=this.a[Ah];this.a[Ah]=function(){if(Dh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,a);"function"==typeof t&&t()}}}var Ph="callback",Ah="expired-callback",Nh="sitekey",jh="size";function Dh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Mh(t,e){return t.h.push(e),e.oa(function(){Y(t.h,e)}),e}function Rh(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Lh(t,e,n){var r=!1;try{this.b=n||w.a.app()}catch(a){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=w.a.SDK_VERSION?xr(w.a.SDK_VERSION,o):null,xh.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,N(S),r)}function Fh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Vh.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Vh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=xh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Mh(this,ke().then(function(){if(Dr()&&!Or())return yr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,eu(t.s,Fs,{})}).then(function(e){t.a[Nh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Rh(this);var t=this;return Mh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!se&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};vt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=pe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ce(o,a)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Rh(this);var t=this;return Mh(this,this.render().then(function(e){return new we(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Rh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Rh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Lh,xh);var Vh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function qh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Bh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Kh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Hh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jh(t){return p(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Yh(t,e){for(var n in e){var r=e[n].name;t[r]=$h(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:O(function(t){return this[t]},n),set:O(function(t,e,n,r){Fh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Xh(t,e,n,r){t[e]=$h(e,n,r)}function $h(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Fh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Yh(nh.prototype,{jb:{name:"applyActionCode",j:[Uh("code")]},Ra:{name:"checkActionCode",j:[Uh("code")]},nb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(Bh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(Bh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Uh("email"),Gh(Bh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Uh("email"),Bh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Uh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wh()]},Tc:{name:"signInWithCustomToken",j:[Uh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Vc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof ml)}},zh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Uh("url"),Bh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Qh(nh.prototype,{lc:{name:"languageCode",kb:Gh(Uh(),zh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Uh(),zh(),"tenantId")}}),(nh.Persistence=Xu).LOCAL="local",nh.Persistence.SESSION="session",nh.Persistence.NONE="none",Yh(ml.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wh()]},qb:{name:"linkWithCredential",j:[Wh()]},Dc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wh()]},tb:{name:"reauthenticateWithCredential",j:[Wh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(Bh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},cd:{name:"unlink",j:[Uh("provider")]},Bb:{name:"updateEmail",j:[Uh("email")]},Cb:{name:"updatePassword",j:[Uh("password")]},ed:{name:"updatePhoneNumber",j:[Wh("phone")]},Db:{name:"updateProfile",j:[Bh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Gh(Bh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),Yh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:qh("appVerificationDisabledForTesting")}}),Yh(Yc.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Xh(co,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Po,Mo,po],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Uh(),Bh(),"json")]),Xh(Ao,"credential",function(t,e){return new xo(t,e)},[Uh("email"),Uh("password")]),Yh(xo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Xh(_o,"credential",Oo,[Gh(Uh(),Bh(),"token")]),Xh(Ao,"credentialWithLink",No,[Uh("email"),Uh("emailLink")]),Yh(Co.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Xh(Co,"credential",Io,[Gh(Uh(),Bh(),"token")]),Yh(To.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Xh(To,"credential",Eo,[Gh(Uh(),Gh(Bh(),zh()),"idToken"),Gh(Uh(),zh(),"accessToken",!0)]),Yh(ko.prototype,{Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Xh(ko,"credential",So,[Gh(Uh(),Bh(),"token"),Uh("secret",!0)]),Yh(wo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Gh(Uh(),Gh(Bh(),zh()),"optionsOrIdToken"),Gh(Uh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Yh(go.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(ho.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Xh(Lo,"credential",Fo,[Uh("verificationId"),Uh("verificationCode")]),Yh(Lo.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Uh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Hh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hh(t.session,uo)&&Jh(t.multiFactorHint):t.session&&t.multiFactorUid?Hh(t.session,uo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Yh(Do.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(E.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Jo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Ho.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(el.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh($c.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Yh(sl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Uh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jh},Uh(),"multiFactorInfoIdentifier")]}}),Yh(Lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xh(Oi,"parseLink",Pi,[Uh("link")]),Xh(Oh,"assertion",function(t){return new ol(t)},[Wh("phone")]),function(){if(void 0===w.a||!w.a.INTERNAL||!w.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:nh,AuthCredential:co,Error:E};Xh(t,"EmailAuthProvider",Ao,[]),Xh(t,"FacebookAuthProvider",_o,[]),Xh(t,"GithubAuthProvider",Co,[]),Xh(t,"GoogleAuthProvider",To,[]),Xh(t,"TwitterAuthProvider",ko,[]),Xh(t,"OAuthProvider",wo,[Uh("providerId")]),Xh(t,"SAMLAuthProvider",yo,[Uh("providerId")]),Xh(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof nh)}}]),Xh(t,"RecaptchaVerifier",Lh,[Gh(Uh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Bh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof w.a.app.App)}}]),Xh(t,"ActionCodeURL",Oi,[]),Xh(t,"PhoneMultiFactorGenerator",Oh,[]),w.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new nh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),w.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),w.a.registerVersion("@firebase/auth","0.16.5"),w.a.INTERNAL.extendNamespace({User:ml})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var _=n("qOnz"),O=n("q/0M"),C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var T,E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},k=k||{},S=E||self;function x(){}function P(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function A(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var N="closure_uid_"+(1e9*Math.random()>>>0),j=0;function D(t,e,n){return t.call.apply(t.bind,arguments)}function M(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function R(t,e,n){return(R=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D:M).apply(null,arguments)}function L(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function F(){return Date.now()}function V(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function U(){this.j=this.j,this.i=this.i}U.prototype.j=!1,U.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,N)&&t[N]||(t[N]=++j)}(this)},U.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function K(t){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t){return/^[\s\xa0]*$/.test(t)}var H,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function G(t,e){return-1!=t.indexOf(e)}function Y(t,e){return t<e?-1:t>e?1:0}t:{var Q=S.navigator;if(Q){var X=Q.userAgent;if(X){H=X;break t}}H=""}function $(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Z(t){var e={};for(var n in t)e[n]=t[n];return e}var tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<tt.length;o++)n=tt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function nt(t){return nt[" "](t),t}nt[" "]=x;var rt,it,ot=G(H,"Opera"),at=G(H,"Trident")||G(H,"MSIE"),st=G(H,"Edge"),ut=st||at,ct=G(H,"Gecko")&&!(G(H.toLowerCase(),"webkit")&&!G(H,"Edge"))&&!(G(H,"Trident")||G(H,"MSIE"))&&!G(H,"Edge"),lt=G(H.toLowerCase(),"webkit")&&!G(H,"Edge");function ht(){var t=S.document;return t?t.documentMode:void 0}t:{var ft="",dt=(it=H,ct?/rv:([^\);]+)(\)|;)/.exec(it):st?/Edge\/([\d\.]+)/.exec(it):at?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(it):lt?/WebKit\/(\S+)/.exec(it):ot?/(?:Version)[ \/]?(\S+)/.exec(it):void 0);if(dt&&(ft=dt?dt[1]:""),at){var pt=ht();if(null!=pt&&pt>parseFloat(ft)){rt=String(pt);break t}}rt=ft}var gt={};function mt(t){return function(t,e){var n=gt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=J(String(rt)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Y(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Y(0==a[2].length,0==s[2].length)||Y(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var vt=S.document&&at&&(ht()||parseInt(rt,10))||void 0,bt=!at||9<=Number(vt),yt=at&&!mt("9"),wt=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{S.addEventListener("test",x,e),S.removeEventListener("test",x,e)}catch(n){}return t}();function _t(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ot(t,e){if(_t.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ct){t:{try{nt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}_t.prototype.b=function(){this.defaultPrevented=!0},V(Ot,_t);var Ct={2:"touch",3:"pen",4:"mouse"};Ot.prototype.b=function(){Ot.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,yt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var It="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function Et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Tt,this.Y=this.Z=!1}function kt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function St(t){this.src=t,this.a={},this.b=0}function xt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=q(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(kt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}St.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Et(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var At="closure_lm_"+(1e6*Math.random()|0),Nt={};function jt(t,e,n,r,i){if(r&&r.once)return Mt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)jt(t,e[o],n,r,i);return null}return n=Kt(n),t&&t[It]?t.va(e,n,A(r)?!!r.capture:!!r,i):Dt(t,e,n,!1,r,i)}function Dt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=A(i)?!!i.capture:!!i;if(a&&!bt)return null;var s=qt(t);if(s||(t[At]=s=new St(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Ut,e=bt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)wt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ft(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mt(t,e[o],n,r,i);return null}return n=Kt(n),t&&t[It]?t.wa(e,n,A(r)?!!r.capture:!!r,i):Dt(t,e,n,!0,r,i)}function Rt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Rt(t,e[o],n,r,i);else r=A(r)?!!r.capture:!!r,n=Kt(n),t&&t[It]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Pt(o=t.a[e],n,r,i))&&(kt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Pt(e,n,r,i)),(n=-1<t?e[t]:null)&&Lt(n))}function Lt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[It])xt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ft(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qt(e))?(xt(n,t),0==n.b&&(n.src=null,e[At]=null)):kt(t)}}}function Ft(t){return t in Nt?Nt[t]:Nt[t]="on"+t}function Vt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Lt(t),n.call(r,e)}function Ut(t,e){if(t.Y)return!0;if(!bt){if(!e)t:{e=["window","event"];for(var n=S,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Vt(t,e=new Ot(e,this))}return Vt(t,new Ot(e,this))}function qt(t){return(t=t[At])instanceof St?t:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(t){return"function"==typeof t?t:(t[Bt]||(t[Bt]=function(e){return t.handleEvent(e)}),t[Bt])}function zt(){U.call(this),this.c=new St(this),this.J=this,this.C=null}function Wt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new _t(e,t);else if(e instanceof _t)e.target=e.target||t;else{var i=e;et(e=new _t(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Ht(a,r,!0,e)&&i}if(i=Ht(a=e.a=t,r,!0,e)&&i,i=Ht(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ht(a=e.a=n[o],r,!1,e)&&i}function Ht(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&xt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}V(zt,U),zt.prototype[It]=!0,(T=zt.prototype).addEventListener=function(t,e,n,r){jt(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){Rt(this,t,e,n,r)},T.G=function(){if(zt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)kt(n[r]);delete e.a[t],e.b--}}this.C=null},T.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},T.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Jt=S.JSON.stringify;function Gt(){this.b=this.a=null}var Yt,Qt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new $t},function(t){t.reset()});function Xt(){var t=ne,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function $t(){this.next=this.b=this.a=null}function Zt(t){S.setTimeout(function(){throw t},0)}function te(t,e){Yt||function(){var t=S.Promise.resolve(void 0);Yt=function(){t.then(re)}}(),ee||(Yt(),ee=!0),ne.add(t,e)}Gt.prototype.add=function(t,e){var n=Qt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$t.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},$t.prototype.reset=function(){this.next=this.b=this.a=null};var ee=!1,ne=new Gt;function re(){for(var t;t=Xt();){try{t.a.call(t.b)}catch(n){Zt(n)}var e=Qt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ee=!1}function ie(t,e){zt.call(this),this.b=t||1,this.a=e||S,this.f=R(this.Za,this),this.g=F()}function oe(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ae(t,e,n){if("function"==typeof t)n&&(t=R(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=R(t.handleEvent,t)}return 2147483647<Number(e)?-1:S.setTimeout(t,e||0)}function se(t){t.a=ae(function(){t.a=null,t.c&&(t.c=!1,se(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}V(ie,zt),(T=ie.prototype).aa=!1,T.M=null,T.Za=function(){if(this.aa){var t=F()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wt(this,"tick"),this.aa&&(oe(this),this.start()))}},T.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=F())},T.G=function(){ie.X.G.call(this),oe(this),delete this.a};var ue=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:se(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(S.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(U);function ce(t){U.call(this),this.b=t,this.a={}}V(ce,U);var le=[];function he(t,e,n,r){Array.isArray(n)||(n&&(le[0]=n.toString()),n=le);for(var i=0;i<n.length;i++){var o=jt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function fe(t){$(t.a,function(t,e){this.a.hasOwnProperty(e)&&Lt(t)},t),t.a={}}function de(){this.a=!0}function pe(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Jt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")})}ce.prototype.G=function(){ce.X.G.call(this),fe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},de.prototype.info=function(){};var ge={},me=null;function ve(){return me=me||new zt}function be(t){_t.call(this,ge.Fa,t)}function ye(t){var e=ve();Wt(e,new be(e,t))}function we(t,e){_t.call(this,ge.STAT_EVENT,t),this.stat=e}function _e(t){var e=ve();Wt(e,new we(e,t))}function Oe(t){_t.call(this,ge.Ga,t)}function Ce(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){t()},e)}ge.Fa="serverreachability",V(be,_t),ge.STAT_EVENT="statevent",V(we,_t),ge.Ga="timingevent",V(Oe,_t);var Ie={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Te={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ee(){}function ke(){}Ee.prototype.a=null;var Se,xe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Pe(){_t.call(this,"d")}function Ae(){_t.call(this,"c")}function Ne(){}function je(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ce(this),this.P=De,this.R=new ie(t=ut?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}V(Pe,_t),V(Ae,_t),V(Ne,Ee),Se=new Ne;var De=45e3,Me={},Re={};function Le(t,e,n){t.H=1,t.i=an(Ze(e)),t.j=n,t.I=!0,Fe(t,null)}function Fe(t,e){t.u=F(),qe(t),t.l=Ze(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),yn(n.b,"t",r),t.D=0,t.a=dr(t.g,t.g.C?e:null),0<t.O&&(t.F=new ue(R(t.Ca,t,t.a),t.O)),he(t.J,t.a,"readystatechange",t.Xa),e=t.B?Z(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ye(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ve(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ue(t,n);if(i==Re){4==e&&(t.h=4,_e(14),r=!1),pe(t.c,t.f,null,"[Incomplete Response]");break}if(i==Me){t.h=4,_e(15),pe(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}pe(t.c,t.f,i,null),He(t,i)}4==e&&0==n.length&&(t.h=1,_e(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),or(e),e.F=!0,_e(11))):(pe(t.c,t.f,n,"[Invalid Chunked Response]"),We(t),ze(t))}function Ue(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Re:(n=Number(e.substring(n,r)),isNaN(n)?Me:(r+=1)+n>e.length?Re:(e=e.substr(r,n),t.D=r+n,e))}function qe(t){t.T=F()+t.P,Be(t,t.P)}function Be(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ce(R(t.Va,t),e)}function Ke(t){t.o&&(S.clearTimeout(t.o),t.o=null)}function ze(t){0==t.g.v||t.A||ur(t.g,t)}function We(t){Ke(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,oe(t.R),fe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function He(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||En(n.b,t)))if(n.I=t.N,!t.C&&En(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(m){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;sr(n),Qn(n)}ir(n),_e(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ce(R(n.Sa,n),6e3));if(1>=Tn(n.b)&&n.ea){try{n.ea()}catch(m){}n.ea=void 0}}else lr(n,11)}else if((t.C||n.a==t)&&sr(n),!W(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(G(l,"spdy")||G(l,"quic")||G(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(kn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,on(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=F()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=fr(u,u.C?u.ga:null,u.fa),d.C){Sn(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Ke(p),qe(p)),u.a=d}else rr(u);0<n.g.length&&Zn(n)}else"stop"!=i[0]&&"close"!=i[0]||lr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?lr(n,7):Yn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ye(4)}catch(m){}}function Je(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(P(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(P(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(P(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ge(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ge)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ye(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Qe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Qe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(T=je.prototype).setTimeout=function(t){this.P=t},T.Xa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},T.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ut&&!this.a.$())){this.A||4!=e||7==n||ye(8==n||0>=r?3:2),Ke(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,_e(12),We(this),ze(this);break t}pe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,He(this,u)}this.I?(Ve(this,e,o),ut&&this.b&&3==e&&(he(this.J,this.R,"tick",this.Wa),this.R.start())):(pe(this.c,this.f,o,null),He(this,o)),4==e&&We(this),this.b&&!this.A&&(4==e?ur(this.g,this):(this.b=!1,qe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,_e(12)):(this.h=0,_e(13)),We(this),ze(this)}}}catch(c){}},T.Wa=function(){if(this.a){var t=Wn(this.a),e=this.a.$();this.D<e.length&&(Ke(this),Ve(this,t,e),this.b&&4!=t&&qe(this))}},T.cancel=function(){this.A=!0,We(this)},T.Va=function(){this.o=null;var t=F();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ye(3),_e(17)),We(this),this.h=2,ze(this)):Be(this,this.T-t)},(T=Ge.prototype).K=function(){Ye(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},T.L=function(){return Ye(this),this.a.concat()},T.get=function(t,e){return Qe(this.b,t)?this.b[t]:e},T.set=function(t,e){Qe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},T.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $e(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof $e){this.a=void 0!==e?e:t.a,tn(this,t.f),this.j=t.j,en(this,t.c),nn(this,t.h),this.g=t.g,e=t.b;var n=new gn;n.c=e.c,e.a&&(n.a=new Ge(e.a),n.b=e.b),rn(this,n),this.i=t.i}else t&&(n=String(t).match(Xe))?(this.a=!!e,tn(this,n[1]||"",!0),this.j=sn(n[2]||""),en(this,n[3]||"",!0),nn(this,n[4]),this.g=sn(n[5]||"",!0),rn(this,n[6]||"",!0),this.i=sn(n[7]||"")):(this.a=!!e,this.b=new gn(null,this.a))}function Ze(t){return new $e(t)}function tn(t,e,n){t.f=n?sn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function en(t,e,n){t.c=n?sn(e,!0):e}function nn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function rn(t,e,n){e instanceof gn?(t.b=e,function(t,e){e&&!t.f&&(mn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(vn(this,e),yn(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=un(e,dn)),t.b=new gn(e,t.a))}function on(t,e,n){t.b.set(e,n)}function an(t){return on(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^F()).toString(36)),t}function sn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,cn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$e.prototype.toString=function(){var t=[],e=this.f;e&&t.push(un(e,ln,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(un(e,ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(un(n,"/"==n.charAt(0)?fn:hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",un(n,pn)),t.join("")};var ln=/[#\/\?@]/g,hn=/[#\?:]/g,fn=/[#\?]/g,dn=/[#\?@]/g,pn=/#/g;function gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mn(t){t.a||(t.a=new Ge,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function vn(t,e){mn(t),e=wn(t,e),Qe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Qe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ye(t)))}function bn(t,e){return mn(t),e=wn(t,e),Qe(t.a.b,e)}function yn(t,e,n){vn(t,e),0<n.length&&(t.c=null,t.a.set(wn(t,e),z(n)),t.b+=n.length)}function wn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(T=gn.prototype).add=function(t,e){mn(this),this.c=null,t=wn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},T.forEach=function(t,e){mn(this),this.a.forEach(function(n,r){B(n,function(n){t.call(e,n,r,this)},this)},this)},T.L=function(){mn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},T.K=function(t){mn(this);var e=[];if("string"==typeof t)bn(this,t)&&(e=K(e,this.a.get(wn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},T.set=function(t,e){return mn(this),this.c=null,bn(this,t=wn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},T.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},T.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var _n=function(){return function(t,e){this.b=t,this.a=e}}();function On(t){this.g=t||Cn,t=S.PerformanceNavigationTiming?0<(t=S.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(S.ia&&S.ia.ya&&S.ia.ya()&&S.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Cn=10;function In(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Tn(t){return t.b?1:t.a?t.a.size:0}function En(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function kn(t,e){t.a?t.a.add(e):t.b=e}function Sn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function xn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=I(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return z(t.c)}function Pn(){}function An(){this.a=new Pn}function Nn(t,e,n){var r=n||"";try{Je(t,function(t,n){var i=t;A(t)&&(i=Jt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Fd){throw e.push(r+"type="+encodeURIComponent("_badmap")),Fd}}function jn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}On.prototype.cancel=function(){var t,e;if(this.c=xn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=I(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Pn.prototype.stringify=function(t){return S.JSON.stringify(t,void 0)},Pn.prototype.parse=function(t){return S.JSON.parse(t,void 0)};var Dn=S.JSON.parse;function Mn(t){zt.call(this),this.headers=new Ge,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Rn,this.D=this.F=!1}V(Mn,zt);var Rn="",Ln=/^https?$/i,Fn=["POST","PUT"];function Vn(t){return"content-type"==t.toLowerCase()}function Un(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,qn(t),Kn(t)}function qn(t){t.u||(t.u=!0,Wt(t,"complete"),Wt(t,"error"))}function Bn(t){if(t.b&&void 0!==k&&(!t.s[1]||4!=Wn(t)||2!=t.W()))if(t.l&&4==Wn(t))ae(t.za,0,t);else if(Wt(t,"readystatechange"),4==Wn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Xe)[1]||null;if(!o&&S.self&&S.self.location){var a=S.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ln.test(o?o.toLowerCase():"")}e=i}if(e)Wt(t,"complete"),Wt(t,"success");else{t.h=6;try{var s=2<Wn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",qn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.a){zn(t);var n=t.a,r=t.s[0]?x:null;t.a=null,t.s=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(Fd){}}}function zn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(S.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Hn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return $(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):on(t,e,n))}function Jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gn(t){this.pa=0,this.g=[],this.c=new de,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Jn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Jn("baseRetryDelayMs",5e3,t),this.Ra=Jn("retryDelaySeedMs",1e4,t),this.Ma=Jn("forwardChannelMaxRetries",2,t),this.ma=Jn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new On(t&&t.concurrentRequestLimit),this.ka=new An,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yn(t){if(Xn(t),3==t.v){var e=t.R++,n=Ze(t.B);on(n,"SID",t.J),on(n,"RID",e),on(n,"TYPE","terminate"),er(t,n),(e=new je(t,t.c,e,void 0)).H=2,e.i=an(Ze(n)),n=!1,S.navigator&&S.navigator.sendBeacon&&(n=S.navigator.sendBeacon(e.i.toString(),"")),!n&&S.Image&&((new Image).src=e.i,n=!0),n||(e.a=dr(e.g,null),e.a.ba(e.i)),e.u=F(),qe(e)}hr(t)}function Qn(t){t.a&&(or(t),t.a.cancel(),t.a=null)}function Xn(t){Qn(t),t.j&&(S.clearTimeout(t.j),t.j=null),sr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&S.clearTimeout(t.h),t.h=null)}function $n(t,e){t.g.push(new _n(t.Oa++,e)),3==t.v&&Zn(t)}function Zn(t){In(t.b)||t.h||(t.h=!0,te(t.Ba,t),t.u=0)}function tr(t,e){var n;n=e?e.f:t.R++;var r=Ze(t.B);on(r,"SID",t.J),on(r,"RID",n),on(r,"AID",t.P),er(t,r),t.i&&t.l&&Hn(r,t.i,t.l),n=new je(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=nr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),kn(t.b,n),Le(n,r,e)}function er(t,e){t.f&&Je({},function(t,n){on(e,n,t)})}function nr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?R(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Nn(l,a,"req"+c+"_")}catch(Wr){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function rr(t){t.a||t.j||(t.T=1,te(t.Aa,t),t.o=0)}function ir(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ce(R(t.Aa,t),cr(t,t.o)),t.o++,0))}function or(t){null!=t.s&&(S.clearTimeout(t.s),t.s=null)}function ar(t){t.a=new je(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ze(t.la);on(e,"RID","rpc"),on(e,"SID",t.J),on(e,"CI",t.H?"0":"1"),on(e,"AID",t.P),er(t,e),on(e,"TYPE","xmlhttp"),t.i&&t.l&&Hn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=an(Ze(e)),n.j=null,n.I=!0,Fe(n,t)}function sr(t){null!=t.m&&(S.clearTimeout(t.m),t.m=null)}function ur(t,e){var n=null;if(t.a==e){sr(t),or(t),t.a=null;var r=2}else{if(!En(t.b,e))return;n=e.s,Sn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=F()-e.u;var i=t.u;Wt(r=ve(),new Oe(r,n,e,i)),Zn(t)}else rr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Tn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ce(R(t.Ba,t,e),cr(t,t.u)),t.u++,0)))}(t,e)||2==r&&ir(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:lr(t,5);break;case 4:lr(t,10);break;case 3:lr(t,6);break;default:lr(t,2)}}function cr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function lr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=R(t.Ya,t);n||(n=new $e("//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||tn(n,"https"),an(n)),function(t,e){var n=new de;if(S.Image){var r=new Image;r.onload=L(jn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=L(jn,n,r,"TestLoadImage: error",!1,e),r.onabort=L(jn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=L(jn,n,r,"TestLoadImage: timeout",!1,e),S.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else _e(2);t.v=0,t.f&&t.f.ra(e),hr(t),Xn(t)}function hr(t){t.v=0,t.I=-1,t.f&&(0==xn(t.b).length&&0==t.g.length||(t.b.c.length=0,z(t.g),t.g.length=0),t.f.qa())}function fr(t,e,n){var r=function(t){return t instanceof $e?Ze(t):new $e(t,void 0)}(n);if(""!=r.c)e&&en(r,e+"."+r.c),nn(r,r.h);else{var i=S.location;r=function(t,e,n,r){var i=new $e(null,void 0);return t&&tn(i,t),e&&en(i,e),n&&nn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&$(t.V,function(t,e){on(r,e,t)}),n=t.na,(e=t.A)&&n&&on(r,e,n),on(r,"VER",t.ha),er(t,r),r}function dr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t.Na)).F=t.C,e}function pr(){}function gr(){if(at&&!(10<=Number(vt)))throw Error("Environmental error: no available transport.")}function mr(t,e){zt.call(this),this.a=new Gn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!W(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new yr(this)}function vr(t){Pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function br(){Ae.call(this),this.status=1}function yr(t){this.a=t}(T=Mn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Se),this.a.onreadystatechange=R(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Un(this,o)}t=n||"";var i=new Ge(this.headers);r&&Je(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Vn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=S.FormData&&t instanceof S.FormData,!(0<=q(Fn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{zn(this),0<this.o&&((this.D=function(t){return at&&mt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=R(this.xa,this)):this.m=ae(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Un(this,o)}},T.xa=function(){void 0!==k&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wt(this,"timeout"),this.abort(8))},T.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wt(this,"complete"),Wt(this,"abort"),Kn(this))},T.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),Mn.X.G.call(this)},T.za=function(){this.j||(this.A||this.l||this.g?Bn(this):this.Ua())},T.Ua=function(){Bn(this)},T.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(it){return-1}},T.$=function(){try{return this.a?this.a.responseText:""}catch(it){return""}},T.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dn(e)}},T.ua=function(){return this.h},T.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(T=Gn.prototype).ha=8,T.v=1,T.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new je(this,this.c,t,void 0),r=this.l;if(this.O&&(r?et(r=Z(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=nr(this,n,e),on(i=Ze(this.B),"RID",t),on(i,"CVER",22),this.A&&on(i,"X-HTTP-Session-Id",this.A),er(this,i),this.i&&r&&Hn(i,this.i,r),kn(this.b,n),this.Ia&&on(i,"TYPE","init"),this.da?(on(i,"$req",e),on(i,"SID","null"),n.U=!0,Le(n,i,null)):Le(n,i,e),this.v=2}}else 3==this.v&&(t?tr(this,t):0==this.g.length||In(this.b)||tr(this))},T.Aa=function(){if(this.j=null,ar(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ce(R(this.Ta,this),t)}},T.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,_e(10),Qn(this),ar(this))},T.Sa=function(){null!=this.m&&(this.m=null,Qn(this),ir(this),_e(19))},T.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),_e(2)):(this.c.info("Failed to ping google.com"),_e(1))},(T=pr.prototype).ta=function(){},T.sa=function(){},T.ra=function(){},T.qa=function(){},T.Ja=function(){},gr.prototype.a=function(t,e){return new mr(t,e)},V(mr,zt),mr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;_e(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=fr(t,null,t.fa),Zn(t)},mr.prototype.close=function(){Yn(this.a)},mr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,$n(this.a,e)}else this.l?((e={}).__data__=Jt(t),$n(this.a,e)):$n(this.a,t)},mr.prototype.G=function(){this.a.f=null,delete this.f,Yn(this.a),delete this.a,mr.X.G.call(this)},V(vr,Pe),V(br,Ae),V(yr,pr),yr.prototype.ta=function(){Wt(this.a,"a")},yr.prototype.sa=function(t){Wt(this.a,new vr(t))},yr.prototype.ra=function(t){Wt(this.a,new br(t))},yr.prototype.qa=function(){Wt(this.a,"b")},gr.prototype.createWebChannel=gr.prototype.a,mr.prototype.send=mr.prototype.h,mr.prototype.open=mr.prototype.g,mr.prototype.close=mr.prototype.close,Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Te.COMPLETE="complete",ke.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",zt.prototype.listen=zt.prototype.va,Mn.prototype.listenOnce=Mn.prototype.wa,Mn.prototype.getLastError=Mn.prototype.Qa,Mn.prototype.getLastErrorCode=Mn.prototype.ua,Mn.prototype.getStatus=Mn.prototype.W,Mn.prototype.getResponseJson=Mn.prototype.Pa,Mn.prototype.getResponseText=Mn.prototype.$,Mn.prototype.send=Mn.prototype.ba;var wr=Ie,_r=Te,Or=ge,Cr=ke,Ir=Mn,Tr=n("mrSG"),Er=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Er.o=-1;var kr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Tr.d)(e,t),e}(Error),xr=new O.b("@firebase/firestore");function Pr(){return xr.logLevel}function Ar(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xr.logLevel<=O.a.DEBUG){var r=e.map(Dr);xr.debug.apply(xr,Object(Tr.g)(["Firestore (8.4.2): "+t],r))}}function Nr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xr.logLevel<=O.a.ERROR){var r=e.map(Dr);xr.error.apply(xr,Object(Tr.g)(["Firestore (8.4.2): "+t],r))}}function jr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xr.logLevel<=O.a.WARN){var r=e.map(Dr);xr.warn.apply(xr,Object(Tr.g)(["Firestore (8.4.2): "+t],r))}}function Dr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Fd){return t}}function Mr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw Nr(e),new Error(e)}function Rr(t,e){t||Mr()}function Lr(t,e){return t}function Fr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Fr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ur(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Br(t){return t+"\0"}var Kr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Sr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Sr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Sr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Sr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ur(this.nanoseconds,t.nanoseconds):Ur(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Kr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Wr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Gr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mr(),void 0===n?n=t.length-e:n>t.length-e&&Mr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Sr(kr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Gr),Qr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Qr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Sr(kr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Sr(kr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Sr(kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Sr(kr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Gr),$r=function(){function t(t){this.fields=t,t.sort(Xr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return qr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Zr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ur(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Zr.EMPTY_BYTE_STRING=new Zr("");var ti=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if(Rr(!!t),"string"==typeof t){var e=0,n=ti.exec(t);if(Rr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ni(t.seconds),nanos:ni(t.nanos)}}function ni(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ri(t){return"string"==typeof t?Zr.fromBase64String(t):Zr.fromUint8Array(t)}function ii(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function oi(t){var e=t.mapValue.fields.__previous_value__;return ii(e)?oi(e):e}function ai(t){var e=ei(t.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}function si(t){return null==t}function ui(t){return 0===t&&1/t==-1/0}function ci(t){return"number"==typeof t&&Number.isInteger(t)&&!ui(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var li=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yr.fromString(e))},t.fromName=function(e){return new t(Yr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yr(e.slice()))},t}();function hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ii(t)?4:10:Mr()}function fi(t,e){var n=hi(t);if(n!==hi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ai(t).isEqual(ai(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ei(t.timestampValue),r=ei(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ri(t.bytesValue).isEqual(ri(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ni(t.geoPointValue.latitude)===ni(e.geoPointValue.latitude)&&ni(t.geoPointValue.longitude)===ni(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ni(t.integerValue)===ni(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ni(t.doubleValue),r=ni(e.doubleValue);return n===r?ui(n)===ui(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qr(t.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wr(n)!==Wr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fi(n[i],r[i])))return!1;return!0}(t,e);default:return Mr()}}function di(t,e){return void 0!==(t.values||[]).find(function(t){return fi(t,e)})}function pi(t,e){var n=hi(t),r=hi(e);if(n!==r)return Ur(n,r);switch(n){case 0:return 0;case 1:return Ur(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ni(t.integerValue||t.doubleValue),r=ni(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return gi(t.timestampValue,e.timestampValue);case 4:return gi(ai(t),ai(e));case 5:return Ur(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ri(t),r=ri(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ur(n[i],r[i]);if(0!==o)return o}return Ur(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ur(ni(t.latitude),ni(e.latitude));return 0!==n?n:Ur(ni(t.longitude),ni(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pi(n[i],r[i]);if(o)return o}return Ur(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ur(r[a],o[a]);if(0!==s)return s;var u=pi(n[r[a]],i[o[a]]);if(0!==u)return u}return Ur(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mr()}}function gi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ur(t,e);var n=ei(t),r=ei(e),i=Ur(n.seconds,r.seconds);return 0!==i?i:Ur(n.nanos,r.nanos)}function mi(t){return vi(t)}function vi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ei(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ri(t.bytesValue).toBase64():"referenceValue"in t?li.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vi(t.fields[o])}return e+"}"}(t.mapValue):Mr();var e}function bi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function yi(t){return!!t&&"integerValue"in t}function wi(t){return!!t&&"arrayValue"in t}function _i(t){return!!t&&"nullValue"in t}function Oi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ci(t){return!!t&&"mapValue"in t}var Ii=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Xr.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return fi(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===hi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=Ci(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)}),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Xr.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Ci(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Ti(t){var e=[];return Hr(t.fields||{},function(t,n){var r=new Xr([t]);if(Ci(n)){var i=Ti(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)}),new $r(e)}var Ei=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,zr.min(),Ii.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ii.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ii.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ki=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Si(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ki(t,e,n,r,i,o,a)}function xi(t){var e=Lr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+mi(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),si(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Bi(e.startAt)),e.endAt&&(n+="|ub:",n+=Bi(e.endAt)),e.h=n}return e.h}function Pi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!zi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!fi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hi(t.startAt,e.startAt)&&Hi(t.endAt,e.endAt)}function Ai(t){return li.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ni=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Tr.d)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ji(t,n,r):"array-contains"===n?new Li(t,r):"in"===n?new Fi(t,r):"not-in"===n?new Vi(t,r):"array-contains-any"===n?new Ui(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Di(t,n):new Mi(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(pi(e,this.value)):null!==e&&hi(this.value)===hi(e)&&this.m(pi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ji=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=li.fromName(r.referenceValue),i}return Object(Tr.d)(e,t),e.prototype.matches=function(t){var e=li.comparator(t.key,this.key);return this.m(e)},e}(Ni),Di=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ri(0,n),r}return Object(Tr.d)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ni),Mi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ri(0,n),r}return Object(Tr.d)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ni);function Ri(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return li.fromName(t.referenceValue)})}var Li=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Tr.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return wi(e)&&di(e.arrayValue,this.value)},e}(Ni),Fi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Tr.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&di(this.value.arrayValue,e)},e}(Ni),Vi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Tr.d)(e,t),e.prototype.matches=function(t){if(di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!di(this.value.arrayValue,e)},e}(Ni),Ui=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Tr.d)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!wi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return di(e.value.arrayValue,t)})},e}(Ni),qi=function(t,e){this.position=t,this.before=e};function Bi(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return mi(t)}).join(",")}var Ki=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?li.comparator(li.fromName(a.referenceValue),n.key):pi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Hi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!fi(t.position[n],e.position[n]))return!1;return!0}var Ji=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function Gi(t,e,n,r,i,o,a,s){return new Ji(t,e,n,r,i,o,a,s)}function Yi(t){return new Ji(t)}function Qi(t){return!si(t.limit)&&"F"===t.limitType}function Xi(t){return!si(t.limit)&&"L"===t.limitType}function $i(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Zi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function to(t){return null!==t.collectionGroup}function eo(t){var e=Lr(t);if(null===e.p){e.p=[];var n=Zi(e),r=$i(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ki(n)),e.p.push(new Ki(Xr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ki(Xr.keyField(),u))}}}return e.p}function no(t){var e=Lr(t);if(!e.T)if("F"===e.limitType)e.T=Si(e.path,e.collectionGroup,eo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=eo(e);r<i.length;r++){var o=i[r];n.push(new Ki(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new qi(e.endAt.position,!e.endAt.before):null,s=e.startAt?new qi(e.startAt.position,!e.startAt.before):null;e.T=Si(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function ro(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function io(t,e){return Pi(no(t),no(e))&&t.limitType===e.limitType}function oo(t){return xi(no(t))+"|lt:"+t.limitType}function ao(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+mi(e.value);var e}).join(", ")+"]"),si(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Bi(t.startAt)),t.endAt&&(e+=", endAt: "+Bi(t.endAt)),"Target("+e+")"}(no(t))+"; limitType="+t.limitType+")"}function so(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):li.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wi(t.startAt,eo(t),e)||t.endAt&&Wi(t.endAt,eo(t),e))}(t,e)}function uo(t){return function(e,n){for(var r=!1,i=0,o=eo(t);i<o.length;i++){var a=o[i],s=co(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function co(t,e,n){var r=t.field.isKeyField()?li.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?pi(r,i):Mr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mr()}}function lo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ui(e)?"-0":e}}function ho(t){return{integerValue:""+t}}function fo(t,e){return ci(e)?ho(e):lo(t,e)}var po=function(){this._=void 0};function go(t,e,n){return t instanceof bo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof yo?wo(t,e):t instanceof _o?Oo(t,e):function(t,e){var n=vo(t,e),r=Io(n)+Io(t.A);return yi(n)&&yi(t.A)?ho(r):lo(t.R,r)}(t,e)}function mo(t,e,n){return t instanceof yo?wo(t,e):t instanceof _o?Oo(t,e):n}function vo(t,e){return t instanceof Co?yi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e}(po),yo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Tr.d)(e,t),e}(po);function wo(t,e){for(var n=To(e),r=function(t){n.some(function(e){return fi(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Tr.d)(e,t),e}(po);function Oo(t,e){for(var n=To(e),r=function(t){n=n.filter(function(e){return!fi(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Co=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Tr.d)(e,t),e}(po);function Io(t){return ni(t.integerValue||t.doubleValue)}function To(t){return wi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Eo=function(t,e){this.field=t,this.transform=e},ko=function(t,e){this.version=t,this.transformResults=e},So=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function xo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Po=function(){};function Ao(t,e,n){t instanceof Ro?function(t,e,n){var r=t.value.clone(),i=Vo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Lo?function(t,e,n){if(xo(t.precondition,e)){var r=Vo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Fo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n){t instanceof Ro?function(t,e,n){if(xo(t.precondition,e)){var r=t.value.clone(),i=Uo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Mo(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Lo?function(t,e,n){if(xo(t.precondition,e)){var r=Uo(t.fieldTransforms,n,e),i=e.data;i.setAll(Fo(t)),i.setAll(r),e.convertToFoundDocument(Mo(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){xo(t.precondition,e)&&e.convertToNoDocument(zr.min())}(t,e)}function jo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=vo(o.transform,a||null);null!=s&&(null==n&&(n=Ii.empty()),n.set(o.field,s))}return n||null}function Do(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qr(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof yo&&e instanceof yo||t instanceof _o&&e instanceof _o?qr(t.elements,e.elements,fi):t instanceof Co&&e instanceof Co?fi(t.A,e.A):t instanceof bo&&e instanceof bo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Mo(t){return t.isFoundDocument()?t.version:zr.min()}var Ro=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Tr.d)(e,t),e}(Po),Lo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(Tr.d)(e,t),e}(Po);function Fo(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Vo(t,e,n){var r=new Map;Rr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,mo(a,s,n[i]))}return r}function Uo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,go(s,u,e))}return r}var qo,Bo,Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Tr.d)(e,t),e}(Po),zo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Tr.d)(e,t),e}(Po),Wo=function(t){this.count=t};function Ho(t){switch(t){case kr.OK:return Mr();case kr.CANCELLED:case kr.UNKNOWN:case kr.DEADLINE_EXCEEDED:case kr.RESOURCE_EXHAUSTED:case kr.INTERNAL:case kr.UNAVAILABLE:case kr.UNAUTHENTICATED:return!1;case kr.INVALID_ARGUMENT:case kr.NOT_FOUND:case kr.ALREADY_EXISTS:case kr.PERMISSION_DENIED:case kr.FAILED_PRECONDITION:case kr.ABORTED:case kr.OUT_OF_RANGE:case kr.UNIMPLEMENTED:case kr.DATA_LOSS:return!0;default:return Mr()}}function Jo(t){if(void 0===t)return Nr("GRPC error has no .code"),kr.UNKNOWN;switch(t){case qo.OK:return kr.OK;case qo.CANCELLED:return kr.CANCELLED;case qo.UNKNOWN:return kr.UNKNOWN;case qo.DEADLINE_EXCEEDED:return kr.DEADLINE_EXCEEDED;case qo.RESOURCE_EXHAUSTED:return kr.RESOURCE_EXHAUSTED;case qo.INTERNAL:return kr.INTERNAL;case qo.UNAVAILABLE:return kr.UNAVAILABLE;case qo.UNAUTHENTICATED:return kr.UNAUTHENTICATED;case qo.INVALID_ARGUMENT:return kr.INVALID_ARGUMENT;case qo.NOT_FOUND:return kr.NOT_FOUND;case qo.ALREADY_EXISTS:return kr.ALREADY_EXISTS;case qo.PERMISSION_DENIED:return kr.PERMISSION_DENIED;case qo.FAILED_PRECONDITION:return kr.FAILED_PRECONDITION;case qo.ABORTED:return kr.ABORTED;case qo.OUT_OF_RANGE:return kr.OUT_OF_RANGE;case qo.UNIMPLEMENTED:return kr.UNIMPLEMENTED;case qo.DATA_LOSS:return kr.DATA_LOSS;default:return Mr()}}(Bo=qo||(qo={}))[Bo.OK=0]="OK",Bo[Bo.CANCELLED=1]="CANCELLED",Bo[Bo.UNKNOWN=2]="UNKNOWN",Bo[Bo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bo[Bo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bo[Bo.NOT_FOUND=5]="NOT_FOUND",Bo[Bo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bo[Bo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bo[Bo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bo[Bo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bo[Bo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bo[Bo.ABORTED=10]="ABORTED",Bo[Bo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bo[Bo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bo[Bo.INTERNAL=13]="INTERNAL",Bo[Bo.UNAVAILABLE=14]="UNAVAILABLE",Bo[Bo.DATA_LOSS=15]="DATA_LOSS";var Go=function(){function t(t,e){this.comparator=t,this.root=e||Qo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Yo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Yo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!0)},t}(),Yo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Qo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mr();if(this.right.isRed())throw Mr();var t=this.left.check();if(t!==this.right.check())throw Mr();return t+(this.isRed()?0:1)},t}();Qo.EMPTY=null,Qo.RED=!0,Qo.BLACK=!1,Qo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Xo=function(){function t(t){this.comparator=t,this.data=new Go(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new $o(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new $o(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),$o=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Zo=new Go(li.comparator);function ta(){return Zo}var ea=new Go(li.comparator);function na(){return ea}var ra=new Go(li.comparator);function ia(){return ra}var oa=new Xo(li.comparator);function aa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=oa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var sa=new Xo(Ur);function ua(){return sa}var ca=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,la.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(zr.min(),r,ua(),ta(),aa())},t}(),la=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Zr.EMPTY_BYTE_STRING,n,aa(),aa(),aa())},t}(),ha=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},fa=function(t,e){this.targetId=t,this.V=e},da=function(t,e,n,r){void 0===n&&(n=Zr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},pa=function(){function t(){this.S=0,this.D=va(),this.C=Zr.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=aa(),e=aa(),n=aa();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mr()}}),new la(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=va()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ga=function(){function t(t){this.W=t,this.G=new Map,this.H=ta(),this.J=ma(),this.Y=new Xo(Ur)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Mr()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ai(i))if(0===n){var o=new li(i.path);this.tt(e,o,Ei.newNoDocument(o,zr.min()))}else Rr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Ai(o.target)){var a=new li(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Ei.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=aa();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ca(t,n,this.Y,this.H,r);return this.H=ta(),this.J=ma(),this.Y=new Xo(Ur),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new pa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Xo(Ur),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ar("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new pa),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ma(){return new Go(li.comparator)}function va(){return new Go(li.comparator)}var ba={asc:"ASCENDING",desc:"DESCENDING"},ya={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wa=function(t,e){this.databaseId=t,this.I=e};function _a(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oa(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ca(t,e){return _a(t,e.toTimestamp())}function Ia(t){return Rr(!!t),zr.fromTimestamp(function(t){var e=ei(t);return new Kr(e.seconds,e.nanos)}(t))}function Ta(t,e){return function(t){return new Yr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ea(t){var e=Yr.fromString(t);return Rr(Qa(e)),e}function ka(t,e){return Ta(t.databaseId,e.path)}function Sa(t,e){var n=Ea(e);if(n.get(1)!==t.databaseId.projectId)throw new Sr(kr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Sr(kr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new li(Na(n))}function xa(t,e){return Ta(t.databaseId,e)}function Pa(t){var e=Ea(t);return 4===e.length?Yr.emptyPath():Na(e)}function Aa(t){return new Yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Na(t){return Rr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ja(t,e,n){return{name:ka(t,e),fields:n.toProto().mapValue.fields}}function Da(t,e,n){var r=Sa(t,e.name),i=Ia(e.updateTime),o=new Ii({mapValue:{fields:e.fields}}),a=Ei.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ma(t,e){var n;if(e instanceof Ro)n={update:ja(t,e.key,e.value)};else if(e instanceof Ko)n={delete:ka(t,e.key)};else if(e instanceof Lo)n={update:ja(t,e.key,e.data),updateMask:Ya(e.fieldMask)};else{if(!(e instanceof zo))return Mr();n={verify:ka(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof bo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _o)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Co)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Mr()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ca(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Mr()}(t,e.precondition)),n}function Ra(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?So.updateTime(Ia(t.updateTime)):void 0!==t.exists?So.exists(t.exists):So.none()}(e.currentDocument):So.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Rr("REQUEST_TIME"===e.setToServerValue),n=new bo):"appendMissingElements"in e?n=new yo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new _o(e.removeAllFromArray.values||[]):"increment"in e?n=new Co(t,e.increment):Mr();var r=Xr.fromServerFormat(e.fieldPath);return new Eo(r,n)}(t,e)}):[];if(e.update){var i=Sa(t,e.update.name),o=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new $r((t.fieldPaths||[]).map(function(t){return Xr.fromServerFormat(t)}))}(e.updateMask);return new Lo(i,o,a,n,r)}return new Ro(i,o,n,r)}if(e.delete){var s=Sa(t,e.delete);return new Ko(s,n)}if(e.verify){var u=Sa(t,e.verify);return new zo(u,n)}return Mr()}function La(t,e){return{documents:[xa(t,e.path)]}}function Fa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Oi(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(_i(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Oi(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(_i(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:za(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Wa(t.field),direction:Ka(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||si(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=qa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qa(e.endAt)),n}function Va(t){var e=Pa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ua(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(t){return function(t){return new Ki(Ha(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return si(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ba(n.startAt));var l=null;return n.endAt&&(l=Ba(n.endAt)),Gi(e,i,s,a,u,"F",c,l)}function Ua(t){return t?void 0!==t.unaryFilter?[Ga(t)]:void 0!==t.fieldFilter?[Ja(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ua(t)}).reduce(function(t,e){return t.concat(e)}):Mr():[]}function qa(t){return{before:t.before,values:t.position}}function Ba(t){return new qi(t.values||[],!!t.before)}function Ka(t){return ba[t]}function za(t){return ya[t]}function Wa(t){return{fieldPath:t.canonicalString()}}function Ha(t){return Xr.fromServerFormat(t.fieldPath)}function Ja(t){return Ni.create(Ha(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ga(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ha(t.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ha(t.unaryFilter.field);return Ni.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ha(t.unaryFilter.field);return Ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ha(t.unaryFilter.field);return Ni.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mr()}}function Ya(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Qa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Xa(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Za(e)),e=$a(t.get(n),e);return Za(e)}function $a(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Za(t){return t+"\x01\x01"}function ts(t){var e=t.length;if(Rr(e>=2),2===e)return Rr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Mr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Mr()}o=a+2}return new Yr(r)}var es=function(t,e){this.seconds=t,this.nanoseconds=e},ns=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ns.store="owner",ns.key="owner";var rs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};rs.store="mutationQueues",rs.keyPath="userId";var is=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};is.store="mutations",is.keyPath="batchId",is.userMutationsIndex="userMutationsIndex",is.userMutationsKeyPath=["userId","batchId"];var os=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Xa(e)]},t.key=function(t,e,n){return[t,Xa(e),n]},t}();os.store="documentMutations",os.PLACEHOLDER=new os;var as=function(t,e){this.path=t,this.readTime=e},ss=function(t,e){this.path=t,this.version=e},us=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};us.store="remoteDocuments",us.readTimeIndex="readTimeIndex",us.readTimeIndexPath="readTime",us.collectionReadTimeIndex="collectionReadTimeIndex",us.collectionReadTimeIndexPath=["parentPath","readTime"];var cs=function(t){this.byteSize=t};cs.store="remoteDocumentGlobal",cs.key="remoteDocumentGlobalKey";var ls=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};ls.store="targets",ls.keyPath="targetId",ls.queryTargetsIndexName="queryTargetsIndex",ls.queryTargetsKeyPath=["canonicalId","targetId"];var hs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hs.store="targetDocuments",hs.keyPath=["targetId","path"],hs.documentTargetsIndex="documentTargetsIndex",hs.documentTargetsKeyPath=["path","targetId"];var fs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fs.key="targetGlobalKey",fs.store="targetGlobal";var ds=function(t,e){this.collectionId=t,this.parent=e};ds.store="collectionParents",ds.keyPath=["collectionId","parent"];var ps=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ps.store="clientMetadata",ps.keyPath="clientId";var gs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gs.store="bundles",gs.keyPath="bundleId";var ms=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ms.store="namedQueries",ms.keyPath="name";var vs=Object(Tr.g)(Object(Tr.g)([],Object(Tr.g)(Object(Tr.g)([],Object(Tr.g)(Object(Tr.g)([],Object(Tr.g)(Object(Tr.g)([],[rs.store,is.store,os.store,us.store,ls.store,ns.store,fs.store,hs.store]),[ps.store])),[cs.store])),[ds.store])),[gs.store,ms.store]),bs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ys=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),ws=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},_s=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Mr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Os=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ws,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ts(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ps(e.target.error);n.ft.reject(new Ts(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ts(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ar("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ks(e)},t}(),Cs=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(_.q)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ar("SimpleDb","Removing database:",t),Ss(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(_.q)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Ar("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ts(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Sr(kr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ts(t,n))},i.onupgradeneeded=function(t){Ar("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Ar("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return Object(Tr.e)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=Os.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch(function(t){return e.abort(t),_s.reject(t)}).toPromise(),u={},a.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return Ar("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Is=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ss(this.Pt.delete())},t}(),Ts=function(t){function e(e,n){var r=this;return(r=t.call(this,kr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Tr.d)(e,t),e}(Sr);function Es(t){return"IndexedDbTransactionError"===t.name}var ks=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ar("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ar("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ss(n)},t.prototype.add=function(t){return Ar("SimpleDb","ADD",this.store.name,t,t),Ss(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ss(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ar("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ar("SimpleDb","DELETE",this.store.name,t),Ss(this.store.delete(t))},t.prototype.count=function(){return Ar("SimpleDb","COUNT",this.store.name),Ss(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Ar("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new _s(function(n,r){e.onerror=function(t){var e=Ps(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new _s(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Is(i),a=e(i.primaryKey,i.value,o);if(a instanceof _s){var s=a.catch(function(t){return o.done(),_s.reject(t)});n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return _s.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ss(t){return new _s(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Ps(t.target.error);n(e)}})}var xs=!1;function Ps(t){var e=Cs._t(Object(_.q)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Sr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xs||(xs=!0,setTimeout(function(){throw r},0)),r}}return t}var As=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Tr.d)(e,t),e}(ys);function Ns(t,e){var n=Lr(t);return Cs.It(n.Mt,e)}var js=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ao(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&No(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&No(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zr.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},aa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qr(this.mutations,t.mutations,function(t,e){return Do(t,e)})&&qr(this.baseMutations,t.baseMutations,function(t,e){return Do(t,e)})},t}(),Ds=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Rr(e.mutations.length===r.length);for(var i=ia(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ms=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=zr.min()),void 0===o&&(o=zr.min()),void 0===a&&(a=Zr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Rs=function(t){this.Lt=t};function Ls(t,e){if(e.document)return Da(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=li.fromSegments(e.noDocument.path),r=Bs(e.noDocument.readTime),i=Ei.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=li.fromSegments(e.unknownDocument.path);return r=Bs(e.unknownDocument.version),Ei.newUnknownDocument(o,r)}return Mr()}function Fs(t,e,n){var r=Vs(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ka(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:_a(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new us(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=qs(e.version);return a=e.hasCommittedMutations,new us(null,new as(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=qs(e.version);return new us(new ss(c,l),null,null,!0,r,i)}return Mr()}function Vs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Us(t){var e=new Kr(t[0],t[1]);return zr.fromTimestamp(e)}function qs(t){var e=t.toTimestamp();return new es(e.seconds,e.nanoseconds)}function Bs(t){var e=new Kr(t.seconds,t.nanoseconds);return zr.fromTimestamp(e)}function Ks(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ra(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ra(t.Lt,e)}),o=Kr.fromMillis(e.localWriteTimeMs);return new js(e.batchId,o,n,i)}function zs(t){var e,n,r=Bs(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Bs(t.lastLimboFreeSnapshotVersion):zr.min();return void 0!==t.query.documents?(Rr(1===(n=t.query).documents.length),e=no(Yi(Pa(n.documents[0])))):e=function(t){return no(Va(t))}(t.query),new Ms(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Zr.fromBase64String(t.resumeToken))}function Ws(t,e){var n,r=qs(e.snapshotVersion),i=qs(e.lastLimboFreeSnapshotVersion);n=Ai(e.target)?La(t.Lt,e.target):Fa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ls(e.targetId,xi(e.target),r,o,e.sequenceNumber,i,n)}function Hs(t){var e=Va({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ro(e,e.limit,"L"):e}var Js=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Gs(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Bs(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Gs(t).put({bundleId:(n=e).id,createTime:qs(Ia(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ys(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Hs(e.bundledQuery),readTime:Bs(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Ys(t).put(function(t){return{name:t.name,readTime:qs(Ia(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Gs(t){return Ns(t,gs.store)}function Ys(t){return Ns(t,ms.store)}var Qs=function(){function t(){this.Bt=new Xs}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),_s.resolve()},t.prototype.getCollectionParents=function(t,e){return _s.resolve(this.Bt.getEntries(e))},t}(),Xs=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Xo(Yr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Xo(Yr.comparator)).toArray()},t}(),$s=function(){function t(){this.qt=new Xs}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Xa(i)};return Zs(t).put(o)}return _s.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Br(e),""],!1,!0);return Zs(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ts(o.parent))}return n})},t}();function Zs(t){return Ns(t,ds.store)}var tu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function nu(t,e,n){var r=t.store(is.store),i=t.store(os.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){Rr(1===s)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=os.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return _s.waitFor(o).next(function(){return c})}function ru(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mr();e=t.noDocument}return JSON.stringify(e).length}eu.DEFAULT_COLLECTION_PERCENTILE=10,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eu.DEFAULT=new eu(41943040,eu.DEFAULT_COLLECTION_PERCENTILE,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eu.DISABLED=new eu(-1,0,0);var iu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Rr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(t).Ot({index:is.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=su(t),a=au(t);return a.add({}).next(function(s){Rr("number"==typeof s);for(var u=new js(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ma(t.Lt,e)}),i=n.mutations.map(function(e){return Ma(t.Lt,e)});return new is(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Xo(function(t,e){return Ur(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=os.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,os.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[s]=u.keys()}),_s.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return au(t).get(e).next(function(t){return t?(Rr(t.userId===n.userId),Ks(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?_s.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return au(t).Ot({index:is.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Rr(e.batchId>=r),o=Ks(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return au(t).Ot({index:is.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(t).Nt(is.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ks(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=os.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return su(t).Ot({range:i},function(r,i,a){var s=r[0],u=r[2],c=ts(r[1]);if(s===n.userId&&e.path.isEqual(c))return au(t).get(u).next(function(t){if(!t)throw Mr();Rr(t.userId===n.userId),o.push(Ks(n.R,t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xo(Ur),i=[];return e.forEach(function(e){var o=os.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=su(t).Ot({range:a},function(t,i,o){var a=t[0],s=t[2],u=ts(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),_s.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=os.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Xo(Ur);return su(t).Ot({range:a},function(t,e,o){var a=t[0],u=t[2],c=ts(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.Wt(t,s)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(au(t).get(e).next(function(t){if(null===t)throw Mr();Rr(t.userId===n.userId),r.push(Ks(n.R,t))}))}),_s.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return nu(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),_s.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return _s.resolve();var r=IDBKeyRange.lowerBound(os.prefixForUser(e.userId)),i=[];return su(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=ts(t[1]);i.push(o)}else r.done()}).next(function(){Rr(0===i.length)})})},t.prototype.containsKey=function(t,e){return ou(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return uu(t).get(this.userId).next(function(t){return t||new rs(e.userId,-1,"")})},t}();function ou(t,e,n){var r=os.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return su(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function au(t){return Ns(t,is.store)}function su(t){return Ns(t,os.store)}function uu(t){return Ns(t,rs.store)}var cu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),lu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new cu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return zr.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return hu(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Rr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return hu(t).Ot(function(a,s){var u=zs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return _s.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return hu(t).Ot(function(t,n){var r=zs(n);e(r)})},t.prototype.Xt=function(t){return fu(t).get(fs.key).next(function(t){return Rr(null!==t),t})},t.prototype.Zt=function(t,e){return fu(t).put(fs.key,e)},t.prototype.te=function(t,e){return hu(t).put(Ws(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=xi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hu(t).Ot({range:r,index:ls.queryTargetsIndexName},function(t,n,r){var o=zs(n);Pi(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=du(t);return e.forEach(function(e){var a=Xa(e.path);i.push(o.put(new hs(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))}),_s.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=du(t);return _s.forEach(e,function(e){var o=Xa(e.path);return _s.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=du(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=du(t),i=aa();return r.Ot({range:n,kt:!0},function(t,e,n){var r=ts(t[1]),o=new li(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Xa(e.path),r=IDBKeyRange.bound([n],[Br(n)],!1,!0),i=0;return du(t).Ot({index:hs.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return hu(t).get(e).next(function(t){return t?zs(t):null})},t}();function hu(t){return Ns(t,ls.store)}function fu(t){return Ns(t,fs.store)}function du(t){return Ns(t,hs.store)}function pu(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){if(t.code!==kr.FAILED_PRECONDITION||t.message!==bs)throw t;return Ar("LocalStore","Unexpectedly lost primary lease"),[2]})})}function gu(t,e){var n=t[1],r=e[1],i=Ur(t[0],e[0]);return 0===i?Ur(n,r):i}var mu=function(){function t(t){this.ne=t,this.buffer=new Xo(gu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),vu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ar("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Tr.b)(e,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Es(e=n.sent())?(Ar("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,pu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),bu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return _s.resolve(Er.o);var r=new mu(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector","Garbage collection skipped; disabled"),_s.resolve(tu)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tu):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ar("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Pr()<=O.a.DEBUG&&Ar("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),_s.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),yu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new bu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return wu(t,n)},t.prototype.removeReference=function(t,e,n){return wu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return wu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return uu(t).$t(function(r){return ou(t,r,e).next(function(t){return t&&(n=!0),_s.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(a,s){if(s<=e){var u=n._e(t,a).next(function(e){if(!e)return o++,r.getEntry(t,a).next(function(){return r.removeEntry(a),du(t).delete([0,Xa(a.path)])})});i.push(u)}}).next(function(){return _s.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return wu(t,e)},t.prototype.we=function(t,e){var n,r=du(t),i=Er.o;return r.Ot({index:hs.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Er.o&&e(new li(ts(n)),i),i=a,n=o):i=Er.o}).next(function(){i!==Er.o&&e(new li(ts(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function wu(t,e){return du(t).put(function(t,e){return new hs(0,Xa(t.path),e)}(e,t.currentSequenceNumber))}var _u=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Hr(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Jr(this.inner)},t}(),Ou=function(){function t(){this.changes=new _u(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:zr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ei.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?_s.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Cu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Eu(t).put(ku(e),n)},t.prototype.removeEntry=function(t,e){var n=Eu(t),r=ku(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Eu(t).get(ku(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Eu(t).get(ku(e)).next(function(t){return{document:n.ye(e,t),size:ru(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ta();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ta(),i=new Go(li.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ru(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return _s.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Eu(t).Ot({range:r},function(t,e,r){for(var a=li.fromSegments(t);o&&li.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ta(),o=e.path.length+1,a={};if(n.isEqual(zr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Vs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=us.collectionReadTimeIndex}return Eu(t).Ot(a,function(t,n,a){if(t.length===o){var s=Ls(r.R,n);e.path.isPrefixOf(s.key.path)?so(e,s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Iu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Tu(t).get(cs.key).next(function(t){return Rr(!!t),t})},t.prototype.me=function(t,e){return Tu(t).put(cs.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ls(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(zr.min()))return n}return Ei.newInvalidDocument(t)},t}(),Iu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new _u(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Tr.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Xo(function(t,e){return Ur(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Fs(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ru(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Fs(e.Ie.R,Ei.newNoDocument(o,zr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),_s.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ou);function Tu(t){return Ns(t,cs.store)}function Eu(t){return Ns(t,us.store)}function ku(t){return t.path.toArray()}var Su=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Rr(n<r&&n>=0&&r<=11);var o=new Os("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ns.store)}(t),function(t){t.createObjectStore(rs.store,{keyPath:rs.keyPath}),t.createObjectStore(is.store,{keyPath:is.keyPath,autoIncrement:!0}).createIndex(is.userMutationsIndex,is.userMutationsKeyPath,{unique:!0}),t.createObjectStore(os.store)}(t),xu(t),function(t){t.createObjectStore(us.store)}(t));var a=_s.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(hs.store),t.deleteObjectStore(ls.store),t.deleteObjectStore(fs.store)}(t),xu(t)),a=a.next(function(){return function(t){var e=t.store(fs.store),n=new fs(0,0,zr.min().toTimestamp(),0);return e.put(fs.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return function(t,e){return e.store(is.store).Nt().next(function(n){t.deleteObjectStore(is.store),t.createObjectStore(is.store,{keyPath:is.keyPath,autoIncrement:!0}).createIndex(is.userMutationsIndex,is.userMutationsKeyPath,{unique:!0});var r=e.store(is.store),i=n.map(function(t){return r.put(t)});return _s.waitFor(i)})}(t,o)})),a=a.next(function(){!function(t){t.createObjectStore(ps.store,{keyPath:ps.keyPath})}(t)})),n<5&&r>=5&&(a=a.next(function(){return i.Re(o)})),n<6&&r>=6&&(a=a.next(function(){return function(t){t.createObjectStore(cs.store)}(t),i.be(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ve(o)})),n<8&&r>=8&&(a=a.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(a=a.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(us.store);e.createIndex(us.readTimeIndex,us.readTimeIndexPath,{unique:!1}),e.createIndex(us.collectionReadTimeIndex,us.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(a=a.next(function(){return i.Ve(o)})),n<11&&r>=11&&(a=a.next(function(){!function(t){t.createObjectStore(gs.store,{keyPath:gs.keyPath})}(t),function(t){t.createObjectStore(ms.store,{keyPath:ms.keyPath})}(t)})),a},t.prototype.be=function(t){var e=0;return t.store(us.store).Ot(function(t,n){e+=ru(n)}).next(function(){var n=new cs(e);return t.store(cs.store).put(cs.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(rs.store),r=t.store(is.store);return n.Nt().next(function(n){return _s.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(is.userMutationsIndex,i).next(function(r){return _s.forEach(r,function(r){Rr(r.userId===n.userId);var i=Ks(e.R,r);return nu(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(hs.store),n=t.store(us.store);return t.store(fs.store).get(fs.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Yr(n),a=function(t){return[0,Xa(t)]}(o);r.push(e.get(a).next(function(n){return n?_s.resolve():function(n){return e.put(new hs(0,Xa(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return _s.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(ds.store,{keyPath:ds.keyPath});var n=e.store(ds.store),r=new Xs,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Xa(i)})}};return e.store(us.store).Ot({kt:!0},function(t,e){var n=new Yr(t);return i(n.popLast())}).next(function(){return e.store(os.store).Ot({kt:!0},function(t,e){var n=ts(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(ls.store);return n.Ot(function(t,r){var i=zs(r),o=Ws(e.R,i);return n.put(o)})},t}();function xu(t){t.createObjectStore(hs.store,{keyPath:hs.keyPath}).createIndex(hs.documentTargetsIndex,hs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ls.store,{keyPath:ls.keyPath}).createIndex(ls.queryTargetsIndexName,ls.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fs.store)}var Pu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Au=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Sr(kr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yu(this,i),this.Le=n+"main",this.R=new Rs(u),this.Be=new Cs(this.Le,11,new Su(this.R)),this.qe=new lu(this.referenceDelegate,this.R),this.Ut=new $s,this.Ue=function(t,e){return new Cu(t,e)}(this.R,this.Ut),this.Qe=new Js,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Sr(kr.FAILED_PRECONDITION,Pu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Er(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Tr.b)(e,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Tr.b)(e,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Tr.b)(e,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ju(e).put(new ps(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Es(e))return Ar("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ar("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Nu(t).get(ns.key).next(function(t){return _s.resolve(e.tn(t))})},t.prototype.en=function(t){return ju(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ns(t,ps.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return _s.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?_s.resolve(!0):Nu(t).get(ns.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Sr(kr.FAILED_PRECONDITION,Pu);return!1}}return!(!e.networkEnabled||!e.inForeground)||ju(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Ar("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t=this;return Object(Tr.e)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ns.store,ps.store],function(e){var n=new As(e,Er.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ju(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return iu.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ar("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",vs,function(o){return r=new As(o,i.Ne?i.Ne.next():Er.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Nr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Sr(kr.FAILED_PRECONDITION,bs);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Nu(t).get(ns.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Sr(kr.FAILED_PRECONDITION,Pu)})},t.prototype.Ze=function(t){var e=new ns(this.clientId,this.allowTabSynchronization,Date.now());return Nu(t).put(ns.key,e)},t.yt=function(){return Cs.yt()},t.prototype.Xe=function(t){var e=this,n=Nu(t);return n.get(ns.key).next(function(t){return e.tn(t)?(Ar("IndexedDbPersistence","Releasing primary lease."),n.delete(ns.key)):_s.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Nr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ar("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Nr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Nr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Nu(t){return Ns(t,ns.store)}function ju(t){return Ns(t,ps.store)}function Du(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mu=function(t,e){this.progress=t,this.wn=e},Ru=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return li.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):to(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new li(e)).next(function(t){var e=na();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=na();return this.Ut.getCollectionParents(t,i).next(function(a){return _s.forEach(a,function(a){var s=function(t,e){return new Ji(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Ei.newInvalidDocument(c),r=r.insert(c,l)),No(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){so(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=aa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Lo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Lu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=aa(),i=aa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Fu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(zr.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var a=i.Cn(e,o);return(Qi(e)||Xi(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Pr()<=O.a.DEBUG&&Ar("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ao(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return a.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Xo(uo(t));return e.forEach(function(e,r){so(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Pr()<=O.a.DEBUG&&Ar("QueryEngine","Using full collection scan to execute query:",ao(e)),this.Sn.getDocumentsMatchingQuery(t,e,zr.min())},t}(),Vu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Go(Ur),this.kn=new _u(function(t){return xi(t)},Pi),this.On=zr.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ru(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Uu(t,e,n,r){return new Vu(t,e,n,r)}function qu(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return n=Lr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Ru(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],a=aa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)a=a.add(m[g].key)}return i.pn(t,a).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Bu(t,e){var n=Lr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=_s.resolve();return o.forEach(function(t){a=a.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Rr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),a.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Ku(t){var e=Lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function zu(t,e){var n=Lr(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach(function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Rr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}});var s=ta();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),a.push(Wu(t,o,e.documentUpdates,r,void 0).next(function(t){s=t})),!r.isEqual(zr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});a.push(u)}return _s.waitFor(a).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,s)}).next(function(){return s})}).then(function(t){return n.Fn=i,t})}function Wu(t,e,n,r,i){var o=aa();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ta();return n.forEach(function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(zr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ar("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),o})}function Hu(t,e){var n=Lr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Ju(t,e){var n=Lr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?_s.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Ms(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Gu(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:r=Lr(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Es(a=s.sent()))throw a;return Ar("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Yu(t,e,n){var r=Lr(t),i=zr.min(),o=aa();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Lr(t),i=r.kn.get(n);return void 0!==i?_s.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,no(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:zr.min(),n?o:aa())}).next(function(t){return{documents:t,Bn:o}})})}function Qu(t,e){var n=Lr(t),r=Lr(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Xu(t){var e=Lr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Lr(t),i=ta(),o=Vs(n),a=Eu(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:us.readTimeIndex,range:s},function(t,e){var n=Ls(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Us(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function $u(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){return[2,(e=Lr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Eu(t),n=zr.min();return e.Ot({index:us.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Us(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Zu(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,f,d;return Object(Tr.e)(this,function(p){switch(p.label){case 0:for(i=Lr(t),o=aa(),a=ta(),s=ia(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Ju(i,function(t){return no(Yi(Yr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Wu(t,f,a,zr.min(),s).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function tc(t,e,n){return void 0===n&&(n=aa()),Object(Tr.b)(this,void 0,void 0,function(){var r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return[4,Ju(t,no(Hs(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Lr(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ia(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Zr.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var ec=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return _s.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ia(n.createTime)}),_s.resolve()},t.prototype.getNamedQuery=function(t,e){return _s.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Hs(t.bundledQuery),readTime:Ia(t.readTime)}}(e)),_s.resolve()},t}(),nc=function(){function t(){this.Wn=new Xo(rc.Gn),this.zn=new Xo(rc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new rc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new rc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new li(new Yr([])),r=new rc(n,t),i=new rc(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new li(new Yr([])),n=new rc(e,t),r=new rc(e,t+1),i=aa();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new rc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),rc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return li.comparator(t.key,e.key)||Ur(t.ns,e.ns)},t.Hn=function(t,e){return Ur(t.ns,e.ns)||li.comparator(t.key,e.key)},t}(),ic=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Xo(rc.Gn)}return t.prototype.checkEmpty=function(t){return _s.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new js(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new rc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return _s.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return _s.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return _s.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return _s.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return _s.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rc(e,0),i=new rc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),_s.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xo(Ur);return e.forEach(function(t){var e=new rc(t,0),i=new rc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),_s.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;li.isDocumentKey(i)||(i=i.child(""));var o=new rc(new li(i),0),a=new Xo(Ur);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)},o),_s.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Rr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return _s.forEach(e.mutations,function(i){var o=new rc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new rc(e,0),r=this.rs.firstAfterOrEqual(n);return _s.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return _s.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),oc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Go(li.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return _s.resolve(n?n.document.clone():Ei.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ta();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ei.newInvalidDocument(t))}),_s.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ta(),i=new li(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.document,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||so(e,u)&&(r=r.insert(u.key,u.clone()))}return _s.resolve(r)},t.prototype.fs=function(t,e){return _s.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new ac(this)},t.prototype.getSize=function(t){return _s.resolve(this.size)},t}(),ac=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Tr.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),_s.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ou),sc=function(){function t(t){this.persistence=t,this.ds=new _u(function(t){return xi(t)},Pi),this.lastRemoteSnapshotVersion=zr.min(),this.highestTargetId=0,this.ws=0,this._s=new nc,this.targetCount=0,this.ys=cu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),_s.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return _s.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return _s.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),_s.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),_s.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new cu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,_s.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),_s.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,_s.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),_s.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return _s.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return _s.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),_s.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),_s.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),_s.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return _s.resolve(n)},t.prototype.containsKey=function(t,e){return _s.resolve(this._s.containsKey(e))},t}(),uc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Er(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new sc(this),this.Ut=new Qs,this.Ue=function(t,e){return new oc(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Rs(e),this.Qe=new ec(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ic(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ar("MemoryPersistence","Starting transaction:",t);var i=new cc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return _s.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),cc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Tr.d)(e,t),e}(ys),lc=function(){function t(t){this.persistence=t,this.As=new nc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),_s.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),_s.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),_s.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _s.forEach(this.vs,function(r){var i=li.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return _s.or([function(){return _s.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function fc(t,e){return"firestore_clients_"+t+"_"+e}function dc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function pc(t,e){return"firestore_targets_"+t+"_"+e}hc.UNAUTHENTICATED=new hc(null),hc.GOOGLE_CREDENTIALS=new hc("google-credentials-uid"),hc.FIRST_PARTY=new hc("first-party-uid");var gc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Sr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Nr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Sr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Nr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ua(),a=0;i&&a<r.activeTargetIds.length;++a)i=ci(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Nr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),bc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Nr("SharedClientState","Failed to parse online state: "+e),null)},t}(),yc=function(){function t(){this.activeTargetIds=ua()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Go(Ur),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=fc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new yc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Object(Tr.e)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(fc(this.persistenceKey,r)))&&(o=vc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(pc(this.persistenceKey,t));if(n){var r=mc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(pc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ar("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ar("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ar("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ar("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Tr.b)(e,void 0,void 0,function(){var t,e,r,i,o,a;return Object(Tr.e)(this,function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Er.o;if(null!=t)try{var n=JSON.parse(t);Rr("number"==typeof n),e=n}catch(t){Nr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Er.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gc(this.currentUser,t,e,n),i=dc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=dc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=pc(this.persistenceKey,t),i=new mc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return vc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return gc.Vs(new hc(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return mc.Vs(r,e)},t.prototype.js=function(t){return bc.Vs(t)},t.prototype.ii=function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ar("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(t){i.has(t)||a.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ua();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),_c=function(){function t(){this.li=new yc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new yc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Oc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Cc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ar("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ar("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ic={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Tc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ec=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Tr.d)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var a=new Ir;a.listenOnce(_r.COMPLETE,function(){try{switch(a.getLastErrorCode()){case wr.NO_ERROR:var e=a.getResponseJson();Ar("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wr.TIMEOUT:Ar("Connection",'RPC "'+t+'" timed out'),o(new Sr(kr.DEADLINE_EXCEEDED,"Request time out"));break;case wr.HTTP_ERROR:var n=a.getStatus();if(Ar("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(kr).indexOf(e)>=0?e:kr.UNKNOWN}(r.status);o(new Sr(s,r.message))}else o(new Sr(kr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Sr(kr.UNAVAILABLE,"Connection failed."));break;default:Mr()}}finally{Ar("Connection",'RPC "'+t+'" completed.')}});var s=JSON.stringify(r);a.send(e,"POST",s,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new gr,i=ve(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(_.y)()||Object(_.B)()||Object(_.u)()||Object(_.w)()||Object(_.C)()||Object(_.t)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Ar("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new Tc({Ei:function(t){c?Ar("Connection","Not sending because WebChannel is closed:",t):(u||(Ar("Connection","Opening WebChannel transport."),s.open(),u=!0),Ar("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(s,Cr.EventType.OPEN,function(){c||Ar("Connection","WebChannel transport opened.")}),h(s,Cr.EventType.CLOSE,function(){c||(c=!0,Ar("Connection","WebChannel transport closed"),l.Vi())}),h(s,Cr.EventType.ERROR,function(t){c||(c=!0,jr("Connection","WebChannel transport errored:",t),l.Vi(new Sr(kr.UNAVAILABLE,"The operation could not be completed")))}),h(s,Cr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Rr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ar("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=qo[t];if(void 0!==e)return Jo(e)}(i),a=r.message;void 0===o&&(o=kr.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Sr(o,a)),s.close()}else Ar("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Or.STAT_EVENT,function(t){10===t.stat?Ar("Connection","Detected buffering proxy"):11===t.stat&&Ar("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ar("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Ar("RestConnection","Received: ",t),t},function(e){throw jr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ic[t]},t}());function kc(){return"undefined"!=typeof window?window:null}function Sc(){return"undefined"!=typeof document?document:null}function xc(t){return new wa(t,!0)}var Pc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ar("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ac=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Pc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===kr.RESOURCE_EXHAUSTED?(Nr(e.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===kr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Sr(kr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Tr.b)(t,void 0,void 0,function(){return Object(Tr.e)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Ar("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Ar("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Nc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(Tr.d)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Mr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Rr(void 0===e||"string"==typeof e),Zr.fromBase64String(e||"")):(Rr(void 0===e||e instanceof Uint8Array),Zr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?kr.UNKNOWN:Jo(t.code);return new Sr(e,t.message||"")}(s);n=new da(r,i,o,a||null)}else if("documentChange"in e){i=Sa(t,(r=e.documentChange).document.name),o=Ia(r.document.updateTime);var s=new Ii({mapValue:{fields:r.document.fields}}),u=(a=Ei.newFoundDocument(i,o,s),r.targetIds||[]);n=new ha(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=Sa(t,(r=e.documentDelete).document),o=r.readTime?Ia(r.readTime):zr.min(),s=Ei.newNoDocument(i,o),n=new ha([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=Sa(t,(r=e.documentRemove).document),n=new ha([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Mr();var c=e.filter;i=new Wo(r=c.count||0),n=new fa(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return zr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zr.min():e.readTime?Ia(e.readTime):zr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Aa(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ai(r)?{documents:La(t,r)}:{query:Fa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Oa(t,e.resumeToken):e.snapshotVersion.compareTo(zr.min())>0&&(n.readTime=_a(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Aa(this.R),e.removeTarget=t,this.cr(e)},e}(Ac),jc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(Tr.d)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Rr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Rr(void 0!==e),t.map(function(t){return function(t,e){var n=Ia(t.updateTime?t.updateTime:e);return n.isEqual(zr.min())&&(n=Ia(e)),new ko(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ia(t.commitTime);return this.listener.Tr(n,e)}return Rr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Aa(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ma(e.R,t)})};this.cr(n)},e}(Ac),Dc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Tr.d)(e,t),e.prototype.br=function(){if(this.Rr)throw new Sr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===kr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Sr(kr.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===kr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Sr(kr.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Mc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Nr(e),this.Vr=!1):Ar("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Rc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Tr.b)(o,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return Wc(this)?(Ar("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return(e=Lr(t)).$r.add(4),[4,Fc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Lc(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Mc(n,r)};function Lc(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:if(!Wc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Fc(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Vc(t,e){var n=Lr(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),zc(n)?Kc(n):al(n).er()&&qc(n,e))}function Uc(t,e){var n=Lr(t),r=al(n);n.Or.delete(e),r.er()&&Bc(n,e),0===n.Or.size&&(r.er()?r.ir():Wc(n)&&n.Br.set("Unknown"))}function qc(t,e){t.qr.U(e.targetId),al(t).mr(e)}function Bc(t,e){t.qr.U(e),al(t).yr(e)}function Kc(t){t.qr=new ga({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),al(t).start(),t.Br.Sr()}function zc(t){return Wc(t)&&!al(t).tr()&&t.Or.size>0}function Wc(t){return 0===Lr(t).$r.size}function Hc(t){t.qr=void 0}function Jc(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return t.Or.forEach(function(e,n){qc(t,e)}),[2]})})}function Gc(t,e){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(n){return Hc(t),zc(t)?(t.Br.Nr(e),Kc(t)):t.Br.set("Unknown"),[2]})})}function Yc(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof da&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ar("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ha?t.qr.X(e):e instanceof fa?t.qr.rt(e):t.qr.et(e),n.isEqual(zr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ku(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Zr.EMPTY_BYTE_STRING,n.snapshotVersion)),Bc(t,e);var r=new Ms(n.target,e,1,n.sequenceNumber);qc(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ar("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Qc(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function Qc(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r=this;return Object(Tr.e)(this,function(i){switch(i.label){case 0:if(!Es(e))throw e;return t.$r.add(1),[4,Fc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ku(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Tr.b)(r,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return Ar("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Lc(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Xc(t,e){return e().catch(function(n){return Qc(t,n,e)})}function $c(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:e=Lr(t),n=sl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Wc(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Hu(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=sl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Qc(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Zc(e)&&tl(e),[2]}})})}function Zc(t){return Wc(t)&&!sl(t).tr()&&t.kr.length>0}function tl(t){sl(t).start()}function el(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return sl(t).Ar(),[2]})})}function nl(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){for(e=sl(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function rl(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ds.from(r,e,n),[4,Xc(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,$c(t)];case 2:return o.sent(),[2]}})})}function il(t,e){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e&&sl(t).pr?[4,function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return Ho(r=e.code)&&r!==kr.ABORTED?(n=t.kr.shift(),sl(t).sr(),[4,Xc(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,$c(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Zc(t)&&tl(t),[2]}})})}function ol(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return n=Lr(t),e?(n.$r.delete(2),[4,Lc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Fc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function al(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Lr(t);return r.br(),new Nc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jc.bind(null,t),Ri:Gc.bind(null,t),_r:Yc.bind(null,t)}),t.Mr.push(function(n){return Object(Tr.b)(e,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zc(t)?Kc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Hc(t),e.label=3;case 3:return[2]}})})})),t.Ur}function sl(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Lr(t);return r.br(),new jc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:el.bind(null,t),Ri:il.bind(null,t),Ir:nl.bind(null,t),Tr:rl.bind(null,t)}),t.Mr.push(function(n){return Object(Tr.b)(e,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,$c(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ar("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ul=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sr(kr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function cl(t,e){if(Nr("AsyncQueue",e+": "+t),Es(t))return new Sr(kr.UNAVAILABLE,e+": "+t);throw t}var ll=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||li.comparator(e.key,n.key)}:function(t,e){return li.comparator(t.key,e.key)},this.keyedMap=na(),this.sortedSet=new Go(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),hl=function(){function t(){this.Kr=new Go(li.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Mr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),fl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ll.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&io(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),dl=function(){this.Wr=void 0,this.listeners=[]},pl=function(){this.queries=new _u(function(t){return oo(t)},io),this.onlineState="Unknown",this.Gr=new Set};function gl(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:if(n=Lr(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new dl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=cl(s,"Initialization of query '"+ao(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&yl(n),[2]}})})}function ml(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){return n=Lr(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function vl(t,e){for(var n=Lr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&yl(n)}function bl(t,e,n){var r=Lr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function yl(t){t.Gr.forEach(function(t){t.next()})}var wl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new fl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=fl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),_l=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ol=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Sa(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Da(this.R,t.document,!1):Ei.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ia(t)},t}(),Cl=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Il(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ol(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||aa()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return[4,Zu(this.localStore,new Ol(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,tc(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Mu(Object.assign({},this.progress),t))]}})})},t}();function Il(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Tl=function(t){this.key=t},El=function(t){this.key=t},kl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=aa(),this.mutatedKeys=aa(),this.lo=uo(t),this.fo=new ll(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new hl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Qi(this.query)&&i.size===this.query.limit?i.last():null,c=Xi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=so(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),Qi(this.query)||Xi(this.query))for(;a.size>this.query.limit;){var l=Qi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new fl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=aa(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new El(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Tl(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=aa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return fl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Sl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},xl=function(t){this.key=t,this.bo=!1},Pl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new _u(function(t){return oo(t)},io),this.Vo=new Map,this.So=new Set,this.Do=new Go(li.comparator),this.Co=new Map,this.No=new nc,this.xo={},this.Fo=new Map,this.ko=cu.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Al(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return n=ah(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Ju(n.localStore,no(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Nl(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&Vc(n.remoteStore,o),s.label=4;case 4:return[2,r]}})})}function Nl(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a,s,u,c;return Object(Tr.e)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Yu(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Wl(t,e.targetId,a.To),a.snapshot)]}})})}(t,e,n,r)},[4,Yu(t.localStore,e,!0)];case 1:return i=l.sent(),o=new kl(e,i.Bn),a=o._o(i.documents),s=la.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Wl(t,n,u.To),c=new Sl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function jl(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return n=Lr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!io(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Gu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Uc(n.remoteStore,r.targetId),Kl(n,r.targetId)}).catch(pu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Kl(n,r.targetId),[4,Gu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Dl(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:r=sh(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Lr(t),i=Kr.now(),o=e.reduce(function(t,e){return t.add(e.key)},aa());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=jo(c,n.get(c.key));null!=l&&a.push(new Lo(c.key,l,Ti(l.toProto().mapValue),So.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Go(Ur)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Gl(r,i.changes)];case 3:return s.sent(),[4,$c(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=cl(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function Ml(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:n=Lr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Rr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Rr(r.bo):t.removedDocuments.size>0&&(Rr(r.bo),r.bo=!1))}),[4,Gl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,pu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Rl(t,e,n){var r=Lr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Lr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&yl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ll(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:return(r=Lr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Go(li.comparator)).insert(o,Ei.newNoDocument(o,zr.min())),s=aa().add(o),u=new ca(zr.min(),new Map,new Xo(Ur),a,s),[4,Ml(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Jl(r),[3,4];case 2:return[4,Gu(r.localStore,e,!1).then(function(){return Kl(r,e,n)}).catch(pu)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Fl(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:n=Lr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Bu(n.localStore,e)];case 2:return i=o.sent(),Bl(n,r,null),ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,pu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Vl(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:r=Lr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Lr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Rr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Bl(r,e,n),ql(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Gl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,pu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ul(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:Wc((n=Lr(t)).remoteStore)||Ar("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Lr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=cl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}function ql(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Bl(t,e,n){var r=Lr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Kl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||zl(t,e)})}function zl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Uc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Jl(t))}function Wl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Tl?(t.No.addReference(o.key,e),Hl(t,o)):o instanceof El?(Ar("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||zl(t,o.key)):Mr()}}function Hl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ar("SyncEngine","New document in limbo: "+n),t.So.add(r),Jl(t))}function Jl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new li(Yr.fromString(e)),r=t.ko.next();t.Co.set(r,new xl(n)),t.Do=t.Do.insert(n,r),Vc(t.remoteStore,new Ms(no(Yi(n.path)),r,2,Er.o))}}function Gl(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return r=Lr(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,s){a.push(r.$o(s,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Lu.Pn(s.targetId,t);o.push(e)}}))}),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return Object(Tr.e)(this,function(l){switch(l.label){case 0:n=Lr(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return _s.forEach(e,function(e){return _s.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return _s.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Es(r=l.sent()))throw r;return Ar("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Fn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(s,c));return[2]}})})}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function Yl(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return(n=Lr(t)).currentUser.isEqual(e)?[3,3]:(Ar("SyncEngine","User change. New user:",e.toKey()),[4,qu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Sr(kr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Gl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Ql(t,e){var n=Lr(t),r=n.Co.get(e);if(r&&r.bo)return aa().add(r.key);var i=aa(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Po.get(s[a]);i=i.unionWith(u.view.wo)}return i}function Xl(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return[4,Yu((n=Lr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Wl(n,e.targetId,i.To),i)]}})})}function $l(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){return[2,Xu((e=Lr(t)).localStore).then(function(t){return Gl(e,t)})]})})}function Zl(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return[4,function(t,e){var n=Lr(t),r=Lr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):_s.resolve(null)})})}((i=Lr(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,$c(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Bl(i,e,r||null),ql(i,e),function(t,e){Lr(Lr(t)._n).Gt(e)}(i.localStore,e)):Mr(),a.label=4;case 4:return[4,Gl(i,o)];case 5:return a.sent(),[3,7];case 6:Ar("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}})})}function th(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:return ah(n=Lr(t)),sh(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,eh(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,ol(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)Vc(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(s=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then(function(){return Kl(n,e),Gu(n.localStore,e,!0)}),Uc(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,eh(n,s)];case 5:return c.sent(),function(t){var e=Lr(t);e.Co.forEach(function(t,n){Uc(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Go(li.comparator)}(n),n.Oo=!1,[4,ol(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function eh(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return Object(Tr.e)(this,function(g){switch(g.label){case 0:n=Lr(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(u=void 0,(c=n.Vo.get(s=a[o]))&&0!==c.length?[4,Ju(n.localStore,no(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Xl(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Qu(n.localStore,s)];case 8:return p=g.sent(),[4,Ju(n.localStore,p)];case 9:return u=g.sent(),[4,Nl(n,nh(p),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function nh(t){return Gi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rh(t){var e=Lr(t);return Lr(Lr(e.localStore).persistence).fn()}function ih(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return(i=Lr(t)).Oo?(Ar("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xu(i.localStore)];case 3:return o=s.sent(),a=ca.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Gl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Gu(i.localStore,e,!0)];case 6:return s.sent(),Kl(i,e,r),[3,8];case 7:Mr(),s.label=8;case 8:return[2]}})})}function oh(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h;return Object(Tr.e)(this,function(f){switch(f.label){case 0:if(!(r=ah(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(Ar("SyncEngine","Adding an already active target "+a),[3,5]):[4,Qu(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,Ju(r.localStore,s)];case 3:return u=f.sent(),[4,Nl(r,nh(s),u.targetId,!1)];case 4:f.sent(),Vc(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Gu(r.localStore,t,!1).then(function(){Uc(r.remoteStore,t),Kl(r,t)}).catch(pu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ah(t){var e=Lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ml.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ql.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ll.bind(null,e),e.vo._r=vl.bind(null,e.eventManager),e.vo.Mo=bl.bind(null,e.eventManager),e}function sh(t){var e=Lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vl.bind(null,e),e}function uh(t,e,n){var r=Lr(t);(function(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Lr(t),r=Ia(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Il(r)),i=new Cl(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Gl(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Lr(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return jr("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var ch=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return this.R=xc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Uu(this.persistence,new Fu,t.initialUser,this.R)},t.prototype.qo=function(t){return new uc(lc.bs,this.R)},t.prototype.Bo=function(t){return new _c},t.prototype.terminate=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),lh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Tr.d)(e,t),e.prototype.initialize=function(e){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,$u(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,sh(this.Ko.syncEngine)];case 4:return n.sent(),[4,$c(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Uu(this.persistence,new Fu,t.initialUser,this.R)},e.prototype.Uo=function(t){return new vu(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Du(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?eu.withCacheSize(this.cacheSizeBytes):eu.DEFAULT;return new Au(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,kc(),Sc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new _c},e}(ch),hh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Tr.d)(e,t),e.prototype.initialize=function(e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r=this;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof wc?(this.sharedClientState.syncEngine={ui:Zl.bind(null,n),ai:ih.bind(null,n),hi:oh.bind(null,n),fn:rh.bind(null,n),ci:$l.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Tr.b)(r,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return[4,th(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=kc();if(!wc.yt(e))throw new Sr(kr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Du(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(lh),fh=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Rl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yl.bind(null,this.syncEngine),[4,ol(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new pl},t.prototype.createDatastore=function(t){var e=xc(t.databaseInfo.databaseId),n=new Ec(t.databaseInfo);return function(t,e,n){return new Dc(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Rl(a.syncEngine,t,0)},o=Cc.yt()?new Cc:new Oc,new Rc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Pl(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=Lr(t),Ar("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Fc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function dh(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(Tr.b)(this,void 0,void 0,function(){var r;return Object(Tr.e)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var ph=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),gh=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new ws,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new _l(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),mh=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Sr(kr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return n=Lr(t),r=Aa(n.R)+"/documents",i={documents:e.map(function(t){return ka(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Rr(!!e.found);var n=Sa(t,e.found.name),r=Ia(e.found.updateTime),i=new Ii({mapValue:{fields:e.found.fields}});return Ei.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Rr(!!e.missing),Rr(!!e.readTime);var n=Sa(t,e.missing),r=Ia(e.readTime);return Ei.newNoDocument(n,r)}(t,e):Mr()}(n.R,t);a.set(e.key.toString(),e)}),s=[],[2,(e.forEach(function(t){var e=a.get(t.toString());Rr(!!e),s.push(e)}),s)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ko(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Tr.e)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=li.fromPath(n);e.mutations.push(new zo(r,e.precondition(r)))}),[4,function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return n=Lr(t),r=Aa(n.R)+"/documents",i={writes:e.map(function(t){return Ma(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mr();e=zr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Sr(kr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?So.updateTime(e):So.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(zr.min()))throw new Sr(kr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return So.updateTime(e)}return So.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),vh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Pc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Tr.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Tr.e)(this,function(r){return t=new mh(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!si(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ho(e)}return!1},t}(),bh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hc.UNAUTHENTICATED,this.clientId=Vr.u(),this.credentialListener=function(){},this.receivedInitialUser=new ws,this.credentials.setChangeListener(function(t){Ar("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Sr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Tr.b)(t,void 0,void 0,function(){var t,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=cl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function yh(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ar("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Tr.b)(i,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return[4,qu(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function wh(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,_h(t)];case 1:return n=i.sent(),Ar("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return(n=Lr(t)).asyncQueue.verifyOperationInProgress(),Ar("RemoteStore","RemoteStore received new credentials"),r=Wc(n),n.$r.add(3),[4,Fc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Lc(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function _h(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ar("FirestoreClient","Using default OfflineComponentProvider"),[4,yh(t,new ch)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Oh(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ar("FirestoreClient","Using default OnlineComponentProvider"),[4,wh(t,new fh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Ch(t){return _h(t).then(function(t){return t.persistence})}function Ih(t){return _h(t).then(function(t){return t.localStore})}function Th(t){return Oh(t).then(function(t){return t.remoteStore})}function Eh(t){return Oh(t).then(function(t){return t.syncEngine})}function kh(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,Oh(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Al.bind(null,e.syncEngine),n.onUnlisten=jl.bind(null,e.syncEngine),n)]}})})}function Sh(t,e,n){var r=this;void 0===n&&(n={});var i=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(r,void 0,void 0,function(){var r;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ph({next:function(o){e.enqueueAndForget(function(){return ml(t,a)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Sr(kr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Sr(kr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new wl(Yi(n.path),o,{includeMetadataChanges:!0,so:!0});return gl(t,a)},[4,kh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function xh(t,e,n){var r=this;void 0===n&&(n={});var i=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(r,void 0,void 0,function(){var r;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ph({next:function(n){e.enqueueAndForget(function(){return ml(t,a)}),n.fromCache&&"server"===r.source?i.reject(new Sr(kr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new wl(n,o,{includeMetadataChanges:!0,so:!0});return gl(t,a)},[4,kh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Ph=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},Ah=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Nh=new Map,jh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Dh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(hc.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mh=function(){function t(t){var e=this;this.oc=null,this.currentUser=hc.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Ar("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Rr("string"==typeof n.accessToken),new jh(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Rr(null===t||"string"==typeof t),new hc(t)},t}(),Rh=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=hc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Lh=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rh(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(hc.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Fh(t,e,n){if(!n)throw new Sr(kr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Sr(kr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Uh(t,e,n,r){if(!0===e&&!0===r)throw new Sr(kr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function qh(t){if(!li.isDocumentKey(t))throw new Sr(kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Bh(t){if(li.isDocumentKey(t))throw new Sr(kr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Kh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mr()}function zh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Sr(kr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kh(t);throw new Sr(kr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Wh(t,e){if(e<=0)throw new Sr(kr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Hh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Sr(kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Sr(kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Uh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Jh=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1,t instanceof Ah?(this._databaseId=t,this._credentials=new Dh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Sr(kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ah(t.options.projectId)}(t),this._credentials=new Mh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Sr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Sr(kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Dh;switch(t.type){case"gapi":var e=t.client;return Rr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lh(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Sr(kr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Nh.get(this))&&(Ar("ComponentProvider","Removing Datastore"),Nh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Gh=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Qh(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Yh=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Yi(r))||this)._path=r,i.type="collection",i}return Object(Tr.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Gh(this.firestore,null,new li(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Yh);function Xh(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(_.p)(t),Fh("collection","path",e),t instanceof Jh)return Bh(n=Yr.fromString.apply(Yr,Object(Tr.g)([e],r))),new Qh(t,null,n);if(!(t instanceof Gh||t instanceof Qh))throw new Sr(kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bh(n=Yr.fromString.apply(Yr,Object(Tr.g)([t.path],r)).child(Yr.fromString(e))),new Qh(t.firestore,null,n)}function $h(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(_.p)(t),1===arguments.length&&(e=Vr.u()),Fh("doc","path",e),t instanceof Jh)return qh(n=Yr.fromString.apply(Yr,Object(Tr.g)([e],r))),new Gh(t,null,new li(n));if(!(t instanceof Gh||t instanceof Qh))throw new Sr(kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qh(n=t._path.child(Yr.fromString.apply(Yr,Object(Tr.g)([e],r)))),new Gh(t.firestore,t instanceof Qh?t._converter:null,new li(n))}function Zh(t,e){return t=Object(_.p)(t),e=Object(_.p)(e),(t instanceof Gh||t instanceof Qh)&&(e instanceof Gh||e instanceof Qh)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function tf(t,e){return t=Object(_.p)(t),e=Object(_.p)(e),t instanceof Yh&&e instanceof Yh&&t.firestore===e.firestore&&io(t._query,e._query)&&t._converter===e._converter}var ef=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Pc(this,"async_queue_retry"),this.Ec=function(){var e=Sc();e&&Ar("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Sc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Sc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Tr.e)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Es(t=n.sent()))throw t;return Ar("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=ul.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Mr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t;return Object(Tr.e)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function nf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var rf=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ws,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),of=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new ef,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Tr.d)(e,t),e.prototype._terminate=function(){return this._firestoreClient||sf(this),this._firestoreClient.terminate()},e}(Jh);function af(t){return t._firestoreClient||sf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ph(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new bh(t._credentials,t._queue,r)}function uf(t,e,n){var r=this,i=new ws;return t.asyncQueue.enqueue(function(){return Object(Tr.b)(r,void 0,void 0,function(){var r;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,yh(t,n)];case 1:return o.sent(),[4,wh(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===kr.FAILED_PRECONDITION||t.code===kr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function cf(t){if(t._initialized||t._terminated)throw new Sr(kr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var lf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Sr(kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Zr.fromBase64String(e))}catch(e){throw new Sr(kr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Zr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ff=function(t){this._methodName=t},df=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Sr(kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Sr(kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ur(this._lat,t._lat)||Ur(this._long,t._long)},t}(),pf=/^__.*__$/,gf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Lo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ro(t,this.data,e,this.fieldTransforms)},t}(),mf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Lo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function vf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mr()}}var bf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Ff(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(vf(this.Dc)&&pf.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),yf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||xc(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new bf({Dc:t,methodName:e,Lc:n,path:Xr.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function wf(t){var e=t._freezeSettings(),n=xc(t._databaseId);return new yf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _f(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Df("Data must be an object, but it was:",a,r);var s,u,c=Nf(r,a);if(o.merge)s=new $r(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Mf(e,f[h],n);if(!a.contains(d))throw new Sr(kr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Vf(l,d)||l.push(d)}s=new $r(l),u=a.fieldTransforms.filter(function(t){return s.covers(t.field)})}else s=null,u=a.fieldTransforms;return new gf(new Ii(c),s,u)}var Of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ff);function Cf(t,e,n){return new bf({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var If=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype._toFieldTransform=function(t){return new Eo(t.path,new bo)},e.prototype.isEqual=function(t){return t instanceof e},e}(ff),Tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Tr.d)(e,t),e.prototype._toFieldTransform=function(t){var e=Cf(this,t,!0),n=this.qc.map(function(t){return Af(t,e)}),r=new yo(n);return new Eo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ff),Ef=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Tr.d)(e,t),e.prototype._toFieldTransform=function(t){var e=Cf(this,t,!0),n=this.qc.map(function(t){return Af(t,e)}),r=new _o(n);return new Eo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ff),kf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Tr.d)(e,t),e.prototype._toFieldTransform=function(t){var e=new Co(t.R,fo(t.R,this.Uc));return new Eo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ff);function Sf(t,e,n,r){var i=t.Bc(1,e,n);Df("Data must be an object, but it was:",i,r);var o=[],a=Ii.empty();Hr(r,function(t,r){var s=Lf(e,t,n);r=Object(_.p)(r);var u=i.kc(s);if(r instanceof Of)o.push(s);else{var c=Af(r,u);null!=c&&(o.push(s),a.set(s,c))}});var s=new $r(o);return new mf(a,s,i.fieldTransforms)}function xf(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[Mf(e,r,n)],u=[i];if(o.length%2!=0)throw new Sr(kr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Mf(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ii.empty(),f=s.length-1;f>=0;--f)if(!Vf(l,s[f])){var d=s[f],p=u[f];p=Object(_.p)(p);var g=a.kc(d);if(p instanceof Of)l.push(d);else{var m=Af(p,g);null!=m&&(l.push(d),h.set(d,m))}}var v=new $r(l);return new mf(h,v,a.fieldTransforms)}function Pf(t,e,n,r){return void 0===r&&(r=!1),Af(n,t.Bc(r?4:3,e))}function Af(t,e){if(jf(t=Object(_.p)(t)))return Df("Unsupported field value:",e,t),Nf(t,e);if(t instanceof ff)return function(t,e){if(!vf(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Af(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(_.p)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Kr.fromDate(t);return{timestampValue:_a(e.R,n)}}if(t instanceof Kr)return n=new Kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:_a(e.R,n)};if(t instanceof df)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hf)return{bytesValue:Oa(e.R,t._byteString)};if(t instanceof Gh){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ta(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Kh(t))}(t,e)}function Nf(t,e){var n={};return Jr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,function(t,r){var i=Af(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function jf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Kr||t instanceof df||t instanceof hf||t instanceof Gh||t instanceof ff)}function Df(t,e,n){if(!jf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Kh(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Mf(t,e,n){if((e=Object(_.p)(e))instanceof lf)return e._internalPath;if("string"==typeof e)return Lf(t,e);throw Ff("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Rf=new RegExp("[~\\*/\\[\\]]");function Lf(t,e,n){if(e.search(Rf)>=0)throw Ff("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(lf.bind.apply(lf,Object(Tr.g)([void 0],e.split(".")))))._internalPath}catch(r){throw Ff("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ff(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Sr(kr.INVALID_ARGUMENT,(s+=". ")+t+u)}function Vf(t,e){return t.some(function(t){return t.isEqual(e)})}var Uf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new qf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Bf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Uf);function Bf(t,e){return"string"==typeof e?Lf(t,e):e instanceof lf?e._internalPath:e._delegate._internalPath}var Kf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),zf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(Tr.d)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Bf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Uf),Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(zf),Hf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Kf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Wf(n._firestore,n._userDataWriter,r.key,r,new Kf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Sr(kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Wf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Wf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Jf(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Jf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mr()}}function Gf(t,e){return t instanceof zf&&e instanceof zf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hf&&e instanceof Hf&&t._firestore===e._firestore&&tf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Yf(t){if(Xi(t)&&0===t.explicitOrderBy.length)throw new Sr(kr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qf=function(){};function Xf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var $f=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Tr.d)(e,t),e.prototype._apply=function(t){var e=wf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Sr(kr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){od(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(id(r,t,l[c]));s={arrayValue:{values:u}}}else s=id(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||od(a,o),s=Pf(n,"where",a,"in"===o||"not-in"===o);var h=Ni.create(i,o,s);return function(t,e){if(e.g()){var n=Zi(t);if(null!==n&&!n.isEqual(e.field))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$i(t);null!==r&&ad(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Sr(kr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Yh(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Qf),Zf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Tr.d)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ki(e,n);return function(t,e){if(null===$i(t)){var n=Zi(t);null!==n&&ad(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Yh(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ji(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Qf),td=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Tr.d)(e,t),e.prototype._apply=function(t){return new Yh(t.firestore,t._converter,ro(t._query,this.Gc,this.zc))},e}(Qf),ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Tr.d)(e,t),e.prototype._apply=function(t){var e=rd(t,this.type,this.Hc,this.Jc);return new Yh(t.firestore,t._converter,function(t,e){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Qf),nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Tr.d)(e,t),e.prototype._apply=function(t){var e=rd(t,this.type,this.Hc,this.Jc);return new Yh(t.firestore,t._converter,function(t,e){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Qf);function rd(t,e,n,r){if(n[0]=Object(_.p)(n[0]),n[0]instanceof Uf)return function(t,e,n,r,i){if(!r)throw new Sr(kr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=eo(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(bi(e,r.key));else{var c=r.data.field(u.field);if(ii(c))throw new Sr(kr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new qi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=wf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Sr(kr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!to(t)&&-1!==c.indexOf("/"))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yr.fromString(c));if(!li.isDocumentKey(l))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new li(l);s.push(bi(e,h))}else{var f=Pf(n,r,c);s.push(f)}}return new qi(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function id(t,e,n){if("string"==typeof(n=Object(_.p)(n))){if(""===n)throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!to(e)&&-1!==n.indexOf("/"))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yr.fromString(n));if(!li.isDocumentKey(r))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return bi(t,new li(r))}if(n instanceof Gh)return bi(t,n._key);throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kh(n)+".")}function od(t,e){if(!Array.isArray(t)||0===t.length)throw new Sr(kr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Sr(kr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ad(t,e,n){if(!n.isEqual(e))throw new Sr(kr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var sd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),hi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ni(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ri(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Hr(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new df(ni(t.latitude),ni(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=oi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ai(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ei(t);return new Kr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yr.fromString(t);Rr(Qa(n));var r=new Ah(n.get(1),n.get(3)),i=new li(n.popFirst(5));return r.isEqual(e)||Nr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function ud(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tr.d)(e,t),e.prototype.convertBytes=function(t){return new hf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gh(this.firestore,null,e)},e}(sd),ld=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=wf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hd(t,this._firestore),i=ud(r._converter,e,n),o=_f(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,So.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=hd(t,this._firestore);return o="string"==typeof(e=Object(_.p)(e))||e instanceof lf?xf(this._dataReader,"WriteBatch.update",a._key,e,n,r):Sf(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,So.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hd(t,this._firestore);return this._mutations=this._mutations.concat(new Ko(e._key,So.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Sr(kr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hd(t,e){if((t=Object(_.p)(t)).firestore!==e)throw new Sr(kr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var fd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tr.d)(e,t),e.prototype.convertBytes=function(t){return new hf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gh(this.firestore,null,e)},e}(sd);function dd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=zh(t,Gh);var o=zh(t.firestore,of),a=wf(o);return gd(o,[("string"==typeof(e=Object(_.p)(e))||e instanceof lf?xf(a,"updateDoc",t._key,e,n,r):Sf(a,"updateDoc",t._key,e)).toMutation(t._key,So.exists(!0))])}function pd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(_.p)(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||nf(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(nf(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Gh)c=zh(t.firestore,of),l=Yi(t._key.path),u={next:function(e){i[s]&&i[s](md(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=zh(t,Yh);c=zh(d.firestore,of),l=d._query;var p=new fd(c);u={next:function(t){i[s]&&i[s](new Hf(c,p,d,t))},error:i[s+1],complete:i[s+2]},Yf(t._query)}return function(t,e,n,r){var i=this,o=new ph(r),a=new wl(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(i,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=gl,[4,kh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(i,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=ml,[4,kh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})})}}(af(c),l,h,u)}function gd(t,e){return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return n=Dl,[4,Eh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(af(t),e)}function md(t,e,n){var r=n.docs.get(e._key),i=new fd(t);return new zf(t,i,e._key,r,new Kf(n.hasPendingWrites,n.fromCache),e._converter)}var vd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Tr.d)(e,t),e.prototype.get=function(e){var n=this,r=hd(e,this._firestore),i=new fd(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new zf(n._firestore,i,r._key,t._document,new Kf(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=wf(t)}return t.prototype.get=function(t){var e=this,n=hd(t,this._firestore),r=new cd(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Mr();var i=t[0];if(i.isFoundDocument())return new Uf(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Uf(e._firestore,r,n._key,null,n._converter);throw Mr()})},t.prototype.set=function(t,e,n){var r=hd(t,this._firestore),i=ud(r._converter,e,n),o=_f(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=hd(t,this._firestore);return o="string"==typeof(e=Object(_.p)(e))||e instanceof lf?xf(this._dataReader,"Transaction.update",a._key,e,n,r):Sf(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=hd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function bd(){if("undefined"==typeof Uint8Array)throw new Sr(kr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yd(){if("undefined"==typeof atob)throw new Sr(kr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return yd(),new t(hf.fromBase64String(e))},t.fromUint8Array=function(e){return bd(),new t(hf.fromUint8Array(e))},t.prototype.toBase64=function(){return yd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return bd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),_d=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){cf(t=zh(t,of));var n=af(t),r=t._freezeSettings(),i=new fh;return uf(n,i,new lh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){cf(t=zh(t,of));var e=af(t),n=t._freezeSettings(),r=new fh;return uf(e,r,new hh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Sr(kr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ws;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Tr.b)(e,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return Cs.yt()?[4,Cs.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Du(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Od=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ah||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=zh(t,Jh))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&jr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Tr.b)(e,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,Ch(t)];case 1:return e=r.sent(),[4,Th(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Lr(t);return e.$r.delete(0),Lc(e)}(n))]}})})})}(af(zh(this._delegate,of)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Tr.b)(e,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,Ch(t)];case 1:return e=r.sent(),[4,Th(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return(e=Lr(t)).$r.add(0),[4,Fc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(af(zh(this._delegate,of)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Uh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(e,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return e=Ul,[4,Eh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(af(zh(this._delegate,of)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ph(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lr(t).Gr.add(e),e.next()},[4,kh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lr(t).Gr.delete(e)},[4,kh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(af(t=zh(t,of)),nf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Sr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rd(this,Xh(this._delegate,t))}catch(t){throw Sd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new kd(this,$h(this._delegate,t))}catch(t){throw Sd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new jd(this,function(t,e){if(t=zh(t,Jh),Fh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Sr(kr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Yh(t,null,function(t){return new Ji(Yr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Sd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,function(t){return Oh(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new vh(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(af(t),function(n){return e(new vd(t,n))})}(this._delegate,function(n){return t(new Id(e,n))})},t.prototype.batch=function(){var t=this;return af(this._delegate),new Td(new ld(this._delegate,function(e){return gd(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Sr(kr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Sr(kr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Cd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tr.d)(e,t),e.prototype.convertBytes=function(t){return new wd(new hf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return kd.Zc(e,this.firestore,null)},e}(sd),Id=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Cd(t)}return t.prototype.get=function(t){var e=this,n=Ld(t);return this._delegate.get(n).then(function(t){return new Ad(e._firestore,new zf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Ld(t);return n?(Vh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Ld(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(Tr.g)([a,e,n],i)),this},t.prototype.delete=function(t){var e=Ld(t);return this._delegate.delete(e),this},t}(),Td=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ld(t);return n?(Vh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Ld(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(Tr.g)([a,e,n],i)),this},t.prototype.delete=function(t){var e=Ld(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ed=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Wf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Nd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Cd(e),n),i.set(n,o)),o},t}();Ed.eu=new WeakMap;var kd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cd(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Sr(kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Gh(n._delegate,r,new li(e)))},t.Zc=function(e,n,r){return new t(n,new Gh(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Rd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rd(this.firestore,Xh(this._delegate,t))}catch(t){throw Sd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(_.p)(t))instanceof Gh&&Zh(this._delegate,t)},t.prototype.set=function(t,e){e=Vh("DocumentReference.set",e);try{return function(t,e,n){t=zh(t,Gh);var r=zh(t.firestore,of),i=ud(t._converter,e,n);return gd(r,[_f(wf(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,So.none())])}(this._delegate,t,e)}catch(t){throw Sd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?dd(this._delegate,t):dd.apply(void 0,Object(Tr.g)([this._delegate,t,e],n))}catch(t){throw Sd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return gd(zh((t=this._delegate).firestore,of),[new Ko(t._key,So.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xd(e),i=Pd(e,function(e){return new Ad(t.firestore,new zf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return pd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zh(t,Gh);var e=zh(t.firestore,of),n=af(e),r=new fd(e);return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Lr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Sr(kr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=cl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ih(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new zf(e,r,t._key,n,new Kf(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zh(t,Gh);var e=zh(t.firestore,of);return Sh(af(e),t._key,{source:"server"}).then(function(n){return md(e,t,n)})}(this._delegate):function(t){t=zh(t,Gh);var e=zh(t.firestore,of);return Sh(af(e),t._key).then(function(n){return md(e,t,n)})}(this._delegate)).then(function(t){return new Ad(e.firestore,new zf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ed.tu(this.firestore,e):null))},t}();function Sd(t,e,n){return t.message=t.message.replace(e,n),t}function xd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!nf(r))return r}return{}}function Pd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=nf(t[0])?t[0]:nf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ad=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new kd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tr.d)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ad),jd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Xf(this._delegate,function(t,e,n){var r=e,i=Bf("where",t);return new $f(i,r,n)}(e,n,r)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Xf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Bf("orderBy",t);return new Zf(r,n)}(e,n)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Xf(this._delegate,function(t){return Wh("limit",t),new td("limit",t,"F")}(e)))}catch(e){throw Sd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Xf(this._delegate,function(t){return Wh("limitToLast",t),new td("limitToLast",t,"L")}(e)))}catch(e){throw Sd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Sd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Sd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nd("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Sd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nd("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Sd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return tf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zh(t,Yh);var e=zh(t.firestore,of),n=af(e),r=new fd(e);return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(n,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yu(t,e,!0)];case 1:return s=u.sent(),r=new kl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=cl(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,Ih(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Hf(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zh(t,Yh);var e=zh(t.firestore,of),n=af(e),r=new fd(e);return xh(n,t._query,{source:"server"}).then(function(n){return new Hf(e,r,t,n)})}(this._delegate):function(t){t=zh(t,Yh);var e=zh(t.firestore,of),n=af(e),r=new fd(e);return Yf(t._query),xh(n,t._query).then(function(n){return new Hf(e,r,t,n)})}(this._delegate)).then(function(t){return new Md(e.firestore,new Hf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xd(e),i=Pd(e,function(e){return new Md(t.firestore,new Hf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return pd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ed.tu(this.firestore,e):null))},t}(),Dd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Nd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Md=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new jd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Nd(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Dd(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Nd(n._firestore,r))})},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Tr.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new kd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new kd(this.firestore,void 0===t?$h(this._delegate):$h(this._delegate,t))}catch(t){throw Sd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=zh(t.firestore,of),r=$h(t),i=ud(t._converter,e);return gd(n,[_f(wf(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,So.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new kd(e.firestore,t)})},e.prototype.isEqual=function(t){return Zh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Ed.tu(this.firestore,t):null))},e}(jd);function Ld(t){return zh(t,Gh)}var Fd,Vd,Ud=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(lf.bind.apply(lf,Object(Tr.g)([void 0],t)))}return t.documentId=function(){return new t(Xr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(_.p)(t))instanceof lf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),qd=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new If("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Of("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tf("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ef("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new kf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Bd=n("/6Yf"),Kd={Firestore:Od,GeoPoint:df,Timestamp:Kr,Blob:wd,Transaction:Id,WriteBatch:Td,DocumentReference:kd,DocumentSnapshot:Ad,Query:jd,QueryDocumentSnapshot:Nd,QuerySnapshot:Md,CollectionReference:Rd,FieldPath:Ud,FieldValue:qd,setLogLevel:function(t){xr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bd.a("firestore",function(t){return function(t,e){return new Od(t,new of(t,e),new _d)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Kd)))})(Fd=w.a),Fd.registerVersion("@firebase/firestore","2.2.5"),(Vd=Od).prototype.loadBundle=function(t){return function(t,e){var n=af(t=zh(t,of)),r=new rf;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new gh(t,e)}(function(t,e){if(t instanceof Uint8Array)return dh(t,e);if(t instanceof ArrayBuffer)return dh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,xc(e));t.asyncQueue.enqueueAndForget(function(){return Object(Tr.b)(i,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return e=uh,[4,Eh(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},Vd.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return Object(Tr.b)(n,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=Lr(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,Ih(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(af(e=zh(e,of)),n).then(function(t){return t?new Yh(e,null,t.query):null})).then(function(t){return t?new jd(r,t):null})};var zd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wd=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(Tr.d)(e,t),e}(Error),Hd=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t;return Object(Tr.e)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Fd){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function Jd(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Gd,Yd,Qd,Xd=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Jd(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Jd(t,function(t){return e.decode(t)}):t},t}(),$d=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Xd,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Hd(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(Fd){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f;return Object(Tr.e)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new Wd("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=s.timer,c=s.promise,[4,Promise.race([Zd(u,this.postJSON(r,i,o)),c,Zd(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Wd("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!zd[s])return new Wd("internal","internal");r=zd[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(Fd){}return"ok"===r?null:new Wd(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Wd("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new Wd("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function Zd(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Gd=w.a,Yd=fetch.bind(self),Qd={Functions:$d},Gd.INTERNAL.registerComponent(new Bd.a("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new $d(r,i,o,n,Yd)},"PUBLIC").setServiceProps(Qd).setMultipleInstances(!0)),w.a.registerVersion("@firebase/functions","0.6.7");var tp,ep=n("nbvr"),np="w:0.4.25",rp=((tp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',tp["not-registered"]="Firebase Installation is not registered.",tp["installation-not-found"]="Firebase Installation not found.",tp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',tp["app-offline"]="Could not process request. Application offline.",tp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",tp),ip=new _.b("installations","Installations",rp);function op(t){return t instanceof _.c&&t.code.includes("request-failed")}function ap(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function sp(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function up(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,ip.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function cp(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function lp(t,e){var n=e.refreshToken,r=cp(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function hp(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function fp(t,e){var n=e.fid;return Object(Tr.b)(this,void 0,void 0,function(){var e,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return e=ap(t),r=cp(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:np})},[4,hp(function(){return fetch(e,i)})];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:sp(a.authToken)}];case 3:return[4,up("Create Installation",o)];case 4:throw s.sent()}})})}function dp(t){return new Promise(function(e){setTimeout(e,t)})}var pp=/^[cdef][\w-]{21}$/;function gp(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(Tr.g)([],Object(Tr.f)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return pp.test(e)?e:""}catch(n){return""}}function mp(t){return t.appName+"!"+t.appId}var vp=new Map;function bp(t,e){var n=mp(t);yp(n,e),function(t,e){var n=_p();n&&n.postMessage({key:t,fid:e}),Op()}(n,e)}function yp(t,e){var n,r,i=vp.get(t);if(i)try{for(var o=Object(Tr.h)(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var wp=null;function _p(){return!wp&&"BroadcastChannel"in self&&((wp=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){yp(t.data.key,t.data.fid)}),wp}function Op(){0===vp.size&&wp&&(wp.close(),wp=null)}var Cp,Ip="firebase-installations-store",Tp=null;function Ep(){return Tp||(Tp=Object(ep.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Ip)}})),Tp}function kp(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return n=mp(t),[4,Ep()];case 1:return r=s.sent(),i=r.transaction(Ip,"readwrite"),[4,(o=i.objectStore(Ip)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||bp(t,e.fid),[2,e]}})})}function Sp(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return e=mp(t),[4,Ep()];case 1:return n=i.sent(),[4,(r=n.transaction(Ip,"readwrite")).objectStore(Ip).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function xp(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return n=mp(t),[4,Ep()];case 1:return r=u.sent(),i=r.transaction(Ip,"readwrite"),[4,(o=i.objectStore(Ip)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||bp(t,s.fid),[2,s]}})})}function Pp(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,xp(t,function(n){var r=function(t){return jp(t||{fid:gp(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ip.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,fp(t,e)];case 1:return n=i.sent(),[2,kp(t,n)];case 2:return op(r=i.sent())&&409===r.customData.serverCode?[4,Sp(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,kp(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ap(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function Ap(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return[4,Np(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,dp(100)];case 3:return o.sent(),[4,Np(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Pp(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Np(t){return xp(t,function(t){if(!t)throw ip.create("installation-not-found");return jp(t)})}function jp(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Dp(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(Tr.b)(this,void 0,void 0,function(){var t,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return ap(t)+"/"+n+"/authTokens:generate"}(n,e),i=lp(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:np}})},[4,hp(function(){return fetch(t,a)})];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,sp(u.sent())];case 3:return[4,up("Generate Auth Token",s)];case 4:throw u.sent()}})})}function Mp(t,e){return void 0===e&&(e=!1),Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return[4,xp(t.appConfig,function(r){if(!Lp(r))throw ip.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,Rp(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,dp(100)];case 3:return i.sent(),[4,Rp(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Mp(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw ip.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(Tr.a)(Object(Tr.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Dp(t,e)];case 1:return n=o.sent(),i=Object(Tr.a)(Object(Tr.a)({},e),{authToken:n}),[4,kp(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!op(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Sp(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(Tr.a)(Object(Tr.a)({},e),{authToken:{requestStatus:0}}),[4,kp(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,a),a})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function Rp(t){return xp(t,function(t){if(!Lp(t))throw ip.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(Tr.a)(Object(Tr.a)({},t),{authToken:{requestStatus:0}}):t})}function Lp(t){return void 0!==t&&2===t.registrationStatus}function Fp(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,Pp(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function Vp(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return ap(t)+"/"+n}(t,e),r=lp(t,e),i={method:"DELETE",headers:r},[4,hp(function(){return fetch(n,i)})];case 1:return(o=a.sent()).ok?[3,3]:[4,up("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function Up(t){return ip.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Bd.a("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Up("App Configuration");if(!t.name)throw Up("App Name");try{for(var r=Object(Tr.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Up(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,Pp(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Mp(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,Fp(t.appConfig)];case 1:return n.sent(),[4,Mp(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,xp(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw ip.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ip.create("app-offline");case 3:return[4,Vp(e,n)];case 4:return r.sent(),[4,Sp(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){_p();var n=mp(t),r=vp.get(n);r||(r=new Set,vp.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=mp(t),r=vp.get(n);r&&(r.delete(e),0===r.size&&vp.delete(n),Op())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.25")}(w.a);var qp=((Cp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Cp["only-available-in-window"]="This method is available in a Window context.",Cp["only-available-in-sw"]="This method is available in a service worker context.",Cp["permission-default"]="The notification permission was not granted and dismissed instead.",Cp["permission-blocked"]="The notification permission was not granted and blocked instead.",Cp["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Cp["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Cp["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Cp["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Cp["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Cp["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Cp["token-update-no-token"]="FCM returned no token when updating the user to push.",Cp["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Cp["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Cp["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Cp["invalid-vapid-key"]="The public VAPID key must be a string.",Cp["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Cp),Bp=new _.b("messaging","Messaging",qp),Kp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function Wp(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(Tr.g)([],Object(Tr.f)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hp(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Jp="fcm_token_details_db",Gp="fcm_token_object_Store";function Yp(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(Jp))return[2,null];r.label=2;case 2:return e=null,[4,Object(ep.openDb)(Jp,5,function(r){return Object(Tr.b)(n,void 0,void 0,function(){var n,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Gp)?[4,(n=r.transaction.objectStore(Gp)).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Wp(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Wp(o.auth),p256dh:Wp(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Wp(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(ep.deleteDb)(Jp)];case 4:return r.sent(),[4,Object(ep.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(ep.deleteDb)("undefined")];case 6:return r.sent(),[2,Qp(e)?e:null]}})})}function Qp(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Xp="firebase-messaging-store",$p=null;function Zp(){return $p||($p=Object(ep.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Xp)}})),$p}function tg(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return e=rg(t),[4,Zp()];case 1:return[4,i.sent().transaction(Xp).objectStore(Xp).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Yp(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,eg(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function eg(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return n=rg(t),[4,Zp()];case 1:return r=o.sent(),[4,(i=r.transaction(Xp,"readwrite")).objectStore(Xp).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function ng(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return e=rg(t),[4,Zp()];case 1:return n=i.sent(),[4,(r=n.transaction(Xp,"readwrite")).objectStore(Xp).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function rg(t){return t.appConfig.appId}function ig(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return[4,ug(t)];case 1:n=s.sent(),r=cg(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(sg(t.appConfig),i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),Bp.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw Bp.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Bp.create("token-subscribe-no-token");return[2,o.token]}})})}function og(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return[4,ug(t)];case 1:n=s.sent(),r=cg(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(sg(t.appConfig)+"/"+e.token,i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),Bp.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw Bp.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Bp.create("token-update-no-token");return[2,o.token]}})})}function ag(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return[4,ug(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(sg(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw Bp.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=a.sent(),Bp.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function sg(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function ug(t){var e=t.appConfig,n=t.installations;return Object(Tr.b)(this,void 0,void 0,function(){var t;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function cg(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==Kp&&(n.web.applicationPubKey=e),n}function lg(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw Bp.create("permission-blocked");return[4,pg(e,n)];case 1:return r=s.sent(),[4,tg(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Wp(r.getKey("auth")),p256dh:Wp(r.getKey("p256dh"))},i?[3,3]:[2,dg(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,ag(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,dg(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,fg({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function hg(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,tg(t)];case 1:return(n=i.sent())?[4,ag(t,n.token)]:[3,4];case 2:return i.sent(),[4,ng(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function fg(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,og(e,t)];case 1:return r=a.sent(),i=Object(Tr.a)(Object(Tr.a)({},t),{token:r,createTime:Date.now()}),[4,eg(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,hg(e,n)];case 4:throw a.sent(),o;case 5:return[2]}})})}function dg(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,ig(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,eg(t,r)];case 2:return i.sent(),[2,r.token]}})})}function pg(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hp(e)})]}})})}function gg(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function mg(t){return new Promise(function(e){setTimeout(e,t)})}var vg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Bp.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,tg(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Kp,r.label=2;case 2:return[2,lg(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return hg(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Bp.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Bp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Bp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Bp.create("only-available-in-window")},t.prototype.onMessage=function(){throw Bp.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Bp.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,_g()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,wg(n,e)]:(r=!1,e.notification?[4,Og(bg(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,mg(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(Tr.b)(this,void 0,void 0,function(){var r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,hg(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,tg(this.firebaseDependencies)];case 3:return r=i.sent(),[4,hg(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,lg(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Kp)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(gg(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,yg(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,mg(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=zp.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}})})},t}();function bg(t){var e,n=Object(Tr.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function yg(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return[4,_g()];case 1:e=u.sent();try{for(n=Object(Tr.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function wg(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=zp.PUSH_RECEIVED;try{for(var i=Object(Tr.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function _g(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Og(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Cg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===zp.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),gg(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Bp.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,lg(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Kp),[2]})})},t.prototype.updateSwReg=function(t){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Bp.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),Bp.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,hg(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t;return Object(Tr.e)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw Bp.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Bp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Bp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Bp.create("invalid-sw-registration");if(this.swRegistration)throw Bp.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Bp.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Bp.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case zp.NOTIFICATION_CLICKED:return"notification_open";case zp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function Ig(t){return Bp.create("missing-app-config-values",{valueName:t})}var Tg={isSupported:Eg};function Eg(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}w.a.INTERNAL.registerComponent(new Bd.a("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Ig("App Configuration Object");if(!t.name)throw Ig("App Name");var r=t.options;try{for(var i=Object(Tr.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Ig(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Eg())throw Bp.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new vg(n):new Cg(n)},"PUBLIC").setServiceProps(Tg));var kg="firebasestorage.googleapis.com",Sg=function(t){function e(n,r){var i=t.call(this,xg(n),"Firebase Storage: "+r+" ("+xg(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Tr.d)(e,t),e.prototype._codeEquals=function(t){return xg(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(_.c);function xg(t){return"storage/"+t}function Pg(){return new Sg("unknown","An unknown error occurred, please check the error payload for server response.")}function Ag(){return new Sg("canceled","User canceled the upload/download.")}function Ng(){return new Sg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jg(t){return new Sg("invalid-argument",t)}function Dg(){return new Sg("app-deleted","The Firebase app was deleted.")}function Mg(t){return new Sg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rg(t,e){return new Sg("invalid-format","String does not match format '"+t+"': "+e)}function Lg(t){throw new Sg("internal-error","Internal error: "+t)}var Fg={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Vg=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Ug(t,e){switch(t){case Fg.RAW:return new Vg(qg(e));case Fg.BASE64:case Fg.BASE64URL:return new Vg(Bg(t,e));case Fg.DATA_URL:return new Vg((n=new Kg(e)).base64?Bg(Fg.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Fd){throw Rg(Fg.DATA_URL,"Malformed data URL.")}return qg(e)}(n.rest),new Kg(e).contentType)}var n;throw Pg()}function qg(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Bg(t,e){switch(t){case Fg.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Rg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Fg.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Rg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(Fd){throw Rg(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Kg=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Rg(Fg.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),zg={STATE_CHANGED:"state_changed"},Wg={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hg(t){switch(t){case"running":case"pausing":case"canceling":return Wg.RUNNING;case"paused":return Wg.PAUSED;case"success":return Wg.SUCCESS;case"canceled":return Wg.CANCELED;case"error":default:return Wg.ERROR}}var Jg=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Gg=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Jg.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Jg.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Jg.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Lg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Lg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Lg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Fd){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Lg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Yg=function(){function t(){}return t.prototype.createXhrIo=function(){return new Gg},t}(),Qg=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Fd){return new t(e,"")}if(""===r.path)return r;throw new Sg("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===kg?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new Sg("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Xg=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function $g(t){return"string"==typeof t||t instanceof String}function Zg(t){return tm()&&t instanceof Blob}function tm(){return"undefined"!=typeof Blob}function em(t,e,n,r){if(r<e)throw jg("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw jg("Invalid value for '"+t+"'. Expected "+n+" or less.")}function nm(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function rm(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var im=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(Fd){o(Fd)}else null!==a?((r=Pg()).serverResponse=a.getResponseText(),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?Dg():Ag():new Sg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new om(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new om(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Jg.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new om(a,n))}else{var s=n.getErrorCode()===Jg.ABORT;e(!1,new om(!1,null,s))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Tr.g)([null,t],e));else{var r;u()||a?l.call.apply(l,Object(Tr.g)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout(function(){a=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),om=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function am(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=am();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(tm())return new Blob(t);throw new Sg("unsupported-environment","This browser doesn't seem to support creating Blobs")}var um=function(){function t(t,e){var n=0,r="";Zg(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Zg(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(tm()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(sm.apply(null,r))}var i=e.map(function(t){return $g(t)?Ug(Fg.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function cm(t){var e,n;try{e=JSON.parse(t)}catch(Fd){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function lm(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function hm(t,e){return e}var fm=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||hm}}(),dm=null;function pm(){if(dm)return dm;var t=[];t.push(new fm("bucket")),t.push(new fm("generation")),t.push(new fm("metageneration")),t.push(new fm("name","fullPath",!0));var e=new fm("name");e.xform=function(t,e){return function(t){return!$g(t)||t.length<2?t:lm(t)}(e)},t.push(e);var n=new fm("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new fm("timeCreated")),t.push(new fm("updated")),t.push(new fm("md5Hash",null,!0)),t.push(new fm("cacheControl",null,!0)),t.push(new fm("contentDisposition",null,!0)),t.push(new fm("contentEncoding",null,!0)),t.push(new fm("contentLanguage",null,!0)),t.push(new fm("contentType",null,!0)),t.push(new fm("metadata","customMetadata",!0)),dm=t}function gm(t,e,n){var r=cm(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Qg(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function mm(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var vm=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function bm(t){if(!t)throw Pg()}function ym(t,e){return function(n,r){var i=gm(t,r,e);return bm(null!==i),i}}function wm(t){return function(e,n){var r;return(r=401===e.getStatus()?new Sg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Sg("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Sg("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function _m(t){var e=wm(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Sg("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Om(t,e,n){var r=nm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new vm(r,"GET",ym(t,n),i);return o.errorHandler=_m(e),o}function Cm(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Im=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Tm(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Fd){bm(!1)}return bm(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Em=262144,km=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Sm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var xm=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=pm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Cm(e,r,i),s={name:a.fullPath},u=nm(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=mm(a,n),h=new vm(u,"POST",function(t){var e;Tm(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Fd){bm(!1)}return bm($g(e)),e},t.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=wm(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new vm(n,"POST",function(t){var e=Tm(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Fd){bm(!1)}n||bm(!1);var i=Number(n);return bm(!isNaN(i)),new Im(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=wm(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Em*this._chunkMultiplier,n=new Im(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new Im(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Sg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Ng();var p=new vm(n,"POST",function(t,n){var i,a=Tm(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ym(e,o)(t,n):null,new Im(s,c,"final"===a,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=s||null,p.errorHandler=wm(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Fd){return t._error=Fd,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Em*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=Om(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Cm(e,r,i),c=mm(u,n),l=um.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw Ng();var h={name:u.fullPath},f=nm(o,t.host),d=t.maxUploadRetryTime,p=new vm(f,"POST",ym(t,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=wm(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Ag(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Hg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new km(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Hg(this._state)){case Wg.SUCCESS:Sm(this._resolve.bind(null,this.snapshot))();break;case Wg.CANCELED:case Wg.ERROR:Sm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Hg(this._state)){case Wg.RUNNING:case Wg.PAUSED:t.next&&Sm(t.next.bind(t,this.snapshot))();break;case Wg.SUCCESS:t.complete&&Sm(t.complete.bind(t))();break;case Wg.CANCELED:case Wg.ERROR:t.error&&Sm(t.error.bind(t,this._error))();break;default:t.error&&Sm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Pm=function(){function t(t,e){this._service=t,this._location=e instanceof Qg?e:Qg.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Qg(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return lm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Qg(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Mg(t)},t}();function Am(t){var e={prefixes:[],items:[]};return Nm(t,e).then(function(){return e})}function Nm(t,e,n){return Object(Tr.b)(this,void 0,void 0,function(){var r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return[4,jm(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Nm(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function jm(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&em("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=nm(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new vm(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=cm(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new Qg(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)s=t._makeStorageReference(new Qg(e,c[u].name)),r.items.push(s);return r}(t,e,r)}(t,e,r);return bm(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=wm(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function Dm(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Qg(t._location.bucket,n);return new Pm(t.storage,r)}function Mm(t){return/^[A-Za-z]+:\/\//.test(t)}function Rm(t,e){if(t instanceof Vm){var n=t;if(null==n._bucket)throw new Sg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Pm(n,n._bucket);return null!=e?Rm(r,e):r}if(void 0!==e){if(e.includes(".."))throw jg('`path` param cannot contain ".."');return Dm(t,e)}return t}function Lm(t,e){if(e&&Mm(e)){if(t instanceof Vm)return new Pm(t,e);throw jg("To use ref(service, url), the first argument must be a Storage instance.")}return Rm(t,e)}function Fm(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Qg.makeFromBucketSpec(n,t)}var Vm=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=kg,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Qg.makeFromBucketSpec(r,this._host):Fm(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Qg.makeFromBucketSpec(this._url,t):Fm(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){em("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){em("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Pm(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Xg(Dg());var r=function(t,e,n,r,i){var o=rm(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(s,i),new im(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}();function Um(t,e){return Lm(t=Object(_.p)(t),e)}var qm=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Bm=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new qm(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new qm(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new qm(t,i,i._ref))}:{next:e.next?function(t){return e.next(new qm(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Km=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new zm(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new zm(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),zm=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Dm(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Bm(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new xm(t,new um(e),n)}(t=Object(_.p)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Fg.RAW),this._throwIfRoot("putString");var r=Ug(e,t),i=Object(Tr.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Bm(new xm(this._delegate,new um(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Am(t=Object(_.p)(t))).then(function(t){return new Km(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return jm(t=Object(_.p)(t),e)}(this._delegate,t||void 0).then(function(t){return new Km(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Om(t.storage,t._location,pm()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(t=Object(_.p)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=nm(e.fullServerUrl(),t.host),o=mm(n,r),a=t.maxOperationRetryTime,s=new vm(i,"PATCH",ym(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=_m(e),s}(t.storage,t._location,e,pm()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(t=Object(_.p)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=nm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new vm(r,"GET",function(t,e){return function(n,r){var i=gm(t,r,e);return bm(null!==i),function(t,e,n){var r=cm(e);if(null===r)return null;if(!$g(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return nm("/b/"+o(t.bucket)+"/o/"+o(r),n)+rm({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=_m(e),o}(t.storage,t._location,pm()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new Sg("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(_.p)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=nm(e.fullServerUrl(),t.host),r=new vm(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=_m(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(t=Object(_.p)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Mg(t)},t}(),Wm=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Mm(t))throw jg("ref() expected a child path but got a URL, use refFromURL instead.");return new zm(Um(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Mm(t))throw jg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qg.makeFromUrl(t,this._delegate.host)}catch(Fd){throw jg("refFromUrl() expected a valid full URL but got an invalid one.")}return new zm(Um(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function Hm(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Wm(r,new Vm(r,i,new Yg,n,w.a.SDK_VERSION))}!function(t){var e={TaskState:Wg,TaskEvent:zg,StringFormat:Fg,Storage:Vm,Reference:zm};t.INTERNAL.registerComponent(new Bd.a("storage",Hm,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.1")}(w.a);var Jm,Gm,Ym,Qm="0.4.11",Xm=Qm,$m="FB-PERF-TRACE-MEASURE",Zm="_wt_",tv="_fcp",ev="_fid",nv="@firebase/performance/config",rv="@firebase/performance/configexpire",iv="Performance",ov=((Jm={})["trace started"]="Trace {$traceName} was started before.",Jm["trace stopped"]="Trace {$traceName} is not running.",Jm["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Jm["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Jm["no window"]="Window is not available.",Jm["no app id"]="App id is not available.",Jm["no project id"]="Project id is not available.",Jm["no api key"]="Api key is not available.",Jm["invalid cc log"]="Attempted to queue invalid cc event",Jm["FB not default"]="Performance can only start when Firebase app instance is the default one.",Jm["RC response not ok"]="RC response is not ok",Jm["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Jm["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Jm["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Jm["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Jm),av=new _.b("performance",iv,ov),sv=new O.b(iv);sv.logLevel=O.a.INFO;var uv,cv=function(){function t(t){if(this.window=t,!t)throw av.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(_.x)()||(sv.info("IndexedDB is not supported by current browswer"),!1):(sv.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Gm&&(Gm=new t(Ym)),Gm},t}();function lv(t,e){var n=t.length-e.length;if(n<0||n>1)throw av.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var hv,fv=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=lv("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=lv("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw av.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw av.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw av.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===uv&&(uv=new t),uv},t}();function dv(){return hv}var pv=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),gv=["firebase_","google_","ga_"],mv=new RegExp("^[a-zA-Z]\\w*$");function vv(){var t=cv.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function bv(){switch(cv.getInstance().document.visibilityState){case"visible":return pv.VISIBLE;case"hidden":return pv.HIDDEN;default:return pv.UNKNOWN}}function yv(){var t=cv.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function wv(t){if(!t)return t;var e=fv.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=_v(e.tracesSamplingRate),e.logNetworkAfterSampling=_v(e.networkRequestsSamplingRate),t}function _v(t){return Math.random()<=t}var Ov,Cv=1;function Iv(){return Cv=2,Ov=Ov||function(){var t=cv.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=fv.getInstance().installationsService.getId()).then(function(t){hv=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=cv.getInstance().localStorage;if(t){var e=t.getItem(rv);if(e&&Number(e)>Date.now()){var n=t.getItem(nv);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(wv(e),Promise.resolve()):function(t){return(e=fv.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+fv.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+fv.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:fv.getInstance().getAppId(),app_version:Xm,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw av.create("RC response not ok")})}).catch(function(){sv.info("Could not fetch config, will use default configs")});var e}(t).then(wv).then(function(t){return function(t){var e=cv.getInstance().localStorage;t&&e&&(e.setItem(nv,JSON.stringify(t)),e.setItem(rv,String(Date.now()+60*fv.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return Tv()},function(){return Tv()})}function Tv(){Cv=3}var Ev,kv=1e4,Sv=3,xv=[],Pv=!1;function Av(t){setTimeout(function(){var t,e;if(0!==Sv)return xv.length?(e=(t=xv.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=fv.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||sv.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=kv;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(xv=Object(Tr.g)(Object(Tr.g)([],e),xv),sv.info("Retry transport request later.")),Sv=3,Av(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fv.getInstance().logSource,log_event:e},t).catch(function(){xv=Object(Tr.g)(Object(Tr.g)([],t),xv),Sv--,sv.info("Tries left: "+Sv+"."),Av(kv)})):Av(kv)},t)}function Nv(t){if(!t.eventTime||!t.message)throw av.create("invalid cc log");xv=Object(Tr.g)(Object(Tr.g)([],xv),[t])}function jv(t,e){Ev||(Ev=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Nv({message:t.apply(void 0,e),eventTime:Date.now()})}}(Rv)),Ev(t,e)}function Dv(t){var e=fv.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&cv.getInstance().requiredApisAvailable()&&(t.isAuto&&bv()!==pv.VISIBLE||(3===Cv?Mv(t):Iv().then(function(){return Mv(t)},function(){return Mv(t)})))}function Mv(t){if(dv()){var e=fv.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return jv(t,1)},0)}}function Rv(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Lv(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Lv(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Lv(){return{google_app_id:fv.getInstance().getAppId(),app_instance_id:dv(),web_app_info:{sdk_version:Xm,page_url:cv.getInstance().getUrl(),service_worker_status:vv(),visibility_state:bv(),effective_connection_type:yv()},application_process_state:0}}var Fv=["_fp",tv,ev],Vv=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=cv.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw av.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw av.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Dv(this)},t.prototype.record=function(t,e,n){if(t<=0)throw av.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw av.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(Tr.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Dv(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(Zm)&&Fv.indexOf(i)>-1)&&i.startsWith("_"))throw av.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&sv.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||gv.some(function(t){return n.startsWith(t)})||!n.match(mv)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw av.create("invalid attribute name",{attributeName:t});if(!i)throw av.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(Tr.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=cv.getInstance().getUrl();if(i){var o=new t(Zm+i,!0),a=Math.floor(1e3*cv.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find(function(t){return"first-paint"===t.name});s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(tv,Math.floor(1e3*u.startTime)),r&&o.putMetric(ev,Math.floor(1e3*r))}Dv(o)}},t.createUserTimingTrace=function(e){Dv(new t(e,!1,e))},t}();function Uv(t){var e=t;if(e&&void 0!==e.responseStart){var n=cv.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=fv.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return jv(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function qv(){dv()&&(setTimeout(function(){return function(){var t=cv.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){Vv.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),Vv.createOobTrace(e,n,t))})}else Vv.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=cv.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Uv(n[e]);t.setupObserver("resource",Uv)}()},0),setTimeout(function(){return function(){for(var t=cv.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Bv(n[e]);t.setupObserver("measure",Bv)}()},0))}function Bv(t){var e=t.name;e.substring(0,$m.length)!==$m&&Vv.createUserTimingTrace(e)}var Kv=function(){function t(t){this.app=t,cv.getInstance().requiredApisAvailable()&&Object(_.O)().then(function(t){t&&(Pv||(Av(5500),Pv=!0),Iv().then(qv,qv))}).catch(function(t){sv.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new Vv(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return fv.getInstance().instrumentationEnabled},set:function(t){fv.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return fv.getInstance().dataCollectionEnabled},set:function(t){fv.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Bd.a("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw av.create("FB not default");if("undefined"==typeof window)throw av.create("no window");return function(t){Ym=t}(window),fv.getInstance().firebaseAppInstance=t,fv.getInstance().installationsService=e,new Kv(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",Qm)}(w.a);var zv,Wv="https://www.googletagmanager.com/gtag/js",Hv=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),Jv=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),Gv=new O.b("@firebase/analytics");function Yv(t,e,n,r,i,o){return Object(Tr.b)(this,void 0,void 0,function(){var a,s,u,c;return Object(Tr.e)(this,function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),Gv.error(c),[3,8];case 8:return t(Hv.CONFIG,i,o),[2]}})})}function Qv(t,e,n,r,i){return Object(Tr.b)(this,void 0,void 0,function(){var o,a,s,u,c,l,h;return Object(Tr.e)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=f.sent(),u=function(t){var n=s.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(Hv.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),Gv.error(h),[3,5];case 5:return[2]}})})}var Xv=((zv={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",zv["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",zv["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",zv["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zv["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zv["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",zv["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",zv["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',zv["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',zv),$v=new _.b("analytics","Analytics",Xv),Zv=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function tb(t){var e;return Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];a="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return s=u.sent(),(null===(e=s.error)||void 0===e?void 0:e.message)&&(a=s.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw $v.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a});case 6:return[2,o.json()]}var c})})}function eb(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Zv),Object(Tr.b)(this,void 0,void 0,function(){var e,a,s,u,c,l,h;return Object(Tr.e)(this,function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,nb(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return Gv.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,tb(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof _.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return Gv.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?Object(_.j)(o,r.intervalMillis,30):Object(_.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),Gv.debug("Calling attemptFetch again in "+l+" millis"),[2,eb(t,h,n,r)];case 7:return[2]}})})}function nb(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r($v.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var rb,ib,ob=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),ab={},sb=[],ub={},cb="dataLayer",lb="gtag",hb=!1;function fb(t){if(hb)throw $v.create("already-initialized");t.dataLayerName&&(cb=t.dataLayerName),t.gtagName&&(lb=t.gtagName)}var db="analytics";function pb(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:if(Object(_.t)())return[2,!1];if(!Object(_.e)())return[2,!1];if(!Object(_.x)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(_.O)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Bd.a(db,function(t){return function(t,e){!function(){var t=[];if(Object(_.t)()&&t.push("This is a browser extension environment."),Object(_.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=$v.create("invalid-analytics-context",{errorInfo:e});Gv.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw $v.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $v.create("no-api-key");Gv.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ab[i])throw $v.create("already-exists",{id:i});if(!hb){n=cb,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return Object(Tr.b)(this,void 0,void 0,function(){var s;return Object(Tr.e)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Hv.EVENT?[3,2]:[4,Qv(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==Hv.CONFIG?[3,4]:[4,Yv(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(Hv.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Gv.error(s),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(ab,sb,ub,cb,lb);ib=o.wrappedGtag,rb=o.gtagCore,hb=!0}return ab[i]=function(t,e,n,r,i,o){return Object(Tr.b)(this,void 0,void 0,function(){var a,s,u,c,l,h,f;return Object(Tr.e)(this,function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Zv),Object(Tr.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return Object(Tr.e)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw $v.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw $v.create("no-api-key")}return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new ob,setTimeout(function(){return Object(Tr.b)(u,void 0,void 0,function(){return Object(Tr.e)(this,function(t){return s.abort(),[2]})})},6e4),[2,eb({appId:r,apiKey:i,measurementId:o},a,s,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Gv.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return Gv.error(t)}),e.push(a),s=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t;return Object(Tr.e)(this,function(e){switch(e.label){case 0:return Object(_.x)()?[3,1]:(Gv.warn($v.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(_.O)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Gv.warn($v.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Wv))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=Wv+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(Hv.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,sb,ub,e,rb,cb),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(Tr.b)(this,void 0,void 0,function(){var o,a;return Object(Tr.e)(this,function(s){switch(s.label){case 0:return i&&i.global?(t(Hv.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=Object(Tr.a)(Object(Tr.a)({},r),{send_to:o}),t(Hv.EVENT,n,a),s.label=3;case 3:return[2]}})})})(ib,ab[i],t,e,n).catch(function(t){return Gv.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(Hv.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Hv.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(ib,ab[i],t,e).catch(function(t){return Gv.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i;return Object(Tr.e)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(Hv.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Hv.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(ib,ab[i],t,e).catch(function(t){return Gv.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(Tr.b)(this,void 0,void 0,function(){var i,o,a,s,u;return Object(Tr.e)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)i["user_properties."+(s=a[o])]=n[s];return t(Hv.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Hv.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(ib,ab[i],t,e).catch(function(t){return Gv.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(ab[i],t).catch(function(t){return Gv.error(t)})},INTERNAL:{delete:function(){return delete ab[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:fb,EventName:Jv,isSupported:pb})),t.INTERNAL.registerComponent(new Bd.a("analytics-internal",function(t){try{return{logEvent:t.getProvider(db).getImmediate().logEvent}}catch(Fd){throw $v.create("interop-component-reg-failed",{reason:Fd})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.9")}(w.a);var gb,mb=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}})})},t}(),vb=((gb={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",gb["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",gb["registration-api-key"]="Undefined API key. Check Firebase app initialization.",gb["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",gb["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",gb["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",gb["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",gb["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",gb["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",gb["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',gb["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',gb["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",gb["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",gb),bb=new _.b("remoteconfig","Remote Config",vb),yb=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g,m;return Object(Tr.e)(this,function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=v.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===b&&(b=navigator),b.languages&&b.languages[0]||b.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},a=fetch(r,o),s=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([a,s])];case 3:return v.sent(),[4,a];case 4:return u=v.sent(),[3,6];case 5:throw c=v.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),bb.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,u.json()];case 8:return g=v.sent(),[3,10];case 9:throw m=v.sent(),bb.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:d=g.entries,p=g.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw bb.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var b})})},t}(),wb=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),_b=["1","true","t","yes","y","on"],Ob=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&_b.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),Cb=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=O.a.DEBUG;break;case"silent":this._logger.logLevel=O.a.SILENT;break;default:this._logger.logLevel=O.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Tr.e)(this,function(i){switch(i.label){case 0:t=new wb,setTimeout(function(){return Object(Tr.b)(r,void 0,void 0,function(){return Object(Tr.e)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof _.c&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(Tr.b)(this,void 0,void 0,function(){return Object(Tr.e)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(Tr.a)(Object(Tr.a)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Ob("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Ob("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Ob("static"))},t}();function Ib(t,e){var n=t.target.error||void 0;return bb.create(e,{originalErrorMessage:n&&n.message})}var Tb="app_namespace_store",Eb=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Ib(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Tb,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([Tb],"readonly").objectStore(Tb),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(Ib(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Fd){i(bb.create("storage-get",{originalErrorMessage:Fd&&Fd.message}))}})]}})})},t.prototype.set=function(t,e){return Object(Tr.b)(this,void 0,void 0,function(){var n,r=this;return Object(Tr.e)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var a=n.transaction([Tb],"readwrite").objectStore(Tb),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(Ib(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Fd){o(bb.create("storage-set",{originalErrorMessage:Fd&&Fd.message}))}})]}})})},t.prototype.delete=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tr.e)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([Tb],"readwrite").objectStore(Tb),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(Ib(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(Fd){i(bb.create("storage-delete",{originalErrorMessage:Fd&&Fd.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),kb=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(Tr.b)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Sb(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(bb.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var xb,Pb=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(Tr.b)(this,void 0,void 0,function(){var e;return Object(Tr.e)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(Tr.b)(this,void 0,void 0,function(){var e,i,o;return Object(Tr.e)(this,function(a){switch(a.label){case 0:return[4,Sb(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof _.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(_.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),Ab="@firebase/remote-config";(xb=w.a).INTERNAL.registerComponent(new Bd.a("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw bb.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw bb.create("registration-project-id");if(!s)throw bb.create("registration-api-key");if(!u)throw bb.create("registration-app-id");var c=new Eb(u,r.name,n=n||"firebase"),l=new kb(c),h=new O.b(Ab);h.logLevel=O.a.ERROR;var f=new yb(i,xb.SDK_VERSION,n,a,s,u),d=new Pb(f,c),p=new mb(d,c,l,h),g=new Cb(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),xb.registerVersion(Ab,"0.1.36"),w.a.registerVersion("firebase","8.4.3","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),w.a.registerVersion("firebase","8.4.3");class Nb{constructor(t,e,n=!1){this.target=t,this.name=e,this.async=n}get instance(){return b(this.target)}}function jb(t,e){return n=>t(e&&e.each?"each value in ":"",n)}function Db(t,e){return function(n,r){!function(t){let e;if(t.validator instanceof Function){if(e=t.validator,b(l).getTargetValidatorConstraints(t.validator).length>1)throw`More than one implementation of ValidatorConstraintInterface found for validator on: ${t.target.name}:${t.propertyName}`}else{const n=t.validator;e=class{validate(t,e){return n.validate(t,e)}defaultMessage(t){return n.defaultMessage?n.defaultMessage(t):""}},h().addConstraintMetadata(new Nb(e,t.name,t.async))}const n={type:t.name&&d.isValid(t.name)?t.name:d.CUSTOM_VALIDATION,target:t.target,propertyName:t.propertyName,validationOptions:t.options,constraintCls:e,constraints:t.constraints};h().addValidationMetadata(new s(n))}({name:t.name,target:n.constructor,propertyName:r,options:e,constraints:t.constraints,validator:t.validator})}}var Mb=n("DdlK"),Rb=n.n(Mb);function Lb(t,e){return Db({name:"minLength",constraints:[t],validator:{validate:(t,e)=>function(t,e){return"string"==typeof t&&Rb()(t,{min:e})}(t,e.constraints[0]),defaultMessage:jb(t=>t+"$property must be longer than or equal to $constraint1 characters",e)}},e)}function Fb(t){return Db({name:"isDate",validator:{validate:(t,e)=>function(t){return t instanceof Date&&!isNaN(t.getTime())}(t),defaultMessage:jb(t=>t+"$property must be a Date instance",t)}},t)}var Vb=n("eWa3"),Ub=n.n(Vb);function qb(t,e){return Db({name:"isEmail",constraints:[t],validator:{validate:(t,e)=>function(t,e){return"string"==typeof t&&Ub()(t,e)}(t,e.constraints[0]),defaultMessage:jb(t=>t+"$property must be an email",e)}},e)}let Bb=(()=>{class t{constructor(t,e,n,r,i,o,a,s){this.name=t,this.last_name=e,this.email=this.original_email=n,this.gender=r,this.phone_number=i,this.photo_url=o,this.provider_id=a,this.uid=s}}var e;return Object(Tr.c)([Lb(1)],t.prototype,"name",void 0),Object(Tr.c)([Lb(1)],t.prototype,"last_name",void 0),Object(Tr.c)([Fb()],t.prototype,"birthday",void 0),Object(Tr.c)([qb()],t.prototype,"email",void 0),Object(Tr.c)([Lb(1)],t.prototype,"gender",void 0),Object(Tr.c)([Db({name:"min",constraints:[1],validator:{validate:(t,e)=>{return r=e.constraints[0],"number"==typeof(n=t)&&"number"==typeof r&&n>=r;var n,r},defaultMessage:jb(t=>t+"$property must not be less than $constraint1",e)}},e)],t.prototype,"phone_number",void 0),t})();var Kb=n("AytR");function zb(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Wb(t){zb(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Hb(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}let Jb=(()=>{class t{constructor(t){this.router=t}fnInitializeFirebase(){w.a.initializeApp(Kb.a.firebase),this.dbFS=w.a.firestore(),this.m_auth=w.a.auth(),this.m_provider_google=new w.a.auth.GoogleAuthProvider,this.m_provider_twitter=new w.a.auth.TwitterAuthProvider,this.m_provider_facebook=new w.a.auth.FacebookAuthProvider}fnWaitForPromises(){return new Promise((t,e)=>{w.a.auth().onAuthStateChanged(n=>{if(n){const r=n.providerData[0];this.m_user_collection=this.dbFS.collection("users").doc(n.uid).get().then(e=>{e.exists?(this.m_user=e.data(),this.m_user.birthday=function(t){return zb(1,arguments),Wb(1e3*Hb(t))}(this.m_user.birthday.seconds),y(Object.assign(new Bb("","","","",null,"","",""),this.m_user)).then(e=>{0===e.length?t(this.m_user):this.router.navigate(["/profile-info/edit"]).then(t=>console.log("Missing information"))})):(this.router.navigate(["/profile-info/add"]).then(t=>console.log("New user")),this.m_user=new Bb("google.com"===r.providerId||"twitter.com"===r.providerId||"facebook.com"===r.providerId?r.displayName.split(" ")[0]:r.displayName,"",r.email,"",null,r.photoURL,r.providerId,n.uid),t(this.m_user))}).catch(t=>{e(t)})}else this.m_user=void 0,e("undefined")})})}loginPassword(t,e){return new Promise((n,r)=>{w.a.auth().signInWithEmailAndPassword(t,e).then(t=>{window.location.href="/home",console.log("A user has logged in with password."),n(t)}).catch(t=>r(t))})}registerPassword(t,e){return new Promise((n,r)=>{w.a.auth().createUserWithEmailAndPassword(t,e).then(t=>{console.log("A user has registered with password."),n(t)}).catch(t=>console.log(r(t)))})}resetPassword(t){return new Promise((e,n)=>{w.a.auth().sendPasswordResetEmail(t).then(t=>{console.log("An email has been sent to change the password."),e(t)}).catch(t=>console.log(n(t)))})}changePassword(t){return new Promise((e,n)=>{w.a.auth().currentUser.updatePassword(t).then(t=>{console.log("Password has been changed."),e(t)}).catch(t=>console.log(n(t)))})}changeEmail(t){return new Promise((e,n)=>{w.a.auth().currentUser.updateEmail(t).then(t=>{console.log("Email has been changed."),e(t)}).catch(t=>console.log(n(t)))})}deleteUser(){return new Promise((t,e)=>{w.a.auth().currentUser.delete().then(e=>{console.log("User has been delete."),t(e)}).catch(t=>console.log(e(t)))})}loginWithGoogle(){return new Promise((t,e)=>{w.a.auth().signInWithPopup(this.m_provider_google).then(e=>{this.router.navigate(["/home"]).then(t=>console.log("A user has logged in with google.")),console.log(""),t(e)}).catch(t=>{console.log(e(t))})})}loginWithFacebook(){w.a.auth().signInWithPopup(this.m_provider_facebook).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}loginWithTwitter(){w.a.auth().signInWithPopup(this.m_provider_twitter).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}logoutUser(){w.a.auth().signOut().then(t=>{this.router.navigate(["/home"]).then(t=>console.log("Logout completed.")),window.location.href="/home",console.log("l")})}fnGetTimeStamp(){return w.a.firestore.FieldValue.serverTimestamp()}fnCreateDate(t){return w.a.firestore.Timestamp.fromDate(new Date(t))}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(o.b))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Gb=n("sYmb");let Yb=(()=>{class t{constructor(t){this.translate=t,this.m_selected="",this.m_selected="es"}onPromiseLanguage(){this.translate.getBrowserLang(),this.translate.setDefaultLang(this.m_selected)}onSelectLanguage(t){this.translate.use(t),this.m_selected=t}onGetLanguage(){return this.m_selected}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(Gb.d))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Qb=(()=>{class t{constructor(t){this.languageService=t}ngOnInit(){}ngAfterViewInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Yb))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-header"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),Xb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Bb({type:t,selectors:[["app-policies"]],decls:2,vars:0,template:function(t,e){1&t&&(a.Kb(0,"p"),a.fc(1,"policies works!"),a.Jb())},styles:[""]}),t})(),$b=(()=>{class t{constructor(){}ngOnInit(){}openNew(t){window.open(t,"_blank")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Bb({type:t,selectors:[["app-footer"]],decls:14,vars:0,consts:[[1,"footer_section"],[1,"logo_footer"],["src","../../../assets/images/logos/hortenza-complete.png","alt","...",1,"logo"],[1,"container-text"],["href","#"],[1,"social-media_footer"],["href","https://www.facebook.com/hortenzapachuca/","target","_blank",1,"social-icon"],[1,"fab","fa-facebook-f"],["href","https://www.instagram.com/hortenzapachuca/?hl=es","target","_blank",1,"social-icon"],[1,"fab","fa-instagram"]],template:function(t,e){1&t&&(a.Kb(0,"footer",0),a.Kb(1,"div",1),a.Ib(2,"img",2),a.Jb(),a.Kb(3,"div",3),a.Kb(4,"p"),a.fc(5,"Copyright 2021 Hortenza. Todos los derechos reservados."),a.Jb(),a.Kb(6,"a",4),a.fc(7,"Pol\xedtica de Privacidad"),a.Jb(),a.Ib(8,"app-policies"),a.Jb(),a.Kb(9,"div",5),a.Kb(10,"a",6),a.Ib(11,"span",7),a.Jb(),a.Kb(12,"a",8),a.Ib(13,"span",9),a.Jb(),a.Jb(),a.Jb())},directives:[Xb],styles:[".footer_section[_ngcontent-%COMP%]{background-color:#363636;display:flex;justify-content:space-around;padding-top:3em;padding-bottom:3em}.logo[_ngcontent-%COMP%]{width:120px;height:120px}.container-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;line-height:200%}.container-text[_ngcontent-%COMP%], .container-text[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-family:Mulish,sans-serif;font-size:18px;font-weight:300}.container-text[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border-bottom:2px solid #c0994d}.social-media_footer[_ngcontent-%COMP%]{display:flex}.social-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fffaf0;width:65px;height:65px;list-style:none;margin:10px;border-radius:50%;text-decoration:none;font-size:25px;color:#c0994d}.social-icon[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.social-icon[_ngcontent-%COMP%]:active{background-color:#c2c2c2}@media only screen and (max-width:800px){.footer_section[_ngcontent-%COMP%]{height:550px;flex-direction:column;align-items:center}.container-text[_ngcontent-%COMP%]{width:80vw;line-height:200%;text-align:center}}"]}),t})(),Zb=(()=>{class t{constructor(t,e){this.afService=t,this.languageService=e,this.afService.fnInitializeFirebase(),this.languageService.onPromiseLanguage()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Jb),a.Hb(Yb))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-pages"]],decls:4,vars:0,template:function(t,e){1&t&&(a.Kb(0,"div"),a.Ib(1,"app-header"),a.Ib(2,"router-outlet"),a.Ib(3,"app-footer"),a.Jb())},directives:[Qb,o.f,$b],styles:[""]}),t})();const ty=["cover"];let ey=(()=>{class t{constructor(t,e){this.renderer=t,this.afService=e}ngOnInit(){}ngAfterViewInit(){this.renderer.setStyle(this.cover.nativeElement,"width",window.innerWidth+"px"),this.renderer.setStyle(this.cover.nativeElement,"height",window.innerHeight+"px")}openNew(t){window.open(t,"_blank")}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(Jb))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&a.kc(ty,!0),2&t){let t;a.Zb(t=a.Sb())&&(e.cover=t.first)}},decls:186,vars:0,consts:[[1,"header"],[1,"social-media_footer"],[1,"social-icon","nav-social_button",3,"click"],[1,"fab","fa-facebook-f"],[1,"fab","fa-instagram"],[1,"overlay"],["src","../../../assets/images/logos/hortenza-complete.png","alt","...",1,"logo"],[1,"header-title"],["href","#","href","javascript:void(0)","routerLink","../categories",1,"nav-button"],[1,"new-experiences_section"],[1,"title_section"],[1,"component_ne-01"],[1,"container_ne-01"],[1,"content_ne-01"],[1,"icon_ne-01"],["src","assets/images/icons/desayuno.svg","alt","..."],[1,"title-container_ne-01"],[1,"title_ne-01"],[1,"text-content_ne-01"],[1,"image_ne-01"],["src","assets/images/food/desayuno.jpeg","alt","...",1,"image-full"],[1,"component_ne-02"],[1,"image_ne-02"],["src","assets/images/food/comida.jpg","alt","...",1,"image-full"],[1,"container_ne-02"],[1,"content_ne-02"],[1,"icon_ne-02"],["src","assets/images/icons/comida.svg","alt","..."],[1,"title-container_ne-02"],[1,"title_ne-02"],[1,"text-content_ne-02"],[1,"component_ne-03"],[1,"container_ne-03"],[1,"content_ne-03"],[1,"icon_ne-03"],["src","assets/images/icons/cena.svg","alt","..."],[1,"title-container_ne"],[1,"title_ne-03"],[1,"text-content_ne-03"],[1,"image_ne-03"],["src","assets/images/food/bebidas-2.jpg","alt","...",1,"image-full"],[1,"slider_section"],[1,"slider"],["id","carouselExampleIndicators","data-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["data-target","#carouselExampleIndicators","data-slide-to","0",1,"active"],["data-target","#carouselExampleIndicators","data-slide-to","1"],["data-target","#carouselExampleIndicators","data-slide-to","2"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","assets/images/home/background-4.jpg","alt","First slide",1,"d-block","w-100"],[1,"carousel-item"],["src","assets/images/home/background-5.jpg","alt","Second slide",1,"d-block","w-100"],["src","assets/images/home/background-1.jpg","alt","Third slide",1,"d-block","w-100"],["href","#carouselExampleIndicators","role","button","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["href","#carouselExampleIndicators","role","button","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"content-slider"],[1,"subtitle_section"],[1,"reserve-container"],[1,"reserve-border"],["href","https://api.whatsapp.com/send?phone=527712203672&text=Bienvenido",1,"button-cta"],[1,"kitchen_section"],[1,"container-kitchen"],[1,"title_kitchen-section"],[1,"title_kitchen"],[1,"title-span_kitchen"],[1,"component-right_kitchen"],[1,"container-right_kitchen"],[1,"content_kitchen"],[1,"component-text_kitchen"],[1,"component-title_kitchen"],[1,"component-button_kitchen"],["href","https://firebasestorage.googleapis.com/v0/b/hortenza-cocina-artesanal.appspot.com/o/Documentos%2FMen\xfa%2Fcarta_en_mantel_desayuno_10_de_mayo__5_.pdf?alt=media&token=3c4b7523-a4ae-4b6f-86e1-2a25530562f1","target","_blank",1,"text-button_kitchen"],[1,"icon_arrow-right"],["src","assets/images/icons/arrow-right.svg","alt","...",1,"icons"],[1,"image_kitchen"],["src","assets/images/food/desayuno-2.jpg","alt","...",1,"image-full"],[1,"component-left_kitchen"],["src","assets/images/food/comida-2.jpg","alt","...",1,"image-full"],[1,"container-left_kitchen"],["href","https://firebasestorage.googleapis.com/v0/b/hortenza-cocina-artesanal.appspot.com/o/Documentos%2FMen%C3%BA%2Fcarta_en_mantel_comida_10_de_mayo__4_.pdf?alt=media&token=6d7ed882-4dd3-46f2-8344-24e090b172d7","target","_blank",1,"text-button_kitchen"],["src","assets/images/icons/arrow-right.svg","alt","...",1,"image-full"],["src","assets/images/food/bebidas.jpeg","alt","...",1,"image-full"],[1,"subscription_section"],[1,"buttons_subscription"],[1,"social-buttons_subscription",3,"click"],["src","assets/images/icons/facebook_2-icon.svg","alt","..."],["src","assets/images/icons/google-icon.svg","alt","..."],["src","assets/images/icons/twitter-icon.svg","alt","..."],[1,"social-buttons_subscription"],["src","assets/images/icons/email_2-icon.svg","alt","..."],[1,"contact_section"],[1,"container-contact"],[1,"contact-button"],[1,"icon-contact_button"],["src","assets/images/icons/facebook-icon.svg","alt","...",1,"icons"],[1,"text-contact_button"],["href","https://www.facebook.com/hortenzapachuca/"],["src","assets/images/icons/phone-icon.svg","alt","...",1,"icons"],["href","tel:1330613"],["src","assets/images/icons/email-icon.svg","alt","...",1,"icons"],["href","mailto:contacto@hortenza.com"],[1,"map_section"],[1,"map"],["rel","stylesheet","href",a.jc("https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css")],["href","https://api.whatsapp.com/send?phone=527712203672&text=Bienvenido","target","_blank",1,"float"],[1,"fa","fa-whatsapp","my-float"]],template:function(t,e){1&t&&(a.Kb(0,"section",0),a.Kb(1,"nav"),a.Kb(2,"div",1),a.Kb(3,"a",2),a.Rb("click",function(){return e.openNew("https://www.facebook.com/hortenzapachuca/")}),a.Ib(4,"span",3),a.Jb(),a.Kb(5,"a",2),a.Rb("click",function(){return e.openNew("https://www.instagram.com/hortenzapachuca/?hl=es")}),a.Ib(6,"span",4),a.Jb(),a.Jb(),a.Jb(),a.Kb(7,"div",5),a.Ib(8,"img",6),a.Kb(9,"h2",7),a.fc(10,"Combinando la cocina artesanal francesa, italiana y mexicana, dentro de un ambiente acogedor."),a.Jb(),a.Kb(11,"a",8),a.fc(12," Men\xfa "),a.Jb(),a.Jb(),a.Jb(),a.Kb(13,"section",9),a.Kb(14,"h3",10),a.fc(15,"Nuevas Experiencias"),a.Jb(),a.Kb(16,"div",11),a.Kb(17,"div",12),a.Kb(18,"div",13),a.Kb(19,"div",14),a.Ib(20,"img",15),a.Jb(),a.Kb(21,"div",16),a.Kb(22,"p",17),a.fc(23," 8:00 a.m - 11:00 a.m"),a.Jb(),a.Jb(),a.Jb(),a.Kb(24,"div",18),a.Kb(25,"p"),a.fc(26," Disfruta en la ma\xf1ana con un delicioso desayuno acompa\xf1ado de pan reci\xe9n horneado y con el caf\xe9 m\xe1s exquisito de M\xe9xico. "),a.Jb(),a.Jb(),a.Jb(),a.Kb(27,"div",19),a.Ib(28,"img",20),a.Jb(),a.Jb(),a.Kb(29,"div",21),a.Kb(30,"div",22),a.Ib(31,"img",23),a.Jb(),a.Kb(32,"div",24),a.Kb(33,"div",25),a.Kb(34,"div",26),a.Ib(35,"img",27),a.Jb(),a.Kb(36,"div",28),a.Kb(37,"p",29),a.fc(38," 11:00 a.m - 6:00 p.m"),a.Jb(),a.Jb(),a.Jb(),a.Kb(39,"div",30),a.Kb(40,"p"),a.fc(41," A medio d\xeda, disfruta de la gran selecci\xf3n de platillos que nuestro chef elabora al momento para ti. "),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(42,"div",31),a.Kb(43,"div",32),a.Kb(44,"div",33),a.Kb(45,"div",34),a.Ib(46,"img",35),a.Jb(),a.Kb(47,"div",36),a.Kb(48,"p",37),a.fc(49,"6:00 p.m - 11:00 p.m"),a.Jb(),a.Jb(),a.Jb(),a.Kb(50,"div",38),a.Kb(51,"p"),a.fc(52," En la noche, disfruta de un ambiente \xfanico y tenue con los mejores vinos y c\xf3cteles. "),a.Jb(),a.Jb(),a.Jb(),a.Kb(53,"div",39),a.Ib(54,"img",40),a.Jb(),a.Jb(),a.Jb(),a.Kb(55,"section",41),a.Kb(56,"div",42),a.Kb(57,"div",43),a.Kb(58,"ol",44),a.Ib(59,"li",45),a.Ib(60,"li",46),a.Ib(61,"li",47),a.Jb(),a.Kb(62,"div",48),a.Kb(63,"div",49),a.Ib(64,"img",50),a.Jb(),a.Kb(65,"div",51),a.Ib(66,"img",52),a.Jb(),a.Kb(67,"div",51),a.Ib(68,"img",53),a.Jb(),a.Jb(),a.Kb(69,"a",54),a.Ib(70,"span",55),a.Kb(71,"span",56),a.fc(72,"Previous"),a.Jb(),a.Jb(),a.Kb(73,"a",57),a.Ib(74,"span",58),a.Kb(75,"span",56),a.fc(76,"Next"),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(77,"div",59),a.Kb(78,"div",60),a.Kb(79,"p"),a.fc(80," Hortenza ofrece sabores para todos los gustos. La totalidad de sus platillos son elaborados de manera artesanal, utilizando ingredientes de la m\xe1s alta calidad. "),a.Jb(),a.Jb(),a.Kb(81,"div",61),a.Kb(82,"div",62),a.Kb(83,"h3"),a.fc(84,"No dejes pasar esta experiencia"),a.Jb(),a.Kb(85,"a",63),a.fc(86," Reservar "),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(87,"section",64),a.Kb(88,"div",65),a.Kb(89,"div",66),a.Kb(90,"h3",67),a.fc(91," Ven a conocer una experiencia diferente"),a.Jb(),a.Kb(92,"h3",68),a.fc(93,"y disfruta de nuestra alta cocina artesanal."),a.Jb(),a.Jb(),a.Kb(94,"div",69),a.Kb(95,"div",70),a.Kb(96,"div",71),a.Kb(97,"div",72),a.Kb(98,"h2",73),a.fc(99,"Desayunos"),a.Jb(),a.Kb(100,"p"),a.fc(101," Nuestros desayunos, se distinguen por sus panes franceses reci\xe9n horneados acompa\xf1ados del mejor caf\xe9 que tiene M\xe9xico. Si lo prefieres, tambi\xe9n podr\xe1s optar por platos m\xe1s elaborados, como un croque madame o un delicioso omelette. "),a.Jb(),a.Jb(),a.Kb(102,"div",74),a.Kb(103,"a",75),a.fc(104," Men\xfa Desayuno "),a.Kb(105,"div",76),a.Ib(106,"img",77),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(107,"div",78),a.Ib(108,"img",79),a.Jb(),a.Jb(),a.Kb(109,"div",80),a.Kb(110,"div",78),a.Ib(111,"img",81),a.Jb(),a.Kb(112,"div",82),a.Kb(113,"div",71),a.Kb(114,"div",72),a.Kb(115,"h2",73),a.fc(116,"Comidas"),a.Jb(),a.Kb(117,"p"),a.fc(118," Para las comidas y cenas, Hortenza te ofrece las mejores recetas de la cocina artesanal italiana, francesa o mexicana, donde podr\xe1s experimentar nuevas experiencias gastron\xf3micas gracias a la gran especialidad de nuestro chef. "),a.Jb(),a.Jb(),a.Kb(119,"div",74),a.Kb(120,"a",83),a.fc(121," Men\xfa Comida "),a.Kb(122,"div",76),a.Ib(123,"img",84),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(124,"div",69),a.Kb(125,"div",70),a.Kb(126,"div",71),a.Kb(127,"div",72),a.Kb(128,"h2",73),a.fc(129,"Bebidas"),a.Jb(),a.Kb(130,"p"),a.fc(131," Si prefieres las bebidas, nuestra amplia carta de vinos y c\xf3cteles te permitir\xe1 conocer las sensaciones m\xe1s intensas con la mejor combinaci\xf3n de esencias y sabores naturales. "),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(132,"div",78),a.Ib(133,"img",85),a.Jb(),a.Jb(),a.Jb(),a.Kb(134,"div",86),a.Kb(135,"h3",10),a.fc(136,"Recibe promociones exclusivas"),a.Jb(),a.Kb(137,"div",60),a.Kb(138,"p"),a.fc(139," En Hortenza deseamos que tengas una experiencia indescriptible. "),a.Ib(140,"br"),a.fc(141," Recibe invitaciones a eventos y promociones. "),a.Jb(),a.Jb(),a.Kb(142,"div",87),a.Kb(143,"ul"),a.Kb(144,"li"),a.Kb(145,"button",88),a.Rb("click",function(){return e.afService.loginWithFacebook()}),a.Ib(146,"img",89),a.Jb(),a.Jb(),a.Kb(147,"li"),a.Kb(148,"button",88),a.Rb("click",function(){return e.afService.loginWithGoogle()}),a.Ib(149,"img",90),a.Jb(),a.Jb(),a.Kb(150,"li"),a.Kb(151,"button",88),a.Rb("click",function(){return e.afService.loginWithTwitter()}),a.Ib(152,"img",91),a.Jb(),a.Jb(),a.Kb(153,"li"),a.Kb(154,"button",92),a.Ib(155,"img",93),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(156,"section",94),a.Kb(157,"div",95),a.Kb(158,"div",96),a.Kb(159,"div",97),a.Ib(160,"img",98),a.Jb(),a.Kb(161,"div",99),a.Kb(162,"a",100),a.fc(163,"Hortenza Pachuca"),a.Jb(),a.Jb(),a.Jb(),a.Kb(164,"div",96),a.Kb(165,"div",97),a.Ib(166,"img",101),a.Jb(),a.Kb(167,"div",99),a.Kb(168,"a",102),a.fc(169,"(1330613)"),a.Jb(),a.Jb(),a.Jb(),a.Kb(170,"div",96),a.Kb(171,"div",97),a.Ib(172,"img",103),a.Jb(),a.Kb(173,"div",99),a.Kb(174,"a",104),a.fc(175,"contacto@hortenza.com"),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(176,"section",105),a.Kb(177,"div",60),a.Kb(178,"p"),a.fc(179," Zona plateada no. 405. Real Plaza, "),a.Ib(180,"br"),a.fc(181," Camino Real de la Plata. Pachuca Hidalgo, C.P. 42083 "),a.Jb(),a.Jb(),a.Ib(182,"div",106),a.Jb(),a.Ib(183,"link",107),a.Kb(184,"a",108),a.Ib(185,"i",109),a.Jb())},directives:[o.d],styles:['.float[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;bottom:40px;right:40px;background-color:#25d366;color:#fff;border-radius:50px;text-align:center;font-size:30px;box-shadow:2px 2px 3px #999;z-index:100}.my-float[_ngcontent-%COMP%]{margin-top:16px}.header[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100);position:relative;background-image:url(background-2.b5cc68cb76004eb5a7ff.jpg);background-size:cover;background-position:50% 50%}.header[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]:after{min-height:100vh;min-height:-webkit-fill-available}.header[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;top:0;left:0;background:rgba(42,33,21,.57);z-index:0}.overlay[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:30px;padding-bottom:70px;position:relative;z-index:10}.logo[_ngcontent-%COMP%]{max-width:400px;height:auto}.header-title[_ngcontent-%COMP%]{width:65vw;font-family:Merriweather,serif;font-size:24px;font-weight:300;text-align:center;line-height:200%;color:#fff;z-index:20}.social-media_footer[_ngcontent-%COMP%]{display:flex}nav[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:30px;padding-right:5%}.social-icon[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{display:flex;align-items:center}.social-icon[_ngcontent-%COMP%]{justify-content:center;background-color:#fffaf0;list-style:none;margin-right:5px;margin-left:5px;border-radius:50%;text-decoration:none;font-size:25px;color:#c0994d;z-index:20}.social-icon[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.social-icon[_ngcontent-%COMP%]:active{background-color:#c2c2c2}.nav-button[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:1em;font-weight:regular;color:#fff;text-decoration:none;padding:10px 20px;margin-right:20px;margin-left:20px;z-index:20}.nav-button[_ngcontent-%COMP%], .nav-button[_ngcontent-%COMP%]:hover{background-color:#c0994d}.nav-button[_ngcontent-%COMP%]:active{background-color:#836935}.nav-social_button[_ngcontent-%COMP%]{width:45px;height:45px}.new-experiences_section[_ngcontent-%COMP%]{background-color:#fff9ec;display:flex;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;-webkit-padding-top:50px;-webkit-padding-bottom:50px}.title_section[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:28px;font-weight:regular;text-align:center;color:#c0994d;margin-top:20px;margin-bottom:20px;-webkit-margin-top:20px;-webkit-margin-bottom:20px}.component_ne-01[_ngcontent-%COMP%]{width:800px;height:400px;display:flex;flex-direction:row;align-items:center;margin-top:70px;margin-bottom:70px}.container_ne-01[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.content_ne-01[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;margin:25px}.icon_ne-01[_ngcontent-%COMP%]{position:relative;left:-10%}.title_ne-01[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:22px;color:#c0994d;position:relative;top:80%;right:10%}.text-content_ne-01[_ngcontent-%COMP%]{width:100%;padding-top:20px;font-family:Merriweather,serif;font-size:18px;font-weight:300;line-height:200%;color:#363636}.image_ne-01[_ngcontent-%COMP%]{width:50%;height:100%}.image-full[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.component_ne-02[_ngcontent-%COMP%]{width:800px;height:400px;display:flex;flex-direction:row;align-items:center;margin-top:70px;margin-bottom:70px}.container_ne-02[_ngcontent-%COMP%]{width:50%;height:100%;justify-content:center}.container_ne-02[_ngcontent-%COMP%], .content_ne-02[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.content_ne-02[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:25px}.title_ne-02[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:22px;color:#c0994d;margin-top:30px}.text-content_ne-02[_ngcontent-%COMP%]{width:100%;padding-left:40px;font-family:Merriweather,serif;font-size:18px;font-weight:300;line-height:200%;color:#363636}.image_ne-02[_ngcontent-%COMP%]{width:50%;height:100%}.component_ne-03[_ngcontent-%COMP%]{width:800px;height:400px;display:flex;flex-direction:row;align-items:center;margin-top:70px;margin-bottom:70px}.container_ne-03[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.content_ne-03[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;margin-bottom:25px}.icon_ne-03[_ngcontent-%COMP%]{position:relative;top:-20%;left:-10%}.title_ne-03[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:22px;color:#c0994d;position:relative;top:90%;right:10%}.text-content_ne-03[_ngcontent-%COMP%]{width:100%;padding-top:20px;font-family:Merriweather,serif;font-size:18px;font-weight:300;line-height:200%;color:#363636;padding-right:20px}.image_ne-03[_ngcontent-%COMP%]{width:50%;height:100%}.content-slider[_ngcontent-%COMP%]{background-color:#e1d8c5;display:flex;flex-direction:column;align-items:center;padding-top:100px;padding-bottom:100px;-webkit-padding-top:50px;-webkit-padding-bottom:50px}.content-slider[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{width:700px;font-family:Merriweather,serif;font-size:1.1rem;font-weight:300;text-align:center;line-height:200%}.reserve-container[_ngcontent-%COMP%]{width:550px;height:250px;background-color:#363636;margin-top:50px;margin-bottom:20px;-webkit-margin-top:50px;-webkit-margin-bottom:20px;padding:10px}.reserve-border[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;border:1px solid #c0994d;padding:15px}.reserve-border[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:22px;margin-bottom:30px}.button-cta[_ngcontent-%COMP%], .reserve-border[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-family:Mulish,sans-serif;font-weight:300;text-align:center;color:#fff}.button-cta[_ngcontent-%COMP%]{width:150px;height:45px;background-color:#c0994d;display:flex;justify-content:center;align-items:center;font-size:18px;text-decoration:none;border:3px solid #7f683b}.button-cta[_ngcontent-%COMP%]:hover{background-color:#7f683b}.button-cta[_ngcontent-%COMP%]:active{background-color:#584929}.kitchen_section[_ngcontent-%COMP%]{background-color:#fff9ec;padding-top:150px;padding-bottom:150px;-webkit-padding-top:50px;-webkit-padding-bottom:50px}.container-kitchen[_ngcontent-%COMP%], .kitchen_section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.container-kitchen[_ngcontent-%COMP%]{width:700px}.title_kitchen-section[_ngcontent-%COMP%]{width:700px;margin-top:20px;margin-bottom:50px;-webkit-margin-top:20px;-webkit-margin-bottom:50px}.title_kitchen[_ngcontent-%COMP%]{font-family:Mulish,serif;font-weight:300;color:#363636;font-size:24px}.title-span_kitchen[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:28px;color:#c0994d;line-height:200%}.component-right_kitchen[_ngcontent-%COMP%]{width:100%;height:400px;display:flex;flex-direction:row;box-sizing:initial;padding-bottom:200px;margin-bottom:300px}.container-right_kitchen[_ngcontent-%COMP%]{width:400px;height:500px;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;top:50%;left:15%;background-color:#fff;opacity:.85}.component-left_kitchen[_ngcontent-%COMP%]{width:100%;height:400px;display:flex;flex-direction:row;box-sizing:initial;padding-bottom:200px;margin-bottom:300px}.container-left_kitchen[_ngcontent-%COMP%]{width:400px;height:500px;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;top:50%;right:15%;background-color:#fff;opacity:.85}.image_kitchen[_ngcontent-%COMP%]{width:50%;height:100%}.content_kitchen[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 50px}.component-title_kitchen[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-weight:300;color:#c0994d;margin-bottom:20px}.component-text_kitchen[_ngcontent-%COMP%]{font-family:Mulish,sans-serif;font-weight:300;font-size:1.1em;color:#363636;line-height:200%}.component-button_kitchen[_ngcontent-%COMP%]{width:100%;height:36px;display:flex}.text-button_kitchen[_ngcontent-%COMP%]{display:flex;text-decoration:none;font-family:Mulish,sans-serif;font-weight:400;color:#363636;border-bottom:2px solid #c0994d}.icon_arrow-right[_ngcontent-%COMP%]{width:36px;height:36px;padding-bottom:10px}.subscription_section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.subscription_section[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:1.1rem;font-weight:300;width:750px;text-align:center;line-height:200%;margin-bottom:25px}.social-buttons_subscription[_ngcontent-%COMP%]{all:unset;cursor:pointer;width:80px;height:60px;display:flex;justify-content:center;align-items:center;font-size:22px}.buttons_subscription[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{list-style:none;display:flex;padding-left:0}.buttons_subscription[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child{border-radius:10px;background-color:#1877f2;color:#fff}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(2){border-radius:10px;background-color:#fff;color:grey}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(3){border-radius:10px;background-color:#0fbcf3;color:#fff}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(4){border-radius:10px;background-color:#acacac;color:#fff}.contact_section[_ngcontent-%COMP%]{background-color:#e1d8c5;display:flex;flex-direction:column;align-items:center;padding-top:30px;padding-bottom:30px;-webkit-padding-top:30px;-webkit-padding-bottom:30px}.container-contact[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:650px}.contact-button[_ngcontent-%COMP%]{display:flex;width:auto;height:100%}.icons[_ngcontent-%COMP%]{width:100%;height:100%}.icon-contact_button[_ngcontent-%COMP%]{width:28px;height:28px}.text-contact_button[_ngcontent-%COMP%]{width:auto;height:100%;padding-left:5px}.text-contact_button[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{align-self:center;text-decoration:none;font-family:Mulish,sans-serif;font-weight:400;color:#363636;border-bottom:2px solid #c0994d;padding-bottom:5px}.map_section[_ngcontent-%COMP%]{background-color:#363636;display:flex;flex-direction:column;align-items:center;padding-top:10px;-webkit-padding-top:10px}.map_section[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{width:450px;font-family:Mulish,sans-serif;font-size:1.1rem;font-weight:300;line-height:200%;color:#fff;text-align:center;padding-top:35px;padding-bottom:35px;-webkit-padding-top:35px;-webkit-padding-bottom:35px}.map[_ngcontent-%COMP%]{width:100%;width:-webkit-fill-available;height:700px;background-image:url(background-2.b5cc68cb76004eb5a7ff.jpg);background-size:cover;background-position:50% 50%}@media only screen and (max-width:800px){.logo[_ngcontent-%COMP%]{max-width:300px;height:auto}.header-title[_ngcontent-%COMP%]{width:90vw;font-size:20px;line-height:200%}.nav-button[_ngcontent-%COMP%]:hover{background-color:#c0994d}.nav-button[_ngcontent-%COMP%]:active{background-color:#836935}.nav-social_button[_ngcontent-%COMP%]{width:45px;height:45px}.title_section[_ngcontent-%COMP%]{width:90vw}.component_ne-01[_ngcontent-%COMP%]{width:80vw;height:auto;flex-direction:column}.container_ne-01[_ngcontent-%COMP%]{width:100%}.content_ne-01[_ngcontent-%COMP%]{height:auto;flex-direction:column;align-items:center}.icon_ne-01[_ngcontent-%COMP%]{position:static;margin-bottom:30px;-webkit-margin-bottom:30px}.title_ne-01[_ngcontent-%COMP%]{font-size:22px;padding-top:20px;-webkit-padding-top:20px;position:static;margin-bottom:0}.text-content_ne-01[_ngcontent-%COMP%]{font-size:18px;line-height:auto;text-align:justify;margin-bottom:25px}.image_ne-01[_ngcontent-%COMP%]{width:100%;height:auto}.image_ne-01[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:400px}.component_ne-02[_ngcontent-%COMP%]{width:80vw;height:auto;flex-direction:column}.container_ne-02[_ngcontent-%COMP%]{width:100%}.content_ne-02[_ngcontent-%COMP%]{height:auto;flex-direction:column;align-items:center}.icon_ne-02[_ngcontent-%COMP%]{position:static;margin-bottom:30px;-webkit-margin-bottom:30px}.title_ne-02[_ngcontent-%COMP%]{font-size:22px;position:static}.text-content_ne-02[_ngcontent-%COMP%]{font-size:18px;line-height:auto;text-align:justify;color:#363636;padding-left:0;margin-bottom:25px}.image_ne-02[_ngcontent-%COMP%]{width:100%;height:auto;order:1}.component_ne-03[_ngcontent-%COMP%]{width:80vw;height:auto;flex-direction:column}.container_ne-03[_ngcontent-%COMP%]{width:100%}.content_ne-03[_ngcontent-%COMP%]{height:auto;flex-direction:column;align-items:center}.icon_ne-03[_ngcontent-%COMP%]{position:static;margin-bottom:30px;-webkit-margin-bottom:30px}.title_ne-03[_ngcontent-%COMP%]{font-size:22px;padding-top:20px;-webkit-padding-top:20px;position:static;margin-bottom:0}.text-content_ne-03[_ngcontent-%COMP%]{font-size:18px;line-height:auto;text-align:justify;color:#363636;margin-bottom:25px}.image_ne-03[_ngcontent-%COMP%]{width:100%;height:auto}.content-slider[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;-webkit-padding-top:0;-webkit-padding-bottom:0}.content-slider[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{width:70vw;display:flex;justify-content:center;align-items:center;line-height:200%;text-align:justify;padding-top:100px;padding-bottom:100px;-webkit-padding-top:100px;-webkit-padding-bottom:100px}.reserve-container[_ngcontent-%COMP%]{width:100vw;width:-webkit-fill-available;height:350px;margin-top:0;margin-bottom:0;-webkit-margin-top:0;-webkit-margin-bottom:0}.kitchen_section[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px;-webkit-padding-top:80px;-webkit-padding-bottom:80px}.title_kitchen-section[_ngcontent-%COMP%]{width:90vw;margin-top:20px;margin-bottom:50px;-webkit-margin-top:20px;-webkit-margin-bottom:50px;text-align:center}.title_kitchen[_ngcontent-%COMP%]{font-family:Mulish,serif;font-weight:300;color:#363636;font-size:18px}.title-span_kitchen[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:24px;color:#c0994d;line-height:200%}.component-text_kitchen[_ngcontent-%COMP%]{font-size:1em;line-height:200%}.component-right_kitchen[_ngcontent-%COMP%], .container-kitchen[_ngcontent-%COMP%]{width:90vw;display:flex;align-items:center}.component-right_kitchen[_ngcontent-%COMP%]{height:auto;flex-direction:column;box-sizing:initial;margin-top:50px;margin-bottom:50px;padding-bottom:0}.container-right_kitchen[_ngcontent-%COMP%]{width:85%;height:400px;position:relative;top:-80px;left:-5%;background-color:#fff;opacity:.85;order:1;z-index:2}.component-right_kitchen[_ngcontent-%COMP%] > .image_kitchen[_ngcontent-%COMP%]{width:350px;height:300px;position:relative;right:-100px;z-index:1}.component-left_kitchen[_ngcontent-%COMP%]{width:90vw;height:auto;display:flex;flex-direction:column;align-items:center;box-sizing:initial;padding-bottom:0;margin-bottom:0}.container-left_kitchen[_ngcontent-%COMP%]{width:85%;height:400px;position:relative;top:-80px;right:-5%;background-color:#fff;opacity:.85;order:1}.component-left_kitchen[_ngcontent-%COMP%] > .image_kitchen[_ngcontent-%COMP%]{width:350px;height:300px;position:relative;left:-100px}.subscription_section[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{width:90vw;display:flex;justify-content:center;align-items:center;text-align:center;line-height:200%}.social-buttons_subscription[_ngcontent-%COMP%]{width:300px;height:50px;font-size:24px}.buttons_subscription[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{flex-direction:column}.buttons_subscription[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin:15px 0}.container-contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;width:90vw;height:200px}.contact-button[_ngcontent-%COMP%]{display:flex;width:auto;height:36px}.icon-contact_button[_ngcontent-%COMP%]{width:28px;height:100%}.text-contact_button[_ngcontent-%COMP%]{width:auto;height:100%;display:flex;padding-left:5px}.text-contact_button[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{align-self:center;text-decoration:none;font-family:Mulish,sans-serif;font-weight:400;color:#363636;border-bottom:2px solid #c0994d;padding-bottom:5px}.map_section[_ngcontent-%COMP%]{background-color:#363636;display:flex;flex-direction:column;align-items:center;padding-top:10px;-webkit-padding-top:10px}.map_section[_ngcontent-%COMP%] > .subtitle_section[_ngcontent-%COMP%]{width:90vw;text-align:center;font-family:Mulish,sans-serif;font-weight:300;color:#fff;padding-top:35px;padding-bottom:35px;-webkit-padding-top:35px;-webkit-padding-bottom:35px}.map[_ngcontent-%COMP%]{width:100%;width:-webkit-fill-available;height:400px;background-size:cover;background-position:50% 50%}}@media only screen and (max-width:576px){.float[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;bottom:40px;right:40px;background-color:#25d366;color:#fff;border-radius:50px;text-align:center;font-size:30px;box-shadow:2px 2px 3px #999;z-index:100}.my-float[_ngcontent-%COMP%]{margin-top:16px}.component-right_kitchen[_ngcontent-%COMP%]{width:90vw;height:auto;display:flex;flex-direction:column;align-items:center;box-sizing:initial;margin-top:50px;margin-bottom:50px;padding-bottom:0}.container-right_kitchen[_ngcontent-%COMP%]{width:85%;height:600px}.component-right_kitchen[_ngcontent-%COMP%] > .image_kitchen[_ngcontent-%COMP%]{width:250px;height:230px;right:-50px}.component-left_kitchen[_ngcontent-%COMP%]{width:90vw;height:auto;display:flex;flex-direction:column;align-items:center;box-sizing:initial;padding-bottom:0;margin-bottom:0}.container-left_kitchen[_ngcontent-%COMP%]{width:85%;height:600px}.component-left_kitchen[_ngcontent-%COMP%] > .image_kitchen[_ngcontent-%COMP%]{width:250px;height:230px;left:-50px}}']}),t})();var ny=n("PSD3"),ry=n.n(ny),iy=n("cp0P"),oy=n("Cfvw"),ay=n("lJxs");const sy=new a.q("NgValueAccessor"),uy={provide:sy,useExisting:Object(a.S)(()=>cy),multi:!0};let cy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l))},t.\u0275dir=a.Cb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&a.Rb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[a.vb([uy])]}),t})();const ly={provide:sy,useExisting:Object(a.S)(()=>fy),multi:!0},hy=new a.q("CompositionEventMode");let fy=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(r.o)()?Object(r.o)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l),a.Hb(hy,8))},t.\u0275dir=a.Cb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&a.Rb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[a.vb([ly])]}),t})();function dy(t){return null==t||0===t.length}function py(t){return null!=t&&"number"==typeof t.length}const gy=new a.q("NgValidators"),my=new a.q("NgAsyncValidators"),vy=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class by{static min(t){return e=>{if(dy(e.value)||dy(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(dy(e.value)||dy(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return dy(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return dy(t.value)||vy.test(t.value)?null:{email:!0}}static minLength(t){return e=>dy(e.value)||!py(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>py(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return by.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(dy(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(yy);return 0==e.length?null:function(t){return _y(Oy(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(yy);return 0==e.length?null:function(t){const n=Oy(t,e).map(wy);return Object(iy.a)(n).pipe(Object(ay.a)(_y))}}}function yy(t){return null!=t}function wy(t){const e=Object(a.ob)(t)?Object(oy.a)(t):t;return Object(a.nb)(e),e}function _y(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Oy(t,e){return e.map(e=>e(t))}function Cy(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Iy(t){return null!=t?by.compose(Cy(t)):null}function Ty(t){return null!=t?by.composeAsync(Cy(t)):null}function Ey(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let ky=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Iy(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ty(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Cb({type:t}),t})(),Sy=(()=>{class t extends ky{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return xy(e||t)},t.\u0275dir=a.Cb({type:t,features:[a.tb]}),t})();const xy=a.Mb(Sy);class Py extends ky{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ay{constructor(t){this._cd=t}get ngClassUntouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}get ngClassTouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}get ngClassPristine(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}get ngClassDirty(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}get ngClassValid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}get ngClassInvalid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}get ngClassPending(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}let Ny=(()=>{class t extends Ay{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Py,2))},t.\u0275dir=a.Cb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&a.zb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[a.tb]}),t})(),jy=(()=>{class t extends Ay{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Sy,10))},t.\u0275dir=a.Cb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&a.zb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[a.tb]}),t})();const Dy={provide:sy,useExisting:Object(a.S)(()=>My),multi:!0};let My=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l))},t.\u0275dir=a.Cb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&a.Rb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[a.vb([Dy])]}),t})();const Ry={provide:sy,useExisting:Object(a.S)(()=>Fy),multi:!0};let Ly=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac}),t})(),Fy=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Py),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l),a.Hb(Ly),a.Hb(a.r))},t.\u0275dir=a.Cb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&a.Rb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[a.vb([Ry])]}),t})();const Vy={provide:sy,useExisting:Object(a.S)(()=>Uy),multi:!0};let Uy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l))},t.\u0275dir=a.Cb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&a.Rb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[a.vb([Vy])]}),t})();const qy={provide:sy,useExisting:Object(a.S)(()=>Ky),multi:!0};function By(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Ky=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=By(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l))},t.\u0275dir=a.Cb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&a.Rb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[a.vb([qy])]}),t})(),zy=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(By(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.l),a.Hb(a.D),a.Hb(Ky,9))},t.\u0275dir=a.Cb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Wy={provide:sy,useExisting:Object(a.S)(()=>Jy),multi:!0};function Hy(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Jy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.D),a.Hb(a.l))},t.\u0275dir=a.Cb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&a.Rb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[a.vb([Wy])]}),t})(),Gy=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Hy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Hy(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(a.l),a.Hb(a.D),a.Hb(Jy,9))},t.\u0275dir=a.Cb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Yy(t,e){Xy(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&$y(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&$y(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Qy(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xy(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ey(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Ey(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Qy(e._rawValidators,n),Qy(e._rawAsyncValidators,n)}}function $y(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Zy=[cy,Uy,My,Ky,Jy,Fy];function tw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ew="VALID",nw="INVALID",rw="PENDING",iw="DISABLED";function ow(t){return(cw(t)?t.validators:t)||null}function aw(t){return Array.isArray(t)?Iy(t):t||null}function sw(t,e){return(cw(e)?e.asyncValidators:t)||null}function uw(t){return Array.isArray(t)?Ty(t):t||null}function cw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class lw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=aw(this._rawValidators),this._composedAsyncValidatorFn=uw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ew}get invalid(){return this.status===nw}get pending(){return this.status==rw}get disabled(){return this.status===iw}get enabled(){return this.status!==iw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=aw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=uw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=rw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=iw,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ew,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ew&&this.status!==rw||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iw:ew}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=rw,this._hasOwnPendingAsyncValidator=!0;const e=wy(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof fw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof dw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.n,this.statusChanges=new a.n}_calculateStatus(){return this._allControlsDisabled()?iw:this.errors?nw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rw)?rw:this._anyControlsHaveStatus(nw)?nw:ew}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){cw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class hw extends lw{constructor(t=null,e,n){super(ow(e),sw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){tw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){tw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class fw extends lw{constructor(t,e,n){super(ow(e),sw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof hw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class dw extends lw{constructor(t,e,n){super(ow(e),sw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof hw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const pw={provide:Sy,useExisting:Object(a.S)(()=>mw)},gw=(()=>Promise.resolve(null))();let mw=(()=>{class t extends Sy{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new a.n,this.form=new fw({},Iy(t),Ty(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Yy(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),tw(this._directives,t)})}addFormGroup(t){gw.then(()=>{const e=this._findContainer(t.path),n=new fw({});(function(t,e){Xy(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){gw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(gy,10),a.Hb(my,10))},t.\u0275dir=a.Cb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&a.Rb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a.vb([pw]),a.tb]}),t})();const vw={provide:Py,useExisting:Object(a.S)(()=>yw)},bw=(()=>Promise.resolve(null))();let yw=(()=>{class t extends Py{constructor(t,e,n,r){super(),this.control=new hw,this._registered=!1,this.update=new a.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===fy?n=t:(e=t,Zy.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;bw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Sy,9),a.Hb(gy,10),a.Hb(my,10),a.Hb(sy,10))},t.\u0275dir=a.Cb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a.vb([vw]),a.tb,a.ub]}),t})(),ww=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Cb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),_w=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)}}),t})(),Ow=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},providers:[Ly],imports:[_w]}),t})();function Cw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.continue-button")))}function Iw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.register-button")))}function Tw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.send-button")))}function Ew(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",2),a.Kb(1,"div",9),a.Kb(2,"label",10),a.fc(3),a.Ub(4,"translate"),a.Jb(),a.Kb(5,"input",11),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().email=e}),a.Ub(6,"translate"),a.Jb(),a.Jb(),a.Kb(7,"div",9),a.Kb(8,"label",10),a.fc(9),a.Ub(10,"translate"),a.Jb(),a.Kb(11,"input",12),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().password=e}),a.Ub(12,"translate"),a.Jb(),a.Jb(),a.Kb(13,"div",13),a.Kb(14,"span",14),a.Rb("click",function(){return a.ac(t),a.Tb().onChangeViews("password")}),a.fc(15),a.Ub(16,"translate"),a.Jb(),a.Jb(),a.Kb(17,"div",13),a.Kb(18,"span",14),a.Rb("click",function(){return a.ac(t),a.Tb().onChangeViews("sign-up")}),a.fc(19),a.Ub(20,"translate"),a.Jb(),a.Jb(),a.Kb(21,"div",15),a.Kb(22,"button",16),a.Rb("click",function(){return a.ac(t),a.Tb().signInPassword()}),a.ec(23,Cw,3,3,"span",17),a.ec(24,Iw,3,3,"span",17),a.ec(25,Tw,3,3,"span",17),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(3),a.gc(a.Vb(4,11,"authentication.email-title")),a.wb(2),a.Xb("placeholder",a.Vb(6,13,"authentication.email-placeholder")),a.Wb("ngModel",t.email),a.wb(4),a.gc(a.Vb(10,15,"authentication.password-title")),a.wb(2),a.Xb("placeholder",a.Vb(12,17,"authentication.password-placeholder")),a.Wb("ngModel",t.password),a.wb(4),a.gc(a.Vb(16,19,"authentication.forget-password-title")),a.wb(4),a.gc(a.Vb(20,21,"authentication.create-account-title")),a.wb(4),a.Wb("ngIf",t.m_action_login||t.m_action_register),a.wb(1),a.Wb("ngIf",!t.m_action_login||t.m_action_register),a.wb(1),a.Wb("ngIf",t.m_action_password)}}function kw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.continue-button")))}function Sw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.register-button")))}function xw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.send")))}function Pw(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",2),a.Kb(1,"div",9),a.Kb(2,"label",10),a.fc(3),a.Ub(4,"translate"),a.Jb(),a.Kb(5,"input",18),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().emailUp=e}),a.Ub(6,"translate"),a.Jb(),a.Jb(),a.Kb(7,"div",9),a.Kb(8,"label",10),a.fc(9),a.Ub(10,"translate"),a.Jb(),a.Kb(11,"input",19),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().passwordUp=e}),a.Ub(12,"translate"),a.Jb(),a.Jb(),a.Kb(13,"div",9),a.Kb(14,"label",10),a.fc(15),a.Ub(16,"translate"),a.Jb(),a.Kb(17,"input",20),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().rePassword=e}),a.Ub(18,"translate"),a.Jb(),a.Jb(),a.Kb(19,"div",13),a.Kb(20,"span",14),a.Rb("click",function(){return a.ac(t),a.Tb().onChangeViews("sign-in")}),a.fc(21),a.Ub(22,"translate"),a.Jb(),a.Jb(),a.Kb(23,"div",15),a.Kb(24,"button",16),a.Rb("click",function(){return a.ac(t),a.Tb().signInPassword()}),a.ec(25,kw,3,3,"span",17),a.ec(26,Sw,3,3,"span",17),a.ec(27,xw,3,3,"span",17),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(3),a.gc(a.Vb(4,13,"authentication.email-title")),a.wb(2),a.Xb("placeholder",a.Vb(6,15,"authentication.email-placeholder")),a.Wb("ngModel",t.emailUp),a.wb(4),a.gc(a.Vb(10,17,"authentication.password-title")),a.wb(2),a.Xb("placeholder",a.Vb(12,19,"authentication.password-placeholder")),a.Wb("ngModel",t.passwordUp),a.wb(4),a.gc(a.Vb(16,21,"authentication.confirm-password-title")),a.wb(2),a.Xb("placeholder",a.Vb(18,23,"authentication.confirm-password-placeholder")),a.Wb("ngModel",t.rePassword),a.wb(4),a.gc(a.Vb(22,25,"authentication.already-account-title")),a.wb(4),a.Wb("ngIf",t.m_action_login||!t.m_action_register),a.wb(1),a.Wb("ngIf",!t.m_action_login||t.m_action_register),a.wb(1),a.Wb("ngIf",t.m_action_password)}}function Aw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.continue-button")))}function Nw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.register-button")))}function jw(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"authentication.send-button")))}function Dw(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",2),a.Kb(1,"div",9),a.Kb(2,"label",10),a.fc(3),a.Ub(4,"translate"),a.Jb(),a.Kb(5,"input",11),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().email=e}),a.Ub(6,"translate"),a.Jb(),a.Jb(),a.Kb(7,"div",13),a.Kb(8,"span",14),a.Rb("click",function(){return a.ac(t),a.Tb().onChangeViews("sign-in")}),a.fc(9),a.Ub(10,"translate"),a.Jb(),a.Jb(),a.Kb(11,"div",13),a.Kb(12,"span",14),a.Rb("click",function(){return a.ac(t),a.Tb().onChangeViews("sign-up")}),a.fc(13),a.Ub(14,"translate"),a.Jb(),a.Jb(),a.Kb(15,"div",15),a.Kb(16,"button",16),a.Rb("click",function(){return a.ac(t),a.Tb().signInPassword()}),a.ec(17,Aw,3,3,"span",17),a.ec(18,Nw,3,3,"span",17),a.ec(19,jw,3,3,"span",17),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(3),a.gc(a.Vb(4,8,"authentication.email-title")),a.wb(2),a.Xb("placeholder",a.Vb(6,10,"authentication.email-placeholder")),a.Wb("ngModel",t.email),a.wb(4),a.gc(a.Vb(10,12,"authentication.already-account-title")),a.wb(4),a.gc(a.Vb(14,14,"authentication.create-account-title")),a.wb(4),a.Wb("ngIf",t.m_action_login||t.m_action_register),a.wb(1),a.Wb("ngIf",t.m_action_login||t.m_action_register),a.wb(1),a.Wb("ngIf",t.m_action_password)}}function Mw(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",21),a.Kb(1,"div",22),a.Kb(2,"span"),a.fc(3),a.Ub(4,"translate"),a.Jb(),a.Jb(),a.Kb(5,"div",23),a.Kb(6,"button",24),a.Rb("click",function(){return a.ac(t),a.Tb().afService.loginWithGoogle()}),a.Ib(7,"i",25),a.fc(8),a.Ub(9,"translate"),a.Jb(),a.Jb(),a.Kb(10,"div",23),a.Kb(11,"button",26),a.Rb("click",function(){return a.ac(t),a.Tb().afService.loginWithFacebook()}),a.Ib(12,"i",27),a.fc(13),a.Ub(14,"translate"),a.Jb(),a.Jb(),a.Kb(15,"div",23),a.Kb(16,"button",28),a.Rb("click",function(){return a.ac(t),a.Tb().afService.loginWithTwitter()}),a.Ib(17,"i",29),a.fc(18),a.Ub(19,"translate"),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(3),a.gc(a.Vb(4,4,t.m_action_login?"authentication.sign-in-with":"authentication.sign-up-with")),a.wb(5),a.hc("\xa0 ",a.Vb(9,6,"authentication.google-button-title")," "),a.wb(5),a.hc("\xa0 ",a.Vb(14,8,"authentication.facebook-button-title"),""),a.wb(5),a.hc("\xa0 ",a.Vb(19,10,"authentication.twitter-button-title"),"")}}let Rw=(()=>{class t{constructor(t,e,n,r){this.afService=t,this.translate=e,this.router=n,this.activatedRoute=r,this.m_action_login=!0,this.m_action_register=!1,this.m_action_password=!1,this.m_title="sign-in-title",this.activatedRoute.params.subscribe(t=>{this.onChangeViews(t.action)})}ngAfterViewInit(){this.afService.m_user&&this.router.navigate(["/home"]).then(t=>console.log("You already logged."))}ngOnInit(){}onChangeViews(t){"sign-in"===t?(this.m_title="sign-in-title",this.m_action_login=!0,this.m_action_register=!1,this.m_action_password=!1):"sign-up"===t?(this.m_title="sign-up-title",this.m_action_login=!1,this.m_action_register=!0,this.m_action_password=!1):"password"===t&&(this.m_title="forgot-password-title",this.m_action_login=!1,this.m_action_register=!1,this.m_action_password=!0)}signInPassword(){!0===this.m_action_password?this.fnSendEmailResetPassword():!0===this.m_action_login?this.afService.loginPassword(this.email,this.password).then(t=>{}).catch(t=>{ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-error"),text:this.translate.instant("sweet-alert."+t.code),confirmButtonText:this.translate.instant("sweet-alert.accept-button"),footer:"<p>"+this.translate.instant("sweet-alert.problem-persist")+"</p>"})}):!0===this.m_action_register&&this.signUpPassword()}fnSendEmailResetPassword(){this.afService.resetPassword(this.email).then(t=>{ry.a.fire({icon:"success",title:this.translate.instant("sweet-alert.title-perfect"),text:this.translate.instant("sweet-alert.subtitle-sent-email"),confirmButtonText:this.translate.instant("sweet-alert.accept-button")})}).catch(t=>{ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-error"),text:this.translate.instant("sweet-alert."+t.code),confirmButtonText:this.translate.instant("sweet-alert.accept-button"),footer:"<p>"+this.translate.instant("sweet-alert.problem-persist")+"</p>"})})}signUpPassword(){this.passwordUp===this.rePassword?this.afService.registerPassword(this.emailUp,this.passwordUp).then(t=>{}).catch(t=>{ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-error"),text:this.translate.instant("sweet-alert."+t.code),confirmButtonText:this.translate.instant("sweet-alert.accept-button"),footer:"<p>"+this.translate.instant("sweet-alert.problem-persist")+"</p>"})}):ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-error"),text:this.translate.instant("sweet-alert.subtitle-same-password"),confirmButtonText:this.translate.instant("sweet-alert.accept-button"),footer:"<p>"+this.translate.instant("sweet-alert.problem-persist")+"</p>"})}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Jb),a.Hb(Gb.d),a.Hb(o.b),a.Hb(o.a))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-authentication"]],decls:14,vars:7,consts:[[1,"contact-one"],[1,"container"],[1,"row"],[1,"col-lg-3"],[1,"col-lg-7"],[1,"contact-form-validated","contact-one__form"],[1,"block-title"],["class","row",4,"ngIf"],["class","row","style","text-align: center !important;",4,"ngIf"],[1,"col-lg-12",2,"padding-top","30px !important"],[1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","password","name","password",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-lg-12","text-left",2,"padding-top","10px","cursor","pointer","text-align","right !important"],[3,"click"],[1,"col-lg-12","text-left",2,"padding-top","30px !important","text-align","center !important"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],["type","email","name","emailUp",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","password","name","passwordUp",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","password","name","rePassword",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"row",2,"text-align","center !important"],[1,"col-lg-12","text-left",2,"padding-top","30px !important","padding-bottom","30px !important","font-weight","bold","cursor","pointer","text-align","center !important"],[1,"col-lg-4"],[1,"social-buttons","btn-google",2,"font-size","12px !important",3,"click"],[1,"fab","fa-google"],[1,"social-buttons","btn-facebook",2,"font-size","12px !important",3,"click"],[1,"fab","fa-facebook"],[1,"social-buttons","btn-apple",2,"font-size","12px !important",3,"click"],[1,"fab","fa-twitter"]],template:function(t,e){1&t&&(a.Kb(0,"section",0),a.Kb(1,"div",1),a.Kb(2,"div",2),a.Ib(3,"div",3),a.Kb(4,"div",4),a.Kb(5,"form",5),a.Kb(6,"div",6),a.Kb(7,"h3"),a.fc(8),a.Ub(9,"translate"),a.Jb(),a.Jb(),a.ec(10,Ew,26,23,"div",7),a.ec(11,Pw,28,27,"div",7),a.ec(12,Dw,20,16,"div",7),a.ec(13,Mw,20,12,"div",8),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&t&&(a.wb(8),a.gc(a.Vb(9,5,"authentication."+e.m_title)),a.wb(2),a.Wb("ngIf",e.m_action_login),a.wb(1),a.Wb("ngIf",e.m_action_register),a.wb(1),a.Wb("ngIf",e.m_action_password),a.wb(1),a.Wb("ngIf",!e.m_action_password))},directives:[ww,jy,mw,r.i,fy,Ny,yw],pipes:[Gb.c],styles:[".social-buttons[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#6325b1,#db00b1);border-radius:5px;vertical-align:middle;border:none;outline:none;text-transform:uppercase;font-size:16px;font-weight:700;color:#fff;padding:5px;width:150px}.btn-google[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#cb4335,#cb4335)}.btn-facebook[_ngcontent-%COMP%], .btn-google[_ngcontent-%COMP%]{text-align:left;padding-left:25%;margin-bottom:10px!important}.btn-facebook[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#3b5998,#3b5990)}.btn-apple[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#1da1f2,#1da1f2);text-align:left;margin-bottom:10px!important;padding-left:25%}@media (max-width:1023px){.social-buttons[_ngcontent-%COMP%]{width:300px;text-align:left;padding-left:17%}}@media (max-width:700px){.social-buttons[_ngcontent-%COMP%]{width:300px;text-align:left;padding-left:5%}}@media only screen and (min-width:1024px) and (max-height:1366px) and (-webkit-min-device-pixel-ratio:1.5){.social-buttons[_ngcontent-%COMP%]{width:130px;text-align:left}.btn-google[_ngcontent-%COMP%]{padding-left:25%}.btn-facebook[_ngcontent-%COMP%]{padding-left:20%}.btn-apple[_ngcontent-%COMP%]{padding-left:30%}}@media (max-width:767px){.social-buttons[_ngcontent-%COMP%]{width:250px;text-align:center}}.checkbox-text[_ngcontent-%COMP%]{cursor:pointer;color:#737789}.checkbox-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline!important}"]}),t})();function Lw(t){zb(1,arguments);var e=Wb(t);return!isNaN(e)}var Fw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Vw(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var Uw={date:Vw({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Vw({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Vw({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},qw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Bw(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=i.width?String(i.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{var s=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;r=t.values[u]||t.values[s]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function Kw(t){return function(e,n){var r=String(e),i=n||{},o=i.width,a=r.match(o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth]);if(!a)return null;var s,u=a[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(c)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].test(u))return n}(c):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(u))return n}(c),s=t.valueCallback?t.valueCallback(s):s,{value:s=i.valueCallback?i.valueCallback(s):s,rest:r.slice(u.length)}}}var zw,Ww={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof Fw[t]?Fw[t]:1===e?Fw[t].one:Fw[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:Uw,formatRelative:function(t,e,n,r){return qw[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Bw({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Bw({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Bw({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Bw({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Bw({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(zw={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(zw.matchPattern);if(!i)return null;var o=i[0],a=n.match(zw.parsePattern);if(!a)return null;var s=zw.valueCallback?zw.valueCallback(a[0]):a[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(o.length)}}),era:Kw({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Kw({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Kw({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Kw({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Kw({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Hw(t,e){zb(2,arguments);var n=Wb(t).getTime(),r=Hb(e);return new Date(n+r)}function Jw(t,e){zb(2,arguments);var n=Hb(e);return Hw(t,-n)}function Gw(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Yw=864e5;function Qw(t){zb(1,arguments);var e=1,n=Wb(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Xw(t){zb(1,arguments);var e=Wb(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Qw(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=Qw(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function $w(t){zb(1,arguments);var e=Xw(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Qw(n);return r}var Zw=6048e5;function t_(t,e){zb(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:Hb(i),a=null==n.weekStartsOn?o:Hb(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Wb(t),u=s.getUTCDay(),c=(u<a?7:0)+u-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function e_(t,e){zb(1,arguments);var n=Wb(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:Hb(a),u=null==i.firstWeekContainsDate?s:Hb(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var l=t_(c,e),h=new Date(0);h.setUTCFullYear(r,0,u),h.setUTCHours(0,0,0,0);var f=t_(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function n_(t,e){zb(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:Hb(i),a=null==n.firstWeekContainsDate?o:Hb(n.firstWeekContainsDate),s=e_(t,e),u=new Date(0);u.setUTCFullYear(s,0,a),u.setUTCHours(0,0,0,0);var c=t_(u,e);return c}var r_=6048e5;function i_(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+Gw(o,2)}function o_(t,e){return t%60==0?(t>0?"-":"+")+Gw(Math.abs(t)/60,2):a_(t,e)}function a_(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+Gw(Math.floor(i/60),2)+n+Gw(i%60,2)}var s_={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear();return n.ordinalNumber(r>0?r:1-r,{unit:"year"})}return function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return Gw("yy"===e?r%100:r,e.length)}(t,e)},Y:function(t,e,n,r){var i=e_(t,r),o=i>0?i:1-i;return"YY"===e?Gw(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Gw(o,e.length)},R:function(t,e){return Gw(Xw(t),e.length)},u:function(t,e){return Gw(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Gw(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Gw(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):Gw(n+1,2)}(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return Gw(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=function(t,e){zb(1,arguments);var n=Wb(t),r=t_(n,e).getTime()-n_(n,e).getTime();return Math.round(r/r_)+1}(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Gw(i,e.length)},I:function(t,e,n){var r=function(t){zb(1,arguments);var e=Wb(t),n=Qw(e).getTime()-$w(e).getTime();return Math.round(n/Zw)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Gw(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):function(t,e){return Gw(t.getUTCDate(),e.length)}(t,e)},D:function(t,e,n){var r=function(t){zb(1,arguments);var e=Wb(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime();return Math.floor((n-r)/Yw)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Gw(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Gw(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Gw(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return Gw(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return function(t,e){return Gw(t.getUTCHours()%12||12,e.length)}(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):function(t,e){return Gw(t.getUTCHours(),e.length)}(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Gw(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Gw(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):function(t,e){return Gw(t.getUTCMinutes(),e.length)}(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):function(t,e){return Gw(t.getUTCSeconds(),e.length)}(t,e)},S:function(t,e){return function(t,e){var n=e.length,r=t.getUTCMilliseconds();return Gw(Math.floor(r*Math.pow(10,n-3)),e.length)}(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return o_(i);case"XXXX":case"XX":return a_(i);case"XXXXX":case"XXX":default:return a_(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return o_(i);case"xxxx":case"xx":return a_(i);case"xxxxx":case"xxx":default:return a_(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+i_(i,":");case"OOOO":default:return"GMT"+a_(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+i_(i,":");case"zzzz":default:return"GMT"+a_(i,":")}},t:function(t,e,n,r){return Gw(Math.floor((r._originalDate||t).getTime()/1e3),e.length)},T:function(t,e,n,r){return Gw((r._originalDate||t).getTime(),e.length)}};function u_(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function c_(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var l_={p:c_,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return u_(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",u_(i,e)).replace("{{time}}",c_(o,e))}};function h_(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var f_=["D","DD"],d_=["YY","YYYY"];function p_(t){return-1!==f_.indexOf(t)}function g_(t){return-1!==d_.indexOf(t)}function m_(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var v_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y_=/^'([^]*?)'?$/,w_=/''/g,__=/[a-zA-Z]/;function O_(t){return t.match(y_)[1].replace(w_,"'")}function C_(t,e){1&t&&(a.Kb(0,"h3"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.hc(" ",a.Vb(2,1,"profile-info.edit-title"),""))}function I_(t,e){1&t&&(a.Kb(0,"h3"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"profile-info.add-title")))}function T_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",7),a.Kb(1,"label",8),a.fc(2),a.Ub(3,"translate"),a.Jb(),a.Kb(4,"input",20),a.Rb("ngModelChange",function(e){return a.ac(t),a.Tb().mTmBirthday=e})("ngModelChange",function(e){return a.ac(t),a.Tb().mTmBirthday=e}),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(2),a.gc(a.Vb(3,2,"profile-info.birthday-title")),a.wb(2),a.Wb("ngModel",t.mTmBirthday)}}function E_(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.hc(" ",a.Vb(2,1,"profile-info.edit-button"),""))}function k_(t,e){1&t&&(a.Kb(0,"span"),a.fc(1),a.Ub(2,"translate"),a.Jb()),2&t&&(a.wb(1),a.gc(a.Vb(2,1,"profile-info.save-button")))}function S_(t,e){if(1&t&&(a.Kb(0,"div",5),a.Kb(1,"div",6),a.Ib(2,"img",7),a.Kb(3,"div",8),a.Kb(4,"h5",9),a.fc(5),a.Ub(6,"translate"),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&t){const t=e.$implicit;a.wb(1),a.Yb("routerLink","/categories/",t.key,"/menu"),a.wb(1),a.Wb("src","../../../assets/images/backgrounds/categories/"+t.img+".jpg",a.bc),a.wb(3),a.hc(" ",a.Vb(6,3,"categories."+t.name)," ")}}const x_=["guilty_input"];function P_(t,e){if(1&t&&(a.Kb(0,"div",11),a.Kb(1,"div",12),a.Ib(2,"img",13),a.Jb(),a.Kb(3,"p",14),a.fc(4),a.Ub(5,"translate"),a.Jb(),a.Jb()),2&t){const t=e.$implicit,n=a.Tb();a.wb(1),a.dc("guilty"===t.key?"padding: 13px !important;":""),a.yb(t.key===n.m_category?"category-img-card-selected":"category-img-card"),a.Yb("routerLink","/categories/",t.key,"/menu"),a.wb(1),a.yb("guilty"===t.key?"category-img-bigger":"category-img"),a.Wb("src","../../../assets/images/icons/"+t.icon+".svg",a.bc),a.wb(2),a.gc(a.Vb(5,9,"categories."+t.name))}}function A_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",15),a.Rb("click",function(){return a.ac(t),a.Tb().change_view_style("list")}),a.Kb(1,"div",16),a.Kb(2,"h6",17),a.fc(3,"Vista Lista"),a.Jb(),a.Ib(4,"i",18),a.Jb(),a.Jb()}}function N_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",16),a.Kb(1,"div",19),a.Rb("click",function(){return a.ac(t),a.Tb().change_view_style("gallery")}),a.Kb(2,"div",16),a.Kb(3,"h6",17),a.fc(4,"Vista Galer\xeda"),a.Jb(),a.Ib(5,"i",20),a.Jb(),a.Jb(),a.Kb(6,"div",19),a.Rb("click",function(){a.ac(t);const e=a.Tb();return e.m_show_everything=!e.m_show_everything}),a.Kb(7,"div",21),a.Kb(8,"h6",17),a.fc(9),a.Jb(),a.Ib(10,"i"),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.wb(9),a.hc("",t.m_show_everything?"Ocultar Todo":"Expandir Todo"," "),a.wb(1),a.yb(t.m_show_everything?"fas fa-chevron-up deselect-view-option":"fas fa-chevron-down deselect-view-option")}}function j_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",24),a.Kb(1,"p",25),a.Rb("click",function(){a.ac(t);const n=e.$implicit;return a.Tb(2).filter_by_category_menu(n)}),a.fc(2),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit,n=a.Tb(2);a.wb(1),a.yb(t.name===n.m_search_fields.category_menu?"category-title-selected":"category-title"),a.wb(1),a.ic("",t.name," (",t.menu.length,")")}}function D_(t,e){if(1&t&&(a.Kb(0,"div",22),a.Kb(1,"div",2),a.Kb(2,"div",3),a.ec(3,j_,3,4,"div",23),a.Jb(),a.Jb(),a.Jb()),2&t){const t=a.Tb();a.wb(3),a.Wb("ngForOf",t.m_global_array[0])}}function M_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",27),a.Kb(1,"div",28),a.Rb("click",function(){a.ac(t);const n=e.$implicit;return a.Tb(2).on_view_dish(n)}),a.Ib(2,"img",29),a.Kb(3,"div",30),a.Kb(4,"h4",31),a.fc(5),a.Jb(),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit;a.wb(2),a.Wb("src","../../../assets/images/dishes/"+t.image+".jpg",a.bc),a.wb(3),a.gc(t.name)}}function R_(t,e){if(1&t&&(a.Kb(0,"div",16),a.ec(1,M_,6,2,"div",26),a.Jb()),2&t){const t=a.Tb();a.wb(1),a.Wb("ngForOf",t.m_menu)}}function L_(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",42),a.Kb(1,"div",43),a.Rb("click",function(){a.ac(t);const n=e.$implicit;return a.Tb(3).on_view_dish(n)}),a.Kb(2,"div",44),a.Kb(3,"div",45),a.Ib(4,"img",46),a.Jb(),a.Kb(5,"div",47),a.Kb(6,"div",30),a.Kb(7,"h5",31),a.fc(8),a.Jb(),a.Kb(9,"p",48),a.fc(10),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit;a.wb(4),a.Wb("src","../../../assets/images/dishes/"+t.image+".jpg",a.bc),a.wb(4),a.ic("",t.name," - $",t.price,".00"),a.wb(2),a.gc(t.description)}}function F_(t,e){if(1&t&&(a.Kb(0,"div",35),a.Kb(1,"div",36),a.Kb(2,"h2",37),a.Kb(3,"button",38),a.fc(4),a.Ib(5,"i",39),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"div",40),a.Kb(7,"div",16),a.ec(8,L_,11,4,"div",41),a.Jb(),a.Jb(),a.Jb()),2&t){const t=e.$implicit,n=e.index,r=a.Tb(2);a.wb(3),a.xb("data-target","#collapse_"+n),a.wb(1),a.ic(" ",t.name," (",t.menu.length,") "),a.wb(2),a.yb(r.m_show_everything?"collapse show":"collapse"),a.Wb("id","collapse_"+n),a.wb(2),a.Wb("ngForOf",t.menu)}}function V_(t,e){if(1&t&&(a.Kb(0,"div",32),a.Kb(1,"div",33),a.ec(2,F_,9,7,"div",34),a.Jb(),a.Jb()),2&t){const t=a.Tb();a.wb(2),a.Wb("ngForOf",t.m_global_array[0])}}const U_=[{path:"",component:Zb,children:[{path:"home",component:ey},{path:"authentication/:action",component:Rw},{path:"profile-info/:action",component:(()=>{class t{constructor(t,e,n,r){this.afService=t,this.router=e,this.activatedRoute=n,this.translate=r,this.mTmStatus=!1,this.m_user=new Bb("","","","",null,"","",""),this.afService.fnWaitForPromises().then(t=>{this.m_user=this.afService.m_user,this.m_user.birthday&&(this.mTmBirthday=function(t,e,n){zb(2,arguments);var r=String(e),i=n||{},o=i.locale||Ww,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:Hb(a),u=null==i.firstWeekContainsDate?s:Hb(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,l=null==c?0:Hb(c),h=null==i.weekStartsOn?l:Hb(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=Wb(t);if(!Lw(f))throw new RangeError("Invalid time value");var d=h_(f),p=Jw(f,d),g={firstWeekContainsDate:u,weekStartsOn:h,locale:o,_originalDate:f};return r.match(b_).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,l_[e])(t,o.formatLong,g):t}).join("").match(v_).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return O_(n);var a=s_[r];if(a)return!i.useAdditionalWeekYearTokens&&g_(n)&&m_(n,e,t),!i.useAdditionalDayOfYearTokens&&p_(n)&&m_(n,e,t),a(p,n,o.localize,g);if(r.match(__))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")}(new Date(this.m_user.birthday),"yyyy-MM-dd"))}).catch(t=>{console.log("Not authenticated")})}ngOnInit(){this.activatedRoute.params.subscribe(t=>{"edit"===t.action?(this.mTmStatus=!0,this.mTmAction="edit"):this.mTmAction="add"})}fnInitProfile(){"add"===this.mTmAction&&(this.m_user.birthday=new Date(this.mTmBirthday)),y(Object.assign(new Bb("","","","",null,"","",""),this.m_user)).then(t=>{0===t.length?"edit"===this.mTmAction?this.fnUpdateUser():this.fnAddUser():ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-error"),text:this.translate.instant("sweet-alert.subtitle-error"),confirmButtonText:this.translate.instant("sweet-alert.accept-button"),footer:"<p>"+this.translate.instant("sweet-alert.problem-persist")+"</p>"})})}fnAddUser(){this.afService.dbFS.collection("users").doc(this.m_user.uid).set(Object.assign({},this.m_user)).then(t=>{ry.a.fire({icon:"success",title:this.translate.instant("sweet-alert.title-perfect"),text:this.translate.instant("sweet-alert.subtitle-save"),confirmButtonText:this.translate.instant("sweet-alert.accept-button")}).then(()=>{this.router.navigate(["/home"]).then(t=>console.log("User added successfully."))})})}fnUpdateUser(){this.afService.dbFS.collection("users").doc(this.m_user.uid).update(Object.assign({},this.m_user)).then(t=>{ry.a.fire({icon:"success",title:this.translate.instant("sweet-alert.title-perfect"),text:this.translate.instant("sweet-alert.subtitle-edit"),confirmButtonText:this.translate.instant("sweet-alert.accept-button")}).then(()=>{this.router.navigate(["/home"]).then(t=>console.log("User updated successfully."))})})}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(Jb),a.Hb(o.b),a.Hb(o.a),a.Hb(Gb.d))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-profile-info"]],decls:51,vars:44,consts:[[1,"container"],[1,"row"],[1,"col-lg-3"],[1,"col-lg-7"],[1,"contact-form-validated","contact-one__form"],[1,"block-title"],[4,"ngIf"],[1,"col-lg-12",2,"padding-top","30px !important"],[1,"form-label"],["type","text","name","m_user.name",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","text","name","m_user.last_name",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["class","col-lg-12","style","padding-top: 30px !important;",4,"ngIf"],["type","email","name","m_user.email",1,"form-control",3,"readOnly","ngModel","ngModelChange"],["type","number","name","m_user.phone_number",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["name","m_user.gender",1,"form-control",3,"ngModel","ngModelChange"],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12","text-left",2,"padding-top","30px !important","text-align","center !important"],[1,"btn","btn-secondary",3,"click"],["type","date","name","mTmBirthday",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.Kb(1,"div",1),a.Ib(2,"div",2),a.Kb(3,"div",3),a.Kb(4,"form",4),a.Kb(5,"div",5),a.ec(6,C_,3,3,"h3",6),a.ec(7,I_,3,3,"h3",6),a.Jb(),a.Kb(8,"div",1),a.Kb(9,"div",7),a.Kb(10,"label",8),a.fc(11),a.Ub(12,"translate"),a.Jb(),a.Kb(13,"input",9),a.Rb("ngModelChange",function(t){return e.m_user.name=t})("ngModelChange",function(t){return e.m_user.name=t}),a.Ub(14,"translate"),a.Jb(),a.Jb(),a.Kb(15,"div",7),a.Kb(16,"label",8),a.fc(17),a.Ub(18,"translate"),a.Jb(),a.Kb(19,"input",10),a.Rb("ngModelChange",function(t){return e.m_user.last_name=t})("ngModelChange",function(t){return e.m_user.last_name=t}),a.Ub(20,"translate"),a.Jb(),a.Jb(),a.ec(21,T_,5,4,"div",11),a.Kb(22,"div",7),a.Kb(23,"label",8),a.fc(24),a.Ub(25,"translate"),a.Jb(),a.Kb(26,"input",12),a.Rb("ngModelChange",function(t){return e.m_user.email=t})("ngModelChange",function(t){return e.m_user.email=t}),a.Jb(),a.Jb(),a.Kb(27,"div",7),a.Kb(28,"label",8),a.fc(29),a.Ub(30,"translate"),a.Jb(),a.Kb(31,"input",13),a.Rb("ngModelChange",function(t){return e.m_user.phone_number=t})("ngModelChange",function(t){return e.m_user.phone_number=t}),a.Ub(32,"translate"),a.Jb(),a.Jb(),a.Kb(33,"div",7),a.Kb(34,"label",8),a.fc(35),a.Ub(36,"translate"),a.Jb(),a.Kb(37,"select",14),a.Rb("ngModelChange",function(t){return e.m_user.gender=t})("ngModelChange",function(t){return e.m_user.gender=t}),a.Kb(38,"option",15),a.fc(39),a.Ub(40,"translate"),a.Jb(),a.Kb(41,"option",16),a.fc(42),a.Ub(43,"translate"),a.Jb(),a.Kb(44,"option",17),a.fc(45),a.Ub(46,"translate"),a.Jb(),a.Jb(),a.Jb(),a.Kb(47,"div",18),a.Kb(48,"button",19),a.Rb("click",function(){return e.fnInitProfile()}),a.ec(49,E_,3,3,"span",6),a.ec(50,k_,3,3,"span",6),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&t&&(a.wb(6),a.Wb("ngIf",e.mTmStatus),a.wb(1),a.Wb("ngIf",!e.mTmStatus),a.wb(4),a.gc(a.Vb(12,22,"profile-info.name-title")),a.wb(2),a.Xb("placeholder",a.Vb(14,24,"profile-info.name-placeholder")),a.Wb("ngModel",e.m_user.name),a.wb(4),a.gc(a.Vb(18,26,"profile-info.last-name-title")),a.wb(2),a.Xb("placeholder",a.Vb(20,28,"profile-info.last-name-placeholder")),a.Wb("ngModel",e.m_user.last_name),a.wb(2),a.Wb("ngIf",!e.mTmStatus),a.wb(3),a.gc(a.Vb(25,30,"profile-info.email-title")),a.wb(2),a.Wb("readOnly",!0)("ngModel",e.m_user.email),a.wb(3),a.gc(a.Vb(30,32,"profile-info.phone-number-title")),a.wb(2),a.Xb("placeholder",a.Vb(32,34,"profile-info.phone-number-placeholder")),a.Wb("ngModel",e.m_user.phone_number),a.wb(4),a.gc(a.Vb(36,36,"profile-info.gender-title")),a.wb(2),a.Wb("ngModel",e.m_user.gender),a.wb(2),a.gc(a.Vb(40,38,"profile-info.gender-male")),a.wb(3),a.gc(a.Vb(43,40,"profile-info.gender-female")),a.wb(3),a.gc(a.Vb(46,42,"profile-info.gender-other")),a.wb(4),a.Wb("ngIf",e.mTmStatus),a.wb(1),a.Wb("ngIf",!e.mTmStatus))},directives:[ww,jy,mw,r.i,fy,Ny,yw,My,Ky,zy,Gy],pipes:[Gb.c],styles:[""]}),t})()},{path:"categories",component:(()=>{class t{constructor(){this.m_categories_array=[{name:"food",key:"food",img:"img-1"},{name:"breakfast",key:"breakfast",img:"img-2"}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Bb({type:t,selectors:[["app-categories"]],decls:8,vars:1,consts:[[1,"container","container-bg"],[1,"row","bg-white","text-center"],[1,"col-12","pt-4"],[1,"row","bg-white","pt-4"],["class","col-6",4,"ngFor","ngForOf"],[1,"col-6"],[1,"card","category-card",3,"routerLink"],["alt","...",1,"category-img",3,"src"],[1,"card-body"],[1,"card-title","text-center"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.Ib(1,"br"),a.Kb(2,"div",1),a.Kb(3,"div",2),a.Kb(4,"h5"),a.fc(5,"Men\xfa"),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"div",3),a.ec(7,S_,7,5,"div",4),a.Jb(),a.Jb()),2&t&&(a.wb(7),a.Wb("ngForOf",e.m_categories_array))},directives:[r.h,o.c],pipes:[Gb.c],styles:[".container-bg[_ngcontent-%COMP%]{background-color:#e5e5e5}.category-img[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:400px;z-index:10;object-fit:cover;border-top-left-radius:10px;border-top-right-radius:10px}.category-card[_ngcontent-%COMP%]{border:0!important;border-radius:10px;background-color:#f0f0f0;margin-bottom:2em}@media only screen and (max-width:600px){.category-img[_ngcontent-%COMP%]{width:100%;height:135px}}"]}),t})()},{path:"categories/:category/menu",component:(()=>{class t{constructor(t,e,r){this.activatedRoute=t,this.translate=e,this.router=r,this.m_view_style="gallery",this.m_show_everything=!1,this.m_guilty_unlocked=!1,this.m_categories_array=[{name:"breakfast",key:"breakfast",icon:"desayuno-menu"},{name:"food",key:"food",icon:"comida-menu"}],this.m_menu_option_array=[{title:"complete",key:"complete"},{title:"no-gluten",key:"no-gluten"}],this.init_search(),this.activatedRoute.params.subscribe(t=>{this.m_category=t.category,this.m_global_array="food"===this.m_category?Array.of(n("DOXw")):"breakfast"===this.m_category?Array.of(n("Lfcm")):"drinks"===this.m_category?Array.of(n("46XO")):"guilty"===this.m_category&&!0===this.m_guilty_unlocked?Array.of(n("tYqO")):[],0!==this.m_global_array.length&&(this.m_search_fields.category_menu=this.m_global_array[0][0].name,this.m_menu=this.m_global_array[0][0].menu)})}ngOnInit(){}init_search(){this.m_search_fields={category:"",category_menu:"",menu_option:"",guilty_access:""}}change_view_style(t){this.m_view_style=t}filter_by_category(t){this.m_search_fields.category=t}filter_by_category_menu(t){this.m_menu=t.menu,this.m_search_fields.category_menu=t.name}filter_by_menu_option(t){this.m_search_fields.menu_option=t}get_guilty_key(t){this.m_search_fields.guilty_access=t.target.value}unlock_guilty(){3===this.m_categories_array.length&&this.m_categories_array.push({name:"guilty",key:"guilty",icon:"icon-5"}),this.m_guilty_unlocked=!0,this.router.navigate(["/categories/guilty/menu"]).then(t=>console.log("The culprits have been unlocked."))}on_view_drinks(){"SOY"===this.m_search_fields.guilty_access.toUpperCase()?(this.unlock_guilty(),ry.a.fire({icon:"success",title:this.translate.instant("sweet-alert.title-correct-guilty"),confirmButtonText:this.translate.instant("sweet-alert.accept-button")})):ry.a.fire({icon:"error",title:this.translate.instant("sweet-alert.title-guilty"),confirmButtonText:this.translate.instant("sweet-alert.accept-button")}),this.guilty_key.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(o.a),a.Hb(Gb.d),a.Hb(o.b))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-menu"]],viewQuery:function(t,e){if(1&t&&a.kc(x_,!0),2&t){let t;a.Zb(t=a.Sb())&&(e.guilty_key=t.first)}},decls:14,vars:6,consts:[[1,"container-bg"],[1,"container","bg-white"],[1,"categories-container"],[1,"category-inner"],["class","category-card",4,"ngFor","ngForOf"],[1,"container","pt-2","bg-white"],[1,"container","view-option-inner","spacer-sm-top"],["class","container row",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","container bg-white spacer-sm-bottom",4,"ngIf"],["class","container container-padding bg-white spacer-sm-top",4,"ngIf"],[1,"category-card"],[3,"routerLink"],["alt","...",3,"src"],[1,"category-title"],[1,"container","row",3,"click"],[1,"row"],[1,"option-text","fw-bold"],[1,"fas","fa-list","deselect-view-option"],[1,"col-md-6",3,"click"],[1,"fas","fa-th-large","deselect-view-option"],[1,"row","justify-content-end"],[1,"container","bg-white","spacer-sm-bottom"],["class","category-card-gallery",4,"ngFor","ngForOf"],[1,"category-card-gallery"],[3,"click"],["class","col-md-6 col-xs-6",4,"ngFor","ngForOf"],[1,"col-md-6","col-xs-6"],[1,"card","category-dishes-card",3,"click"],["g","","alt","...",1,"category-dish-img",3,"src"],[1,"card-body"],[1,"card-title"],[1,"container","container-padding","bg-white","spacer-sm-top"],["id","category_accordion",1,"accordion"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header",2,"background-color","transparent"],[1,"mb-0"],["type","button","data-toggle","collapse","aria-expanded","true",1,"btn","btn-link",2,"color","#031717","text-transform","uppercase"],[1,"fas","fa-chevron-down"],["data-parent","#category_accordion",3,"id"],["class","col-md-12 col-xs-12",4,"ngFor","ngForOf"],[1,"col-md-12","col-xs-12"],[1,"card","category-dishes-card-2","mb-3",3,"click"],[1,"row","g-0"],[1,"col-md-4"],["alt","...",1,"category-dish-img-2",3,"src"],[1,"col-md-8"],[1,"card-text"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.Ib(1,"br"),a.Kb(2,"div",1),a.Kb(3,"div",2),a.Kb(4,"div",3),a.ec(5,P_,6,11,"div",4),a.Jb(),a.Jb(),a.Jb(),a.Ib(6,"br"),a.Kb(7,"div",5),a.Kb(8,"div",6),a.ec(9,A_,5,0,"div",7),a.ec(10,N_,11,3,"div",8),a.Jb(),a.ec(11,D_,4,1,"div",9),a.ec(12,R_,2,1,"div",8),a.Jb(),a.ec(13,V_,3,1,"div",10),a.Jb()),2&t&&(a.wb(5),a.Wb("ngForOf",e.m_categories_array),a.wb(4),a.Wb("ngIf","gallery"===e.m_view_style),a.wb(1),a.Wb("ngIf","list"===e.m_view_style),a.wb(1),a.Wb("ngIf","gallery"===e.m_view_style),a.wb(1),a.Wb("ngIf","gallery"===e.m_view_style&&e.m_menu),a.wb(1),a.Wb("ngIf","list"===e.m_view_style))},directives:[r.h,r.i,o.c],pipes:[Gb.c],styles:[".container[_ngcontent-%COMP%], .container-lg[_ngcontent-%COMP%], .container-md[_ngcontent-%COMP%], .container-sm[_ngcontent-%COMP%], .container-xl[_ngcontent-%COMP%]{max-width:700px}.container-bg[_ngcontent-%COMP%]{background-color:#e5e5e5}.categories-container[_ngcontent-%COMP%]{overflow:scroll;width:100%;text-align:center!important}.category-inner[_ngcontent-%COMP%]{transition:transform .45s;white-space:nowrap;margin:5px;text-align:center!important}.categories-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.categories-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c0994d;border-radius:4px}.category-card[_ngcontent-%COMP%]{width:60px}.category-card[_ngcontent-%COMP%], .category-card-gallery[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:10px;cursor:pointer;height:30px}.category-img[_ngcontent-%COMP%]{top:0;left:0;width:30px;height:30px;z-index:10}.category-img-bigger[_ngcontent-%COMP%]{top:0;left:0;width:36px;height:36px;z-index:10}.category-img-card[_ngcontent-%COMP%]{padding:15px;border-radius:15px;background-color:#363636}.category-img-card-selected[_ngcontent-%COMP%]{padding:15px;border-radius:15px;background-color:#c0994d}.category-title[_ngcontent-%COMP%], .category-title-selected[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;font-weight:700}.category-title-selected[_ngcontent-%COMP%]{border-bottom-style:solid;border-color:#c0994d}.options-container[_ngcontent-%COMP%]{width:100%;margin-top:2em}.selected-option[_ngcontent-%COMP%]{color:#fff;background-color:#000;border-color:#000;width:150px;margin:5px!important}.deselect-option[_ngcontent-%COMP%]{color:#000;background-color:#f0f0f0;border-color:#f0f0f0;width:150px;margin:5px!important}.category-dishes-card[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:15px;margin-bottom:2em;border-style:none;text-align:center!important}.category-dish-img[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:250px;z-index:10;object-fit:cover;border-top-left-radius:15px;border-top-right-radius:15px}.category-dishes-card-2[_ngcontent-%COMP%]{border-radius:15px;margin-bottom:2em;box-shadow:1px 1px 2px 0 rgba(0,0,0,.3)}.category-dish-img-2[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:100%;z-index:10;object-fit:cover;border-bottom-left-radius:15px;border-top-left-radius:15px}.category-dish-img-modal[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:300px;object-fit:cover}.deselect-view-option[_ngcontent-%COMP%], .selected-view-option[_ngcontent-%COMP%]{color:#c0994d;margin-left:10px;font-size:20px;cursor:pointer}.option-text[_ngcontent-%COMP%]{color:#c0994d;font-weight:700}.close-modal[_ngcontent-%COMP%]{position:absolute;top:8px;color:#fff;right:16px;font-size:25px}h1[_ngcontent-%COMP%]{text-align:center}#coin[_ngcontent-%COMP%]{position:relative;margin:0 auto;width:100px;height:100px;cursor:pointer}#coin[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;box-shadow:inset 0 0 45px hsla(0,0%,100%,.3),0 12px 20px -10px rgba(0,0,0,.4)}.side-a[_ngcontent-%COMP%]{background-color:#3e3e3e}.side-b[_ngcontent-%COMP%]{background-color:#ffd863}#coin[_ngcontent-%COMP%]{-webkit-transform-style:preserve-3d}#coin[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;-webkit-backface-visibility:hidden}.side-a[_ngcontent-%COMP%]{z-index:100}.side-b[_ngcontent-%COMP%]{-webkit-transform:rotateY(-180deg)}#coin.heads[_ngcontent-%COMP%]{animation:flipHeads 3s ease-out forwards}#coin.tails[_ngcontent-%COMP%]{animation:flipTails 3s ease-out forwards}"]}),t})()}]}];let q_=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(U_)],o.e]}),t})();var B_=n("PCNd");let K_=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[r.b,q_,B_.SharedModule,Gb.b,i.b,Ow],Gb.b]}),t})()},eWa3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,r.default)(t),(e=(0,i.default)(e,c)).require_display_name||e.allow_display_name){var n=t.match(l);if(n){var u=n[1];if(t=t.replace(u,"").replace(/(^<|>$)/g,""),u.endsWith(" ")&&(u=u.substr(0,u.length-1)),!function(t){var e=t.replace(/^"(.+)"$/,"$1");if(!e.trim())return!1;if(/[\.";<>]/.test(e)){if(e===t)return!1;if(e.split('"').length!==e.split('\\"').length)return!1}return!0}(u))return!1}else if(e.require_display_name)return!1}if(!e.ignore_max_length&&t.length>254)return!1;var m=t.split("@"),v=m.pop(),b=m.join("@"),y=v.toLowerCase();if(e.domain_specific_validation&&("gmail.com"===y||"googlemail.com"===y)){var w=(b=b.toLowerCase()).split("+")[0];if(!(0,o.default)(w.replace(".",""),{min:6,max:30}))return!1;for(var _=w.split("."),O=0;O<_.length;O++)if(!f.test(_[O]))return!1}if(!(!1!==e.ignore_max_length||(0,o.default)(b,{max:64})&&(0,o.default)(v,{max:254})))return!1;if(!(0,a.default)(v,{require_tld:e.require_tld})){if(!e.allow_ip_domain)return!1;if(!(0,s.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var C=v.substr(1,v.length-2);if(0===C.length||!(0,s.default)(C))return!1}}if('"'===b[0])return b=b.slice(1,b.length-1),e.allow_utf8_local_part?g.test(b):d.test(b);for(var I=e.allow_utf8_local_part?p:h,T=b.split("."),E=0;E<T.length;E++)if(!I.test(T[E]))return!1;return!e.blacklisted_chars||-1===b.search(new RegExp("[".concat(e.blacklisted_chars,"]+"),"g"))};var r=u(n("2Idn")),i=u(n("5AlR")),o=u(n("91Rb")),a=u(n("f2Qg")),s=u(n("hHZz"));function u(t){return t&&t.__esModule?t:{default:t}}var c={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1},l=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,d=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,g=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=e.default,t.exports.default=e.default},f2Qg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,r.default)(t),(e=(0,i.default)(e,a)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var n=t.split("."),o=n[n.length-1];if(e.require_tld){if(n.length<2)return!1;if(!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20\u00A9\uFFFD]/.test(o))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(o))&&n.every(function(t){return!(t.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)||/[\uff01-\uff5e]/.test(t)||/^-|-$/.test(t)||!e.allow_underscores&&/_/.test(t))})};var r=o(n("2Idn")),i=o(n("5AlR"));function o(t){return t&&t.__esModule?t:{default:t}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1};t.exports=e.default,t.exports.default=e.default},hHZz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(e),!(n=String(n)))return t(e,4)||t(e,6);if("4"===n){if(!s.test(e))return!1;var r=e.split(".").sort(function(t,e){return t-e});return r[3]<=255}return"6"===n&&!!c.test(e)};var r,i=(r=n("2Idn"))&&r.__esModule?r:{default:r},o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",a="(".concat(o,"[.]){3}").concat(o),s=new RegExp("^".concat(a,"$")),u="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(a,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(a,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(a,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(a,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(a,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(a,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(a,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");t.exports=e.default,t.exports.default=e.default},mrSG:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,a){n(i=t[e].apply(t,r)).then(o,a)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function a(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function s(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",function(){return a}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return U}),n.d(e,"e",function(){return T}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return s}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return Q}),n.d(e,"k",function(){return M}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return W}),n.d(e,"p",function(){return X}),n.d(e,"q",function(){return d}),n.d(e,"r",function(){return D}),n.d(e,"s",function(){return m}),n.d(e,"t",function(){return v}),n.d(e,"u",function(){return y}),n.d(e,"v",function(){return L}),n.d(e,"w",function(){return w}),n.d(e,"x",function(){return C}),n.d(e,"y",function(){return p}),n.d(e,"z",function(){return g}),n.d(e,"A",function(){return O}),n.d(e,"B",function(){return b}),n.d(e,"C",function(){return _}),n.d(e,"D",function(){return j}),n.d(e,"E",function(){return P}),n.d(e,"F",function(){return F}),n.d(e,"G",function(){return V}),n.d(e,"H",function(){return R}),n.d(e,"I",function(){return Y}),n.d(e,"J",function(){return G}),n.d(e,"K",function(){return A}),n.d(e,"L",function(){return z}),n.d(e,"M",function(){return H}),n.d(e,"N",function(){return J}),n.d(e,"O",function(){return I});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return d().indexOf("Electron/")>=0}function w(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _(){return d().indexOf("MSAppHost/")>=0}function O(){return!1}function C(){return"indexedDB"in self&&null!=indexedDB}function I(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function T(){return!(!navigator||!navigator.cookieEnabled)}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,k.prototype.create),o}return Object(r.d)(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?S(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new E(i,s,r);return u},t}();function S(t,e){return t.replace(x,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var x=/\{\$([^}]+)}/g;function P(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=P(c(o[0])||""),n=P(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function K(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e)+"must be a valid function.")}function J(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Y=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Q(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function X(t){return t&&t._delegate?t._delegate:t}},tYqO:function(t){t.exports=JSON.parse('[{"name":"Los culpables","menu":[{"name":"Beso Rojo","price":110,"description":"Descripci\xf3n Pendiente"},{"name":"Carajillo","price":75,"description":"Descripci\xf3n Pendiente"},{"name":"Clericot Copa","price":79,"description":"Descripci\xf3n Pendiente"},{"name":"Clericot Jarra","price":290,"description":"Descripci\xf3n Pendiente"},{"name":"Gin de Frutos Rojos","price":110,"description":"Descripci\xf3n Pendiente"},{"name":"Gin Fizz","price":110,"description":"Descripci\xf3n Pendiente"},{"name":"Margarita de Aperol","price":95,"description":"Descripci\xf3n Pendiente"},{"name":"Margarita de Mango","price":95,"description":"Descripci\xf3n Pendiente"},{"name":"Margarita de Pi\xf1a","price":95,"description":"Descripci\xf3n Pendiente"},{"name":"Martini de Espresso","price":95,"description":"Descripci\xf3n Pendiente"},{"name":"Martini de Mazap\xe1n","price":95,"description":"Descripci\xf3n Pendiente"},{"name":"Mezcalita de Jamaica","price":90,"description":"Descripci\xf3n Pendiente"},{"name":"Mezcalita de Mango","price":90,"description":"Descripci\xf3n Pendiente"},{"name":"Mezcalita de Pi\xf1a","price":90,"description":"Descripci\xf3n Pendiente"},{"name":"Xtabentun Tonic","price":90,"description":"Descripci\xf3n Pendiente"},{"name":"Aperol Spritz","price":113,"description":"Descripci\xf3n Pendient"}]}]')},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),a=n("qOnz"),s=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.m)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.k)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(a.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.n)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.n)(e,t)},createSubscribe:a.l,ErrorFactory:a.b,deepExtend:a.n}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(a.s)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.z)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),y.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new s.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(w),e.a=w}}]);